var main=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),t.exports=n(12)},function(t,e,n){n(2)},function(t,e,n){n(3)},function(t,e,n){var r=n(4);"string"==typeof r&&(r=[[t.id,r,""]]);n(11)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,'/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}\n\n/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */@media print{*,:after,:before{background:transparent!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}blockquote,pre{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}img{max-width:100%!important}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}.navbar{display:none}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000!important}.label{border:1px solid #000}.table{border-collapse:collapse!important}.table td,.table th{background-color:#fff!important}.table-bordered td,.table-bordered th{border:1px solid #ddd!important}}@font-face{font-family:Glyphicons Halflings;src:url('+n(6)+");src:url("+n(6)+') format("embedded-opentype"),url('+n(7)+') format("woff2"),url('+n(8)+') format("woff"),url('+n(9)+') format("truetype"),url('+n(10)+') format("svg")}.glyphicon{position:relative;top:1px;display:inline-block;font-family:Glyphicons Halflings;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.glyphicon-asterisk:before{content:"*"}.glyphicon-plus:before{content:"+"}.glyphicon-eur:before,.glyphicon-euro:before{content:"\\20AC"}.glyphicon-minus:before{content:"\\2212"}.glyphicon-cloud:before{content:"\\2601"}.glyphicon-envelope:before{content:"\\2709"}.glyphicon-pencil:before{content:"\\270F"}.glyphicon-glass:before{content:"\\E001"}.glyphicon-music:before{content:"\\E002"}.glyphicon-search:before{content:"\\E003"}.glyphicon-heart:before{content:"\\E005"}.glyphicon-star:before{content:"\\E006"}.glyphicon-star-empty:before{content:"\\E007"}.glyphicon-user:before{content:"\\E008"}.glyphicon-film:before{content:"\\E009"}.glyphicon-th-large:before{content:"\\E010"}.glyphicon-th:before{content:"\\E011"}.glyphicon-th-list:before{content:"\\E012"}.glyphicon-ok:before{content:"\\E013"}.glyphicon-remove:before{content:"\\E014"}.glyphicon-zoom-in:before{content:"\\E015"}.glyphicon-zoom-out:before{content:"\\E016"}.glyphicon-off:before{content:"\\E017"}.glyphicon-signal:before{content:"\\E018"}.glyphicon-cog:before{content:"\\E019"}.glyphicon-trash:before{content:"\\E020"}.glyphicon-home:before{content:"\\E021"}.glyphicon-file:before{content:"\\E022"}.glyphicon-time:before{content:"\\E023"}.glyphicon-road:before{content:"\\E024"}.glyphicon-download-alt:before{content:"\\E025"}.glyphicon-download:before{content:"\\E026"}.glyphicon-upload:before{content:"\\E027"}.glyphicon-inbox:before{content:"\\E028"}.glyphicon-play-circle:before{content:"\\E029"}.glyphicon-repeat:before{content:"\\E030"}.glyphicon-refresh:before{content:"\\E031"}.glyphicon-list-alt:before{content:"\\E032"}.glyphicon-lock:before{content:"\\E033"}.glyphicon-flag:before{content:"\\E034"}.glyphicon-headphones:before{content:"\\E035"}.glyphicon-volume-off:before{content:"\\E036"}.glyphicon-volume-down:before{content:"\\E037"}.glyphicon-volume-up:before{content:"\\E038"}.glyphicon-qrcode:before{content:"\\E039"}.glyphicon-barcode:before{content:"\\E040"}.glyphicon-tag:before{content:"\\E041"}.glyphicon-tags:before{content:"\\E042"}.glyphicon-book:before{content:"\\E043"}.glyphicon-bookmark:before{content:"\\E044"}.glyphicon-print:before{content:"\\E045"}.glyphicon-camera:before{content:"\\E046"}.glyphicon-font:before{content:"\\E047"}.glyphicon-bold:before{content:"\\E048"}.glyphicon-italic:before{content:"\\E049"}.glyphicon-text-height:before{content:"\\E050"}.glyphicon-text-width:before{content:"\\E051"}.glyphicon-align-left:before{content:"\\E052"}.glyphicon-align-center:before{content:"\\E053"}.glyphicon-align-right:before{content:"\\E054"}.glyphicon-align-justify:before{content:"\\E055"}.glyphicon-list:before{content:"\\E056"}.glyphicon-indent-left:before{content:"\\E057"}.glyphicon-indent-right:before{content:"\\E058"}.glyphicon-facetime-video:before{content:"\\E059"}.glyphicon-picture:before{content:"\\E060"}.glyphicon-map-marker:before{content:"\\E062"}.glyphicon-adjust:before{content:"\\E063"}.glyphicon-tint:before{content:"\\E064"}.glyphicon-edit:before{content:"\\E065"}.glyphicon-share:before{content:"\\E066"}.glyphicon-check:before{content:"\\E067"}.glyphicon-move:before{content:"\\E068"}.glyphicon-step-backward:before{content:"\\E069"}.glyphicon-fast-backward:before{content:"\\E070"}.glyphicon-backward:before{content:"\\E071"}.glyphicon-play:before{content:"\\E072"}.glyphicon-pause:before{content:"\\E073"}.glyphicon-stop:before{content:"\\E074"}.glyphicon-forward:before{content:"\\E075"}.glyphicon-fast-forward:before{content:"\\E076"}.glyphicon-step-forward:before{content:"\\E077"}.glyphicon-eject:before{content:"\\E078"}.glyphicon-chevron-left:before{content:"\\E079"}.glyphicon-chevron-right:before{content:"\\E080"}.glyphicon-plus-sign:before{content:"\\E081"}.glyphicon-minus-sign:before{content:"\\E082"}.glyphicon-remove-sign:before{content:"\\E083"}.glyphicon-ok-sign:before{content:"\\E084"}.glyphicon-question-sign:before{content:"\\E085"}.glyphicon-info-sign:before{content:"\\E086"}.glyphicon-screenshot:before{content:"\\E087"}.glyphicon-remove-circle:before{content:"\\E088"}.glyphicon-ok-circle:before{content:"\\E089"}.glyphicon-ban-circle:before{content:"\\E090"}.glyphicon-arrow-left:before{content:"\\E091"}.glyphicon-arrow-right:before{content:"\\E092"}.glyphicon-arrow-up:before{content:"\\E093"}.glyphicon-arrow-down:before{content:"\\E094"}.glyphicon-share-alt:before{content:"\\E095"}.glyphicon-resize-full:before{content:"\\E096"}.glyphicon-resize-small:before{content:"\\E097"}.glyphicon-exclamation-sign:before{content:"\\E101"}.glyphicon-gift:before{content:"\\E102"}.glyphicon-leaf:before{content:"\\E103"}.glyphicon-fire:before{content:"\\E104"}.glyphicon-eye-open:before{content:"\\E105"}.glyphicon-eye-close:before{content:"\\E106"}.glyphicon-warning-sign:before{content:"\\E107"}.glyphicon-plane:before{content:"\\E108"}.glyphicon-calendar:before{content:"\\E109"}.glyphicon-random:before{content:"\\E110"}.glyphicon-comment:before{content:"\\E111"}.glyphicon-magnet:before{content:"\\E112"}.glyphicon-chevron-up:before{content:"\\E113"}.glyphicon-chevron-down:before{content:"\\E114"}.glyphicon-retweet:before{content:"\\E115"}.glyphicon-shopping-cart:before{content:"\\E116"}.glyphicon-folder-close:before{content:"\\E117"}.glyphicon-folder-open:before{content:"\\E118"}.glyphicon-resize-vertical:before{content:"\\E119"}.glyphicon-resize-horizontal:before{content:"\\E120"}.glyphicon-hdd:before{content:"\\E121"}.glyphicon-bullhorn:before{content:"\\E122"}.glyphicon-bell:before{content:"\\E123"}.glyphicon-certificate:before{content:"\\E124"}.glyphicon-thumbs-up:before{content:"\\E125"}.glyphicon-thumbs-down:before{content:"\\E126"}.glyphicon-hand-right:before{content:"\\E127"}.glyphicon-hand-left:before{content:"\\E128"}.glyphicon-hand-up:before{content:"\\E129"}.glyphicon-hand-down:before{content:"\\E130"}.glyphicon-circle-arrow-right:before{content:"\\E131"}.glyphicon-circle-arrow-left:before{content:"\\E132"}.glyphicon-circle-arrow-up:before{content:"\\E133"}.glyphicon-circle-arrow-down:before{content:"\\E134"}.glyphicon-globe:before{content:"\\E135"}.glyphicon-wrench:before{content:"\\E136"}.glyphicon-tasks:before{content:"\\E137"}.glyphicon-filter:before{content:"\\E138"}.glyphicon-briefcase:before{content:"\\E139"}.glyphicon-fullscreen:before{content:"\\E140"}.glyphicon-dashboard:before{content:"\\E141"}.glyphicon-paperclip:before{content:"\\E142"}.glyphicon-heart-empty:before{content:"\\E143"}.glyphicon-link:before{content:"\\E144"}.glyphicon-phone:before{content:"\\E145"}.glyphicon-pushpin:before{content:"\\E146"}.glyphicon-usd:before{content:"\\E148"}.glyphicon-gbp:before{content:"\\E149"}.glyphicon-sort:before{content:"\\E150"}.glyphicon-sort-by-alphabet:before{content:"\\E151"}.glyphicon-sort-by-alphabet-alt:before{content:"\\E152"}.glyphicon-sort-by-order:before{content:"\\E153"}.glyphicon-sort-by-order-alt:before{content:"\\E154"}.glyphicon-sort-by-attributes:before{content:"\\E155"}.glyphicon-sort-by-attributes-alt:before{content:"\\E156"}.glyphicon-unchecked:before{content:"\\E157"}.glyphicon-expand:before{content:"\\E158"}.glyphicon-collapse-down:before{content:"\\E159"}.glyphicon-collapse-up:before{content:"\\E160"}.glyphicon-log-in:before{content:"\\E161"}.glyphicon-flash:before{content:"\\E162"}.glyphicon-log-out:before{content:"\\E163"}.glyphicon-new-window:before{content:"\\E164"}.glyphicon-record:before{content:"\\E165"}.glyphicon-save:before{content:"\\E166"}.glyphicon-open:before{content:"\\E167"}.glyphicon-saved:before{content:"\\E168"}.glyphicon-import:before{content:"\\E169"}.glyphicon-export:before{content:"\\E170"}.glyphicon-send:before{content:"\\E171"}.glyphicon-floppy-disk:before{content:"\\E172"}.glyphicon-floppy-saved:before{content:"\\E173"}.glyphicon-floppy-remove:before{content:"\\E174"}.glyphicon-floppy-save:before{content:"\\E175"}.glyphicon-floppy-open:before{content:"\\E176"}.glyphicon-credit-card:before{content:"\\E177"}.glyphicon-transfer:before{content:"\\E178"}.glyphicon-cutlery:before{content:"\\E179"}.glyphicon-header:before{content:"\\E180"}.glyphicon-compressed:before{content:"\\E181"}.glyphicon-earphone:before{content:"\\E182"}.glyphicon-phone-alt:before{content:"\\E183"}.glyphicon-tower:before{content:"\\E184"}.glyphicon-stats:before{content:"\\E185"}.glyphicon-sd-video:before{content:"\\E186"}.glyphicon-hd-video:before{content:"\\E187"}.glyphicon-subtitles:before{content:"\\E188"}.glyphicon-sound-stereo:before{content:"\\E189"}.glyphicon-sound-dolby:before{content:"\\E190"}.glyphicon-sound-5-1:before{content:"\\E191"}.glyphicon-sound-6-1:before{content:"\\E192"}.glyphicon-sound-7-1:before{content:"\\E193"}.glyphicon-copyright-mark:before{content:"\\E194"}.glyphicon-registration-mark:before{content:"\\E195"}.glyphicon-cloud-download:before{content:"\\E197"}.glyphicon-cloud-upload:before{content:"\\E198"}.glyphicon-tree-conifer:before{content:"\\E199"}.glyphicon-tree-deciduous:before{content:"\\E200"}.glyphicon-cd:before{content:"\\E201"}.glyphicon-save-file:before{content:"\\E202"}.glyphicon-open-file:before{content:"\\E203"}.glyphicon-level-up:before{content:"\\E204"}.glyphicon-copy:before{content:"\\E205"}.glyphicon-paste:before{content:"\\E206"}.glyphicon-alert:before{content:"\\E209"}.glyphicon-equalizer:before{content:"\\E210"}.glyphicon-king:before{content:"\\E211"}.glyphicon-queen:before{content:"\\E212"}.glyphicon-pawn:before{content:"\\E213"}.glyphicon-bishop:before{content:"\\E214"}.glyphicon-knight:before{content:"\\E215"}.glyphicon-baby-formula:before{content:"\\E216"}.glyphicon-tent:before{content:"\\26FA"}.glyphicon-blackboard:before{content:"\\E218"}.glyphicon-bed:before{content:"\\E219"}.glyphicon-apple:before{content:"\\F8FF"}.glyphicon-erase:before{content:"\\E221"}.glyphicon-hourglass:before{content:"\\231B"}.glyphicon-lamp:before{content:"\\E223"}.glyphicon-duplicate:before{content:"\\E224"}.glyphicon-piggy-bank:before{content:"\\E225"}.glyphicon-scissors:before{content:"\\E226"}.glyphicon-bitcoin:before,.glyphicon-btc:before,.glyphicon-xbt:before{content:"\\E227"}.glyphicon-jpy:before,.glyphicon-yen:before{content:"\\A5"}.glyphicon-rub:before,.glyphicon-ruble:before{content:"\\20BD"}.glyphicon-scale:before{content:"\\E230"}.glyphicon-ice-lolly:before{content:"\\E231"}.glyphicon-ice-lolly-tasted:before{content:"\\E232"}.glyphicon-education:before{content:"\\E233"}.glyphicon-option-horizontal:before{content:"\\E234"}.glyphicon-option-vertical:before{content:"\\E235"}.glyphicon-menu-hamburger:before{content:"\\E236"}.glyphicon-modal-window:before{content:"\\E237"}.glyphicon-oil:before{content:"\\E238"}.glyphicon-grain:before{content:"\\E239"}.glyphicon-sunglasses:before{content:"\\E240"}.glyphicon-text-size:before{content:"\\E241"}.glyphicon-text-color:before{content:"\\E242"}.glyphicon-text-background:before{content:"\\E243"}.glyphicon-object-align-top:before{content:"\\E244"}.glyphicon-object-align-bottom:before{content:"\\E245"}.glyphicon-object-align-horizontal:before{content:"\\E246"}.glyphicon-object-align-left:before{content:"\\E247"}.glyphicon-object-align-vertical:before{content:"\\E248"}.glyphicon-object-align-right:before{content:"\\E249"}.glyphicon-triangle-right:before{content:"\\E250"}.glyphicon-triangle-left:before{content:"\\E251"}.glyphicon-triangle-bottom:before{content:"\\E252"}.glyphicon-triangle-top:before{content:"\\E253"}.glyphicon-console:before{content:"\\E254"}.glyphicon-superscript:before{content:"\\E255"}.glyphicon-subscript:before{content:"\\E256"}.glyphicon-menu-left:before{content:"\\E257"}.glyphicon-menu-right:before{content:"\\E258"}.glyphicon-menu-down:before{content:"\\E259"}.glyphicon-menu-up:before{content:"\\E260"}*,:after,:before{box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:transparent}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857;color:#333;background-color:#fff}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.img-responsive{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{padding:4px;line-height:1.42857;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;display:inline-block;max-width:100%;height:auto}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role=button]{cursor:pointer}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-weight:400;line-height:1;color:#777}.h1,.h2,.h3,h1,h2,h3{margin-top:20px;margin-bottom:10px}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small{font-size:65%}.h4,.h5,.h6,h4,h5,h6{margin-top:10px;margin-bottom:10px}.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-size:75%}.h1,h1{font-size:36px}.h2,h2{font-size:30px}.h3,h3{font-size:24px}.h4,h4{font-size:18px}.h5,h5{font-size:14px}.h6,h6{font-size:12px}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:16px;font-weight:300;line-height:1.4}@media (min-width:768px){.lead{font-size:21px}}.small,small{font-size:85%}.mark,mark{background-color:#fcf8e3;padding:.2em}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.text-nowrap{white-space:nowrap}.text-lowercase{text-transform:lowercase}.initialism,.text-uppercase{text-transform:uppercase}.text-capitalize{text-transform:capitalize}.text-muted{color:#777}.text-primary{color:#337ab7}a.text-primary:focus,a.text-primary:hover{color:#286090}.text-success{color:#3c763d}a.text-success:focus,a.text-success:hover{color:#2b542c}.text-info{color:#31708f}a.text-info:focus,a.text-info:hover{color:#245269}.text-warning{color:#8a6d3b}a.text-warning:focus,a.text-warning:hover{color:#66512c}.text-danger{color:#a94442}a.text-danger:focus,a.text-danger:hover{color:#843534}.bg-primary{color:#fff;background-color:#337ab7}a.bg-primary:focus,a.bg-primary:hover{background-color:#286090}.bg-success{background-color:#dff0d8}a.bg-success:focus,a.bg-success:hover{background-color:#c1e2b3}.bg-info{background-color:#d9edf7}a.bg-info:focus,a.bg-info:hover{background-color:#afd9ee}.bg-warning{background-color:#fcf8e3}a.bg-warning:focus,a.bg-warning:hover{background-color:#f7ecb5}.bg-danger{background-color:#f2dede}a.bg-danger:focus,a.bg-danger:hover{background-color:#e4b9b9}.page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}ol,ul{margin-top:0;margin-bottom:10px}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}.list-inline,.list-unstyled{padding-left:0;list-style:none}.list-inline{margin-left:-5px}.list-inline>li{display:inline-block;padding-left:5px;padding-right:5px}dl{margin-top:0;margin-bottom:20px}dd,dt{line-height:1.42857}dt{font-weight:700}dd{margin-left:0}.dl-horizontal dd:after,.dl-horizontal dd:before{content:" ";display:table}.dl-horizontal dd:after{clear:both}@media (min-width:768px){.dl-horizontal dt{float:left;width:160px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}}abbr[data-original-title],abbr[title]{cursor:help;border-bottom:1px dotted #777}.initialism{font-size:90%}blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}blockquote ol:last-child,blockquote p:last-child,blockquote ul:last-child{margin-bottom:0}blockquote .small,blockquote footer,blockquote small{display:block;font-size:80%;line-height:1.42857;color:#777}blockquote .small:before,blockquote footer:before,blockquote small:before{content:\'\\2014   \\A0\'}.blockquote-reverse,blockquote.pull-right{padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0;text-align:right}.blockquote-reverse .small:before,.blockquote-reverse footer:before,.blockquote-reverse small:before,blockquote.pull-right .small:before,blockquote.pull-right footer:before,blockquote.pull-right small:before{content:\'\'}.blockquote-reverse .small:after,.blockquote-reverse footer:after,.blockquote-reverse small:after,blockquote.pull-right .small:after,blockquote.pull-right footer:after,blockquote.pull-right small:after{content:\'\\A0   \\2014\'}address{margin-bottom:20px;font-style:normal;line-height:1.42857}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Courier New,monospace}code{color:#c7254e;background-color:#f9f2f4;border-radius:4px}code,kbd{padding:2px 4px;font-size:90%}kbd{color:#fff;background-color:#333;border-radius:3px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}kbd kbd{padding:0;font-size:100%;font-weight:700;box-shadow:none}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857;word-break:break-all;word-wrap:break-word;color:#333;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}.container{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.container:after,.container:before{content:" ";display:table}.container:after{clear:both}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.container-fluid:after,.container-fluid:before{content:" ";display:table}.container-fluid:after{clear:both}.row{margin-left:-15px;margin-right:-15px}.row:after,.row:before{content:" ";display:table}.row:after{clear:both}.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12,.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12,.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12,.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{position:relative;min-height:1px;padding-left:15px;padding-right:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-1{width:8.33333%}.col-xs-2{width:16.66667%}.col-xs-3{width:25%}.col-xs-4{width:33.33333%}.col-xs-5{width:41.66667%}.col-xs-6{width:50%}.col-xs-7{width:58.33333%}.col-xs-8{width:66.66667%}.col-xs-9{width:75%}.col-xs-10{width:83.33333%}.col-xs-11{width:91.66667%}.col-xs-12{width:100%}.col-xs-pull-0{right:auto}.col-xs-pull-1{right:8.33333%}.col-xs-pull-2{right:16.66667%}.col-xs-pull-3{right:25%}.col-xs-pull-4{right:33.33333%}.col-xs-pull-5{right:41.66667%}.col-xs-pull-6{right:50%}.col-xs-pull-7{right:58.33333%}.col-xs-pull-8{right:66.66667%}.col-xs-pull-9{right:75%}.col-xs-pull-10{right:83.33333%}.col-xs-pull-11{right:91.66667%}.col-xs-pull-12{right:100%}.col-xs-push-0{left:auto}.col-xs-push-1{left:8.33333%}.col-xs-push-2{left:16.66667%}.col-xs-push-3{left:25%}.col-xs-push-4{left:33.33333%}.col-xs-push-5{left:41.66667%}.col-xs-push-6{left:50%}.col-xs-push-7{left:58.33333%}.col-xs-push-8{left:66.66667%}.col-xs-push-9{left:75%}.col-xs-push-10{left:83.33333%}.col-xs-push-11{left:91.66667%}.col-xs-push-12{left:100%}.col-xs-offset-0{margin-left:0}.col-xs-offset-1{margin-left:8.33333%}.col-xs-offset-2{margin-left:16.66667%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-4{margin-left:33.33333%}.col-xs-offset-5{margin-left:41.66667%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-7{margin-left:58.33333%}.col-xs-offset-8{margin-left:66.66667%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-10{margin-left:83.33333%}.col-xs-offset-11{margin-left:91.66667%}.col-xs-offset-12{margin-left:100%}@media (min-width:768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-1{width:8.33333%}.col-sm-2{width:16.66667%}.col-sm-3{width:25%}.col-sm-4{width:33.33333%}.col-sm-5{width:41.66667%}.col-sm-6{width:50%}.col-sm-7{width:58.33333%}.col-sm-8{width:66.66667%}.col-sm-9{width:75%}.col-sm-10{width:83.33333%}.col-sm-11{width:91.66667%}.col-sm-12{width:100%}.col-sm-pull-0{right:auto}.col-sm-pull-1{right:8.33333%}.col-sm-pull-2{right:16.66667%}.col-sm-pull-3{right:25%}.col-sm-pull-4{right:33.33333%}.col-sm-pull-5{right:41.66667%}.col-sm-pull-6{right:50%}.col-sm-pull-7{right:58.33333%}.col-sm-pull-8{right:66.66667%}.col-sm-pull-9{right:75%}.col-sm-pull-10{right:83.33333%}.col-sm-pull-11{right:91.66667%}.col-sm-pull-12{right:100%}.col-sm-push-0{left:auto}.col-sm-push-1{left:8.33333%}.col-sm-push-2{left:16.66667%}.col-sm-push-3{left:25%}.col-sm-push-4{left:33.33333%}.col-sm-push-5{left:41.66667%}.col-sm-push-6{left:50%}.col-sm-push-7{left:58.33333%}.col-sm-push-8{left:66.66667%}.col-sm-push-9{left:75%}.col-sm-push-10{left:83.33333%}.col-sm-push-11{left:91.66667%}.col-sm-push-12{left:100%}.col-sm-offset-0{margin-left:0}.col-sm-offset-1{margin-left:8.33333%}.col-sm-offset-2{margin-left:16.66667%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-4{margin-left:33.33333%}.col-sm-offset-5{margin-left:41.66667%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-7{margin-left:58.33333%}.col-sm-offset-8{margin-left:66.66667%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-10{margin-left:83.33333%}.col-sm-offset-11{margin-left:91.66667%}.col-sm-offset-12{margin-left:100%}}@media (min-width:992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-1{width:8.33333%}.col-md-2{width:16.66667%}.col-md-3{width:25%}.col-md-4{width:33.33333%}.col-md-5{width:41.66667%}.col-md-6{width:50%}.col-md-7{width:58.33333%}.col-md-8{width:66.66667%}.col-md-9{width:75%}.col-md-10{width:83.33333%}.col-md-11{width:91.66667%}.col-md-12{width:100%}.col-md-pull-0{right:auto}.col-md-pull-1{right:8.33333%}.col-md-pull-2{right:16.66667%}.col-md-pull-3{right:25%}.col-md-pull-4{right:33.33333%}.col-md-pull-5{right:41.66667%}.col-md-pull-6{right:50%}.col-md-pull-7{right:58.33333%}.col-md-pull-8{right:66.66667%}.col-md-pull-9{right:75%}.col-md-pull-10{right:83.33333%}.col-md-pull-11{right:91.66667%}.col-md-pull-12{right:100%}.col-md-push-0{left:auto}.col-md-push-1{left:8.33333%}.col-md-push-2{left:16.66667%}.col-md-push-3{left:25%}.col-md-push-4{left:33.33333%}.col-md-push-5{left:41.66667%}.col-md-push-6{left:50%}.col-md-push-7{left:58.33333%}.col-md-push-8{left:66.66667%}.col-md-push-9{left:75%}.col-md-push-10{left:83.33333%}.col-md-push-11{left:91.66667%}.col-md-push-12{left:100%}.col-md-offset-0{margin-left:0}.col-md-offset-1{margin-left:8.33333%}.col-md-offset-2{margin-left:16.66667%}.col-md-offset-3{margin-left:25%}.col-md-offset-4{margin-left:33.33333%}.col-md-offset-5{margin-left:41.66667%}.col-md-offset-6{margin-left:50%}.col-md-offset-7{margin-left:58.33333%}.col-md-offset-8{margin-left:66.66667%}.col-md-offset-9{margin-left:75%}.col-md-offset-10{margin-left:83.33333%}.col-md-offset-11{margin-left:91.66667%}.col-md-offset-12{margin-left:100%}}@media (min-width:1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-1{width:8.33333%}.col-lg-2{width:16.66667%}.col-lg-3{width:25%}.col-lg-4{width:33.33333%}.col-lg-5{width:41.66667%}.col-lg-6{width:50%}.col-lg-7{width:58.33333%}.col-lg-8{width:66.66667%}.col-lg-9{width:75%}.col-lg-10{width:83.33333%}.col-lg-11{width:91.66667%}.col-lg-12{width:100%}.col-lg-pull-0{right:auto}.col-lg-pull-1{right:8.33333%}.col-lg-pull-2{right:16.66667%}.col-lg-pull-3{right:25%}.col-lg-pull-4{right:33.33333%}.col-lg-pull-5{right:41.66667%}.col-lg-pull-6{right:50%}.col-lg-pull-7{right:58.33333%}.col-lg-pull-8{right:66.66667%}.col-lg-pull-9{right:75%}.col-lg-pull-10{right:83.33333%}.col-lg-pull-11{right:91.66667%}.col-lg-pull-12{right:100%}.col-lg-push-0{left:auto}.col-lg-push-1{left:8.33333%}.col-lg-push-2{left:16.66667%}.col-lg-push-3{left:25%}.col-lg-push-4{left:33.33333%}.col-lg-push-5{left:41.66667%}.col-lg-push-6{left:50%}.col-lg-push-7{left:58.33333%}.col-lg-push-8{left:66.66667%}.col-lg-push-9{left:75%}.col-lg-push-10{left:83.33333%}.col-lg-push-11{left:91.66667%}.col-lg-push-12{left:100%}.col-lg-offset-0{margin-left:0}.col-lg-offset-1{margin-left:8.33333%}.col-lg-offset-2{margin-left:16.66667%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-4{margin-left:33.33333%}.col-lg-offset-5{margin-left:41.66667%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-7{margin-left:58.33333%}.col-lg-offset-8{margin-left:66.66667%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-10{margin-left:83.33333%}.col-lg-offset-11{margin-left:91.66667%}.col-lg-offset-12{margin-left:100%}}table{background-color:transparent}caption{padding-top:8px;padding-bottom:8px;color:#777}caption,th{text-align:left}.table{width:100%;max-width:100%;margin-bottom:20px}.table>tbody>tr>td,.table>tbody>tr>th,.table>tfoot>tr>td,.table>tfoot>tr>th,.table>thead>tr>td,.table>thead>tr>th{padding:8px;line-height:1.42857;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>td,.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>td,.table>thead:first-child>tr:first-child>th{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>tbody>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>thead>tr>th{padding:5px}.table-bordered,.table-bordered>tbody>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border:1px solid #ddd}.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border-bottom-width:2px}.table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.table-hover>tbody>tr:hover{background-color:#f5f5f5}table col[class*=col-]{position:static;float:none;display:table-column}table td[class*=col-],table th[class*=col-]{position:static;float:none;display:table-cell}.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active{background-color:#f5f5f5}.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover{background-color:#e8e8e8}.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success{background-color:#dff0d8}.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover{background-color:#d0e9c6}.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>thead>tr>td.info,.table>thead>tr>th.info{background-color:#d9edf7}.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr.info:hover>th,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover{background-color:#c4e3f3}.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>thead>tr>td.warning,.table>thead>tr>th.warning{background-color:#fcf8e3}.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover{background-color:#faf2cc}.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>thead>tr>td.danger,.table>thead>tr>th.danger{background-color:#f2dede}.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover{background-color:#ebcccc}.table-responsive{overflow-x:auto;min-height:.01%}@media screen and (max-width:767px){.table-responsive{width:100%;margin-bottom:15px;overflow-y:hidden;-ms-overflow-style:-ms-autohiding-scrollbar;border:1px solid #ddd}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tfoot>tr>td,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>thead>tr>th{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>th{border-bottom:0}}fieldset{margin:0;min-width:0}fieldset,legend{padding:0;border:0}legend{display:block;width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border-bottom:1px solid #e5e5e5}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}input[type=search]{box-sizing:border-box}input[type=checkbox],input[type=radio]{margin:4px 0 0;margin-top:1px\\9;line-height:normal}input[type=file]{display:block}input[type=range]{display:block;width:100%}select[multiple],select[size]{height:auto}input[type=checkbox]:focus,input[type=file]:focus,input[type=radio]:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}output{padding-top:7px}.form-control,output{display:block;font-size:14px;line-height:1.42857;color:#555}.form-control{width:100%;height:34px;padding:6px 12px;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control::-ms-expand{border:0;background-color:transparent}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}input[type=search]{-webkit-appearance:none}@media screen and (-webkit-min-device-pixel-ratio:0){input[type=date].form-control,input[type=datetime-local].form-control,input[type=month].form-control,input[type=time].form-control{line-height:34px}.input-group-sm>.input-group-btn>input[type=date].btn,.input-group-sm>.input-group-btn>input[type=datetime-local].btn,.input-group-sm>.input-group-btn>input[type=month].btn,.input-group-sm>.input-group-btn>input[type=time].btn,.input-group-sm>input[type=date].form-control,.input-group-sm>input[type=date].input-group-addon,.input-group-sm>input[type=datetime-local].form-control,.input-group-sm>input[type=datetime-local].input-group-addon,.input-group-sm>input[type=month].form-control,.input-group-sm>input[type=month].input-group-addon,.input-group-sm>input[type=time].form-control,.input-group-sm>input[type=time].input-group-addon,.input-group-sm input[type=date],.input-group-sm input[type=datetime-local],.input-group-sm input[type=month],.input-group-sm input[type=time],input[type=date].input-sm,input[type=datetime-local].input-sm,input[type=month].input-sm,input[type=time].input-sm{line-height:30px}.input-group-lg>.input-group-btn>input[type=date].btn,.input-group-lg>.input-group-btn>input[type=datetime-local].btn,.input-group-lg>.input-group-btn>input[type=month].btn,.input-group-lg>.input-group-btn>input[type=time].btn,.input-group-lg>input[type=date].form-control,.input-group-lg>input[type=date].input-group-addon,.input-group-lg>input[type=datetime-local].form-control,.input-group-lg>input[type=datetime-local].input-group-addon,.input-group-lg>input[type=month].form-control,.input-group-lg>input[type=month].input-group-addon,.input-group-lg>input[type=time].form-control,.input-group-lg>input[type=time].input-group-addon,.input-group-lg input[type=date],.input-group-lg input[type=datetime-local],.input-group-lg input[type=month],.input-group-lg input[type=time],input[type=date].input-lg,input[type=datetime-local].input-lg,input[type=month].input-lg,input[type=time].input-lg{line-height:46px}}.form-group{margin-bottom:15px}.checkbox,.radio{position:relative;display:block;margin-top:10px;margin-bottom:10px}.checkbox label,.radio label{min-height:20px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.checkbox-inline input[type=checkbox],.checkbox input[type=checkbox],.radio-inline input[type=radio],.radio input[type=radio]{position:absolute;margin-left:-20px;margin-top:4px\\9}.checkbox+.checkbox,.radio+.radio{margin-top:-5px}.checkbox-inline,.radio-inline{position:relative;display:inline-block;padding-left:20px;margin-bottom:0;vertical-align:middle;font-weight:400;cursor:pointer}.checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}.checkbox-inline.disabled,.checkbox.disabled label,.radio-inline.disabled,.radio.disabled label,fieldset[disabled] .checkbox-inline,fieldset[disabled] .checkbox label,fieldset[disabled] .radio-inline,fieldset[disabled] .radio label,fieldset[disabled] input[type=checkbox],fieldset[disabled] input[type=radio],input[type=checkbox].disabled,input[type=checkbox][disabled],input[type=radio].disabled,input[type=radio][disabled]{cursor:not-allowed}.form-control-static{padding-top:7px;padding-bottom:7px;margin-bottom:0;min-height:34px}.form-control-static.input-lg,.form-control-static.input-sm,.input-group-lg>.form-control-static.form-control,.input-group-lg>.form-control-static.input-group-addon,.input-group-lg>.input-group-btn>.form-control-static.btn,.input-group-sm>.form-control-static.form-control,.input-group-sm>.form-control-static.input-group-addon,.input-group-sm>.input-group-btn>.form-control-static.btn{padding-left:0;padding-right:0}.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn,.input-sm{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.input-group-sm>.input-group-btn>select.btn,.input-group-sm>select.form-control,.input-group-sm>select.input-group-addon,select.input-sm{height:30px;line-height:30px}.input-group-sm>.input-group-btn>select[multiple].btn,.input-group-sm>.input-group-btn>textarea.btn,.input-group-sm>select[multiple].form-control,.input-group-sm>select[multiple].input-group-addon,.input-group-sm>textarea.form-control,.input-group-sm>textarea.input-group-addon,select[multiple].input-sm,textarea.input-sm{height:auto}.form-group-sm .form-control{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.form-group-sm select.form-control{height:30px;line-height:30px}.form-group-sm select[multiple].form-control,.form-group-sm textarea.form-control{height:auto}.form-group-sm .form-control-static{height:30px;min-height:32px;padding:6px 10px;font-size:12px;line-height:1.5}.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn,.input-lg{height:46px;padding:10px 16px;font-size:18px;line-height:1.33333;border-radius:6px}.input-group-lg>.input-group-btn>select.btn,.input-group-lg>select.form-control,.input-group-lg>select.input-group-addon,select.input-lg{height:46px;line-height:46px}.input-group-lg>.input-group-btn>select[multiple].btn,.input-group-lg>.input-group-btn>textarea.btn,.input-group-lg>select[multiple].form-control,.input-group-lg>select[multiple].input-group-addon,.input-group-lg>textarea.form-control,.input-group-lg>textarea.input-group-addon,select[multiple].input-lg,textarea.input-lg{height:auto}.form-group-lg .form-control{height:46px;padding:10px 16px;font-size:18px;line-height:1.33333;border-radius:6px}.form-group-lg select.form-control{height:46px;line-height:46px}.form-group-lg select[multiple].form-control,.form-group-lg textarea.form-control{height:auto}.form-group-lg .form-control-static{height:46px;min-height:38px;padding:11px 16px;font-size:18px;line-height:1.33333}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center;pointer-events:none}.form-group-lg .form-control+.form-control-feedback,.input-group-lg+.form-control-feedback,.input-group-lg>.form-control+.form-control-feedback,.input-group-lg>.input-group-addon+.form-control-feedback,.input-group-lg>.input-group-btn>.btn+.form-control-feedback,.input-lg+.form-control-feedback{width:46px;height:46px;line-height:46px}.form-group-sm .form-control+.form-control-feedback,.input-group-sm+.form-control-feedback,.input-group-sm>.form-control+.form-control-feedback,.input-group-sm>.input-group-addon+.form-control-feedback,.input-group-sm>.input-group-btn>.btn+.form-control-feedback,.input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-success .checkbox,.has-success .checkbox-inline,.has-success.checkbox-inline label,.has-success.checkbox label,.has-success .control-label,.has-success .help-block,.has-success .radio,.has-success .radio-inline,.has-success.radio-inline label,.has-success.radio label{color:#3c763d}.has-success .form-control{border-color:#3c763d;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-success .form-control:focus{border-color:#2b542c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;border-color:#3c763d;background-color:#dff0d8}.has-success .form-control-feedback{color:#3c763d}.has-warning .checkbox,.has-warning .checkbox-inline,.has-warning.checkbox-inline label,.has-warning.checkbox label,.has-warning .control-label,.has-warning .help-block,.has-warning .radio,.has-warning .radio-inline,.has-warning.radio-inline label,.has-warning.radio label{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-warning .form-control:focus{border-color:#66512c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;border-color:#8a6d3b;background-color:#fcf8e3}.has-warning .form-control-feedback{color:#8a6d3b}.has-error .checkbox,.has-error .checkbox-inline,.has-error.checkbox-inline label,.has-error.checkbox label,.has-error .control-label,.has-error .help-block,.has-error .radio,.has-error .radio-inline,.has-error.radio-inline label,.has-error.radio label{color:#a94442}.has-error .form-control{border-color:#a94442;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .form-control:focus{border-color:#843534;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;border-color:#a94442;background-color:#f2dede}.has-error .form-control-feedback{color:#a94442}.has-feedback label~.form-control-feedback{top:25px}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}@media (min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .form-control-static{display:inline-block}.form-inline .input-group{display:inline-table;vertical-align:middle}.form-inline .input-group .form-control,.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .control-label{margin-bottom:0;vertical-align:middle}.form-inline .checkbox,.form-inline .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.form-inline .checkbox label,.form-inline .radio label{padding-left:0}.form-inline .checkbox input[type=checkbox],.form-inline .radio input[type=radio]{position:relative;margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}}.form-horizontal .checkbox,.form-horizontal .checkbox-inline,.form-horizontal .radio,.form-horizontal .radio-inline{margin-top:0;margin-bottom:0;padding-top:7px}.form-horizontal .checkbox,.form-horizontal .radio{min-height:27px}.form-horizontal .form-group{margin-left:-15px;margin-right:-15px}.form-horizontal .form-group:after,.form-horizontal .form-group:before{content:" ";display:table}.form-horizontal .form-group:after{clear:both}@media (min-width:768px){.form-horizontal .control-label{text-align:right;margin-bottom:0;padding-top:7px}}.form-horizontal .has-feedback .form-control-feedback{right:15px}@media (min-width:768px){.form-horizontal .form-group-lg .control-label{padding-top:11px;font-size:18px}}@media (min-width:768px){.form-horizontal .form-group-sm .control-label{padding-top:6px;font-size:12px}}.btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{outline:0;background-image:none;box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;opacity:.65;filter:alpha(opacity=65);box-shadow:none}a.btn.disabled,fieldset[disabled] a.btn{pointer-events:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default.focus,.btn-default:focus{color:#333;background-color:#e6e6e6;border-color:#8c8c8c}.btn-default.active,.btn-default:active,.btn-default:hover,.open>.btn-default.dropdown-toggle{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default.active.focus,.btn-default.active:focus,.btn-default.active:hover,.btn-default:active.focus,.btn-default:active:focus,.btn-default:active:hover,.open>.btn-default.dropdown-toggle.focus,.open>.btn-default.dropdown-toggle:focus,.open>.btn-default.dropdown-toggle:hover{color:#333;background-color:#d4d4d4;border-color:#8c8c8c}.btn-default.active,.btn-default:active,.open>.btn-default.dropdown-toggle{background-image:none}.btn-default.disabled.focus,.btn-default.disabled:focus,.btn-default.disabled:hover,.btn-default[disabled].focus,.btn-default[disabled]:focus,.btn-default[disabled]:hover,fieldset[disabled] .btn-default.focus,fieldset[disabled] .btn-default:focus,fieldset[disabled] .btn-default:hover{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#333}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.btn-primary.focus,.btn-primary:focus{color:#fff;background-color:#286090;border-color:#122b40}.btn-primary.active,.btn-primary:active,.btn-primary:hover,.open>.btn-primary.dropdown-toggle{color:#fff;background-color:#286090;border-color:#204d74}.btn-primary.active.focus,.btn-primary.active:focus,.btn-primary.active:hover,.btn-primary:active.focus,.btn-primary:active:focus,.btn-primary:active:hover,.open>.btn-primary.dropdown-toggle.focus,.open>.btn-primary.dropdown-toggle:focus,.open>.btn-primary.dropdown-toggle:hover{color:#fff;background-color:#204d74;border-color:#122b40}.btn-primary.active,.btn-primary:active,.open>.btn-primary.dropdown-toggle{background-image:none}.btn-primary.disabled.focus,.btn-primary.disabled:focus,.btn-primary.disabled:hover,.btn-primary[disabled].focus,.btn-primary[disabled]:focus,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary.focus,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary:hover{background-color:#337ab7;border-color:#2e6da4}.btn-primary .badge{color:#337ab7;background-color:#fff}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success.focus,.btn-success:focus{color:#fff;background-color:#449d44;border-color:#255625}.btn-success.active,.btn-success:active,.btn-success:hover,.open>.btn-success.dropdown-toggle{color:#fff;background-color:#449d44;border-color:#398439}.btn-success.active.focus,.btn-success.active:focus,.btn-success.active:hover,.btn-success:active.focus,.btn-success:active:focus,.btn-success:active:hover,.open>.btn-success.dropdown-toggle.focus,.open>.btn-success.dropdown-toggle:focus,.open>.btn-success.dropdown-toggle:hover{color:#fff;background-color:#398439;border-color:#255625}.btn-success.active,.btn-success:active,.open>.btn-success.dropdown-toggle{background-image:none}.btn-success.disabled.focus,.btn-success.disabled:focus,.btn-success.disabled:hover,.btn-success[disabled].focus,.btn-success[disabled]:focus,.btn-success[disabled]:hover,fieldset[disabled] .btn-success.focus,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success:hover{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info.focus,.btn-info:focus{color:#fff;background-color:#31b0d5;border-color:#1b6d85}.btn-info.active,.btn-info:active,.btn-info:hover,.open>.btn-info.dropdown-toggle{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info.active.focus,.btn-info.active:focus,.btn-info.active:hover,.btn-info:active.focus,.btn-info:active:focus,.btn-info:active:hover,.open>.btn-info.dropdown-toggle.focus,.open>.btn-info.dropdown-toggle:focus,.open>.btn-info.dropdown-toggle:hover{color:#fff;background-color:#269abc;border-color:#1b6d85}.btn-info.active,.btn-info:active,.open>.btn-info.dropdown-toggle{background-image:none}.btn-info.disabled.focus,.btn-info.disabled:focus,.btn-info.disabled:hover,.btn-info[disabled].focus,.btn-info[disabled]:focus,.btn-info[disabled]:hover,fieldset[disabled] .btn-info.focus,fieldset[disabled] .btn-info:focus,fieldset[disabled] .btn-info:hover{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning.focus,.btn-warning:focus{color:#fff;background-color:#ec971f;border-color:#985f0d}.btn-warning.active,.btn-warning:active,.btn-warning:hover,.open>.btn-warning.dropdown-toggle{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning.active.focus,.btn-warning.active:focus,.btn-warning.active:hover,.btn-warning:active.focus,.btn-warning:active:focus,.btn-warning:active:hover,.open>.btn-warning.dropdown-toggle.focus,.open>.btn-warning.dropdown-toggle:focus,.open>.btn-warning.dropdown-toggle:hover{color:#fff;background-color:#d58512;border-color:#985f0d}.btn-warning.active,.btn-warning:active,.open>.btn-warning.dropdown-toggle{background-image:none}.btn-warning.disabled.focus,.btn-warning.disabled:focus,.btn-warning.disabled:hover,.btn-warning[disabled].focus,.btn-warning[disabled]:focus,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning.focus,fieldset[disabled] .btn-warning:focus,fieldset[disabled] .btn-warning:hover{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger.focus,.btn-danger:focus{color:#fff;background-color:#c9302c;border-color:#761c19}.btn-danger.active,.btn-danger:active,.btn-danger:hover,.open>.btn-danger.dropdown-toggle{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger.active.focus,.btn-danger.active:focus,.btn-danger.active:hover,.btn-danger:active.focus,.btn-danger:active:focus,.btn-danger:active:hover,.open>.btn-danger.dropdown-toggle.focus,.open>.btn-danger.dropdown-toggle:focus,.open>.btn-danger.dropdown-toggle:hover{color:#fff;background-color:#ac2925;border-color:#761c19}.btn-danger.active,.btn-danger:active,.open>.btn-danger.dropdown-toggle{background-image:none}.btn-danger.disabled.focus,.btn-danger.disabled:focus,.btn-danger.disabled:hover,.btn-danger[disabled].focus,.btn-danger[disabled]:focus,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger.focus,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger:hover{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-link{color:#337ab7;font-weight:400;border-radius:0}.btn-link,.btn-link.active,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;box-shadow:none}.btn-link,.btn-link:active,.btn-link:focus,.btn-link:hover{border-color:transparent}.btn-link:focus,.btn-link:hover{color:#23527c;text-decoration:underline;background-color:transparent}.btn-link[disabled]:focus,.btn-link[disabled]:hover,fieldset[disabled] .btn-link:focus,fieldset[disabled] .btn-link:hover{color:#777;text-decoration:none}.btn-group-lg>.btn,.btn-lg{padding:10px 16px;font-size:18px;line-height:1.33333;border-radius:6px}.btn-group-sm>.btn,.btn-sm{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-xs>.btn,.btn-xs{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:5px}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.fade{opacity:0;-webkit-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}tr.collapse.in{display:table-row}tbody.collapse.in{display:table-row-group}.collapsing{position:relative;height:0;overflow:hidden;-webkit-transition-property:height,visibility;transition-property:height,visibility;-webkit-transition-duration:.35s;transition-duration:.35s;-webkit-transition-timing-function:ease;transition-timing-function:ease}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px dashed;border-top:4px solid\\9;border-right:4px solid transparent;border-left:4px solid transparent}.dropdown,.dropup{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;font-size:14px;text-align:left;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;box-shadow:0 6px 12px rgba(0,0,0,.175);background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.42857;color:#333;white-space:nowrap}.dropdown-menu>li>a:focus,.dropdown-menu>li>a:hover{text-decoration:none;color:#262626;background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:focus,.dropdown-menu>.active>a:hover{color:#fff;text-decoration:none;outline:0;background-color:#337ab7}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{color:#777}.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);cursor:not-allowed}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-menu-right{left:auto;right:0}.dropdown-menu-left{left:0;right:auto}.dropdown-header{display:block;padding:3px 20px;font-size:12px;line-height:1.42857;color:#777;white-space:nowrap}.dropdown-backdrop{position:fixed;left:0;right:0;bottom:0;top:0;z-index:990}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px dashed;border-bottom:4px solid\\9;content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:2px}@media (min-width:768px){.navbar-right .dropdown-menu{right:0;left:auto}.navbar-right .dropdown-menu-left{left:0;right:auto}}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;float:left}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:2}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar{margin-left:-5px}.btn-toolbar:after,.btn-toolbar:before{content:" ";display:table}.btn-toolbar:after{clear:both}.btn-toolbar .btn,.btn-toolbar .btn-group,.btn-toolbar .input-group{float:left}.btn-toolbar>.btn,.btn-toolbar>.btn-group,.btn-toolbar>.input-group{margin-left:5px}.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.btn-group>.btn:first-child{margin-left:0}.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-top-right-radius:0}.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0}.btn-group>.btn-group{float:left}.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-top-right-radius:0}.btn-group>.btn-group:last-child:not(:first-child)>.btn:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{padding-left:8px;padding-right:8px}.btn-group-lg.btn-group>.btn+.dropdown-toggle,.btn-group>.btn-lg+.dropdown-toggle{padding-left:12px;padding-right:12px}.btn-group.open .dropdown-toggle{box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn-group.open .dropdown-toggle.btn-link{box-shadow:none}.btn .caret{margin-left:0}.btn-group-lg>.btn .caret,.btn-lg .caret{border-width:5px 5px 0;border-bottom-width:0}.dropup .btn-group-lg>.btn .caret,.dropup .btn-lg .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group,.btn-group-vertical>.btn-group>.btn{display:block;float:none;width:100%;max-width:100%}.btn-group-vertical>.btn-group:after,.btn-group-vertical>.btn-group:before{content:" ";display:table}.btn-group-vertical>.btn-group:after{clear:both}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child){border-radius:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn:last-child:not(:first-child){border-top-right-radius:0;border-top-left-radius:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group-vertical>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child:not(:first-child)>.btn:first-child{border-top-right-radius:0;border-top-left-radius:0}.btn-group-justified{display:table;width:100%;table-layout:fixed;border-collapse:separate}.btn-group-justified>.btn,.btn-group-justified>.btn-group{float:none;display:table-cell;width:1%}.btn-group-justified>.btn-group .btn{width:100%}.btn-group-justified>.btn-group .dropdown-menu{left:auto}[data-toggle=buttons]>.btn-group>.btn input[type=checkbox],[data-toggle=buttons]>.btn-group>.btn input[type=radio],[data-toggle=buttons]>.btn input[type=checkbox],[data-toggle=buttons]>.btn input[type=radio]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*=col-]{float:none;padding-left:0;padding-right:0}.input-group .form-control{position:relative;z-index:2;float:left;width:100%;margin-bottom:0}.input-group .form-control:focus{z-index:3}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon.input-sm,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.input-group-addon.btn{padding:5px 10px;font-size:12px;border-radius:3px}.input-group-addon.input-lg,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.input-group-addon.btn{padding:10px 16px;font-size:18px;border-radius:6px}.input-group-addon input[type=checkbox],.input-group-addon input[type=radio]{margin-top:0}.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn-group:not(:last-child)>.btn,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group .form-control:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group-addon:last-child,.input-group-btn:first-child>.btn-group:not(:first-child)>.btn,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group .form-control:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{font-size:0;white-space:nowrap}.input-group-btn,.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:active,.input-group-btn>.btn:focus,.input-group-btn>.btn:hover{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{z-index:2;margin-left:-1px}.nav{margin-bottom:0;padding-left:0;list-style:none}.nav:after,.nav:before{content:" ";display:table}.nav:after{clear:both}.nav>li,.nav>li>a{position:relative;display:block}.nav>li>a{padding:10px 15px}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#777}.nav>li.disabled>a:focus,.nav>li.disabled>a:hover{color:#777;text-decoration:none;background-color:transparent;cursor:not-allowed}.nav .open>a,.nav .open>a:focus,.nav .open>a:hover{background-color:#eee;border-color:#337ab7}.nav .nav-divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.42857;border:1px solid transparent;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:focus,.nav-tabs>li.active>a:hover{color:#555;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent;cursor:default}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:focus,.nav-pills>li.active>a:hover{color:#fff;background-color:#337ab7}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified,.nav-tabs.nav-justified{width:100%}.nav-justified>li,.nav-tabs.nav-justified>li{float:none}.nav-justified>li>a,.nav-tabs.nav-justified>li>a{text-align:center;margin-bottom:5px}.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media (min-width:768px){.nav-justified>li,.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a,.nav-tabs.nav-justified>li>a{margin-bottom:0}}.nav-tabs-justified,.nav-tabs.nav-justified{border-bottom:0}.nav-tabs-justified>li>a,.nav-tabs.nav-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs-justified>li>a,.nav-tabs.nav-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-right-radius:0;border-top-left-radius:0}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}.navbar:after,.navbar:before{content:" ";display:table}.navbar:after{clear:both}@media (min-width:768px){.navbar{border-radius:4px}}.navbar-header:after,.navbar-header:before{content:" ";display:table}.navbar-header:after{clear:both}@media (min-width:768px){.navbar-header{float:left}}.navbar-collapse{overflow-x:visible;padding-right:15px;padding-left:15px;border-top:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1);-webkit-overflow-scrolling:touch}.navbar-collapse:after,.navbar-collapse:before{content:" ";display:table}.navbar-collapse:after{clear:both}.navbar-collapse.in{overflow-y:auto}@media (min-width:768px){.navbar-collapse{width:auto;border-top:0;box-shadow:none}.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse{padding-left:0;padding-right:0}}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:340px}@media (max-device-width:480px) and (orientation:landscape){.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:200px}}.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:-15px;margin-left:-15px}@media (min-width:768px){.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}}.navbar-static-top{z-index:1000;border-width:0 0 1px}@media (min-width:768px){.navbar-static-top{border-radius:0}}.navbar-fixed-bottom,.navbar-fixed-top{position:fixed;right:0;left:0;z-index:1030}@media (min-width:768px){.navbar-fixed-bottom,.navbar-fixed-top{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;padding:15px;font-size:18px;line-height:20px;height:50px}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-brand>img{display:block}@media (min-width:768px){.navbar>.container-fluid .navbar-brand,.navbar>.container .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;margin-right:15px;padding:9px 10px;margin-top:8px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media (max-width:767px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;box-shadow:none}.navbar-nav .open .dropdown-menu .dropdown-header,.navbar-nav .open .dropdown-menu>li>a{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:focus,.navbar-nav .open .dropdown-menu>li>a:hover{background-image:none}}@media (min-width:768px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}.navbar-form{margin:8px -15px;padding:10px 15px;border-top:1px solid transparent;border-bottom:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1),0 1px 0 hsla(0,0%,100%,.1)}@media (min-width:768px){.navbar-form .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block;width:auto;vertical-align:middle}.navbar-form .form-control-static{display:inline-block}.navbar-form .input-group{display:inline-table;vertical-align:middle}.navbar-form .input-group .form-control,.navbar-form .input-group .input-group-addon,.navbar-form .input-group .input-group-btn{width:auto}.navbar-form .input-group>.form-control{width:100%}.navbar-form .control-label{margin-bottom:0;vertical-align:middle}.navbar-form .checkbox,.navbar-form .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.navbar-form .checkbox label,.navbar-form .radio label{padding-left:0}.navbar-form .checkbox input[type=checkbox],.navbar-form .radio input[type=radio]{position:relative;margin-left:0}.navbar-form .has-feedback .form-control-feedback{top:0}}@media (max-width:767px){.navbar-form .form-group{margin-bottom:5px}.navbar-form .form-group:last-child{margin-bottom:0}}@media (min-width:768px){.navbar-form{width:auto;border:0;margin-left:0;margin-right:0;padding-top:0;padding-bottom:0;box-shadow:none}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-right-radius:0;border-top-left-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.navbar-btn{margin-top:8px;margin-bottom:8px}.btn-group-sm>.navbar-btn.btn,.navbar-btn.btn-sm{margin-top:10px;margin-bottom:10px}.btn-group-xs>.navbar-btn.btn,.navbar-btn.btn-xs{margin-top:14px;margin-bottom:14px}.navbar-text{margin-top:15px;margin-bottom:15px}@media (min-width:768px){.navbar-text{float:left;margin-left:15px;margin-right:15px}}@media (min-width:768px){.navbar-left{float:left!important}.navbar-right{float:right!important;margin-right:-15px}.navbar-right~.navbar-right{margin-right:0}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:focus,.navbar-default .navbar-brand:hover{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-nav>li>a,.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a:focus,.navbar-default .navbar-nav>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:focus,.navbar-default .navbar-nav>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:focus,.navbar-default .navbar-nav>.disabled>a:hover{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:focus,.navbar-default .navbar-nav>.open>a:hover{background-color:#e7e7e7;color:#555}@media (max-width:767px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-default .btn-link{color:#777}.navbar-default .btn-link:focus,.navbar-default .btn-link:hover{color:#333}.navbar-default .btn-link[disabled]:focus,.navbar-default .btn-link[disabled]:hover,fieldset[disabled] .navbar-default .btn-link:focus,fieldset[disabled] .navbar-default .btn-link:hover{color:#ccc}.navbar-inverse{background-color:#222;border-color:#090909}.navbar-inverse .navbar-brand{color:#9d9d9d}.navbar-inverse .navbar-brand:focus,.navbar-inverse .navbar-brand:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>li>a,.navbar-inverse .navbar-text{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a:focus,.navbar-inverse .navbar-nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:focus,.navbar-inverse .navbar-nav>.active>a:hover{color:#fff;background-color:#090909}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:focus,.navbar-inverse .navbar-nav>.disabled>a:hover{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:focus,.navbar-inverse .navbar-toggle:hover{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:focus,.navbar-inverse .navbar-nav>.open>a:hover{background-color:#090909;color:#fff}@media (max-width:767px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover{color:#fff;background-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#9d9d9d}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .btn-link{color:#9d9d9d}.navbar-inverse .btn-link:focus,.navbar-inverse .btn-link:hover{color:#fff}.navbar-inverse .btn-link[disabled]:focus,.navbar-inverse .btn-link[disabled]:hover,fieldset[disabled] .navbar-inverse .btn-link:focus,fieldset[disabled] .navbar-inverse .btn-link:hover{color:#444}.breadcrumb{padding:8px 15px;margin-bottom:20px;list-style:none;background-color:#f5f5f5;border-radius:4px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{content:"/\\A0";padding:0 5px;color:#ccc}.breadcrumb>.active{color:#777}.pagination{display:inline-block;padding-left:0;margin:20px 0;border-radius:4px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;line-height:1.42857;text-decoration:none;color:#337ab7;background-color:#fff;border:1px solid #ddd;margin-left:-1px}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:4px;border-top-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-bottom-right-radius:4px;border-top-right-radius:4px}.pagination>li>a:focus,.pagination>li>a:hover,.pagination>li>span:focus,.pagination>li>span:hover{z-index:2;color:#23527c;background-color:#eee;border-color:#ddd}.pagination>.active>a,.pagination>.active>a:focus,.pagination>.active>a:hover,.pagination>.active>span,.pagination>.active>span:focus,.pagination>.active>span:hover{z-index:3;color:#fff;background-color:#337ab7;border-color:#337ab7;cursor:default}.pagination>.disabled>a,.pagination>.disabled>a:focus,.pagination>.disabled>a:hover,.pagination>.disabled>span,.pagination>.disabled>span:focus,.pagination>.disabled>span:hover{color:#777;background-color:#fff;border-color:#ddd;cursor:not-allowed}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px;line-height:1.33333}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-bottom-left-radius:6px;border-top-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-bottom-right-radius:6px;border-top-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px;line-height:1.5}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-bottom-left-radius:3px;border-top-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-bottom-right-radius:3px;border-top-right-radius:3px}.pager{padding-left:0;margin:20px 0;list-style:none;text-align:center}.pager:after,.pager:before{content:" ";display:table}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:focus,.pager li>a:hover{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:focus,.pager .disabled>a:hover,.pager .disabled>span{color:#777;background-color:#fff;cursor:not-allowed}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.label:empty{display:none}.btn .label{position:relative;top:-1px}a.label:focus,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}.label-default{background-color:#777}.label-default[href]:focus,.label-default[href]:hover{background-color:#5e5e5e}.label-primary{background-color:#337ab7}.label-primary[href]:focus,.label-primary[href]:hover{background-color:#286090}.label-success{background-color:#5cb85c}.label-success[href]:focus,.label-success[href]:hover{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:focus,.label-info[href]:hover{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:focus,.label-warning[href]:hover{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:focus,.label-danger[href]:hover{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;color:#fff;line-height:1;vertical-align:middle;white-space:nowrap;text-align:center;background-color:#777;border-radius:10px}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.btn-group-xs>.btn .badge,.btn-xs .badge{top:0;padding:1px 5px}.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#337ab7;background-color:#fff}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}.nav-pills>li>a>.badge{margin-left:3px}a.badge:focus,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}.jumbotron{padding-top:30px;padding-bottom:30px;margin-bottom:30px;background-color:#eee}.jumbotron,.jumbotron .h1,.jumbotron h1{color:inherit}.jumbotron p{margin-bottom:15px;font-size:21px;font-weight:200}.jumbotron>hr{border-top-color:#d5d5d5}.container-fluid .jumbotron,.container .jumbotron{border-radius:6px;padding-left:15px;padding-right:15px}.jumbotron .container{max-width:100%}@media screen and (min-width:768px){.jumbotron{padding-top:48px;padding-bottom:48px}.container-fluid .jumbotron,.container .jumbotron{padding-left:60px;padding-right:60px}.jumbotron .h1,.jumbotron h1{font-size:63px}}.thumbnail{display:block;padding:4px;margin-bottom:20px;line-height:1.42857;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:border .2s ease-in-out;transition:border .2s ease-in-out}.thumbnail>img,.thumbnail a>img{display:block;max-width:100%;height:auto;margin-left:auto;margin-right:auto}.thumbnail .caption{padding:9px;color:#333}a.thumbnail.active,a.thumbnail:focus,a.thumbnail:hover{border-color:#337ab7}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:700}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{background-color:#dff0d8;border-color:#d6e9c6;color:#3c763d}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{background-color:#d9edf7;border-color:#bce8f1;color:#31708f}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{background-color:#fcf8e3;border-color:#faebcc;color:#8a6d3b}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{background-color:#f2dede;border-color:#ebccd1;color:#a94442}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}@-webkit-keyframes progress-bar-stripes{0%{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{0%{background-position:40px 0}to{background-position:0 0}}.progress{overflow:hidden;height:20px;margin-bottom:20px;background-color:#f5f5f5;border-radius:4px;box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.progress-bar{float:left;width:0;height:100%;font-size:12px;line-height:20px;color:#fff;text-align:center;background-color:#337ab7;box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-transition:width .6s ease;transition:width .6s ease}.progress-bar-striped,.progress-striped .progress-bar{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-size:40px 40px}.progress-bar.active,.progress.active .progress-bar{-webkit-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.media{margin-top:15px}.media:first-child{margin-top:0}.media,.media-body{zoom:1;overflow:hidden}.media-body{width:10000px}.media-object{display:block}.media-object.img-thumbnail{max-width:none}.media-right,.media>.pull-right{padding-left:10px}.media-left,.media>.pull-left{padding-right:10px}.media-body,.media-left,.media-right{display:table-cell;vertical-align:top}.media-middle{vertical-align:middle}.media-bottom{vertical-align:bottom}.media-heading{margin-top:0;margin-bottom:5px}.media-list{padding-left:0;list-style:none}.list-group{margin-bottom:20px;padding-left:0}.list-group-item{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd}.list-group-item:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.list-group-item:last-child{margin-bottom:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}a.list-group-item,button.list-group-item{color:#555}a.list-group-item .list-group-item-heading,button.list-group-item .list-group-item-heading{color:#333}a.list-group-item:focus,a.list-group-item:hover,button.list-group-item:focus,button.list-group-item:hover{text-decoration:none;color:#555;background-color:#f5f5f5}button.list-group-item{width:100%;text-align:left}.list-group-item.disabled,.list-group-item.disabled:focus,.list-group-item.disabled:hover{background-color:#eee;color:#777;cursor:not-allowed}.list-group-item.disabled .list-group-item-heading,.list-group-item.disabled:focus .list-group-item-heading,.list-group-item.disabled:hover .list-group-item-heading{color:inherit}.list-group-item.disabled .list-group-item-text,.list-group-item.disabled:focus .list-group-item-text,.list-group-item.disabled:hover .list-group-item-text{color:#777}.list-group-item.active,.list-group-item.active:focus,.list-group-item.active:hover{z-index:2;color:#fff;background-color:#337ab7;border-color:#337ab7}.list-group-item.active .list-group-item-heading,.list-group-item.active .list-group-item-heading>.small,.list-group-item.active .list-group-item-heading>small,.list-group-item.active:focus .list-group-item-heading,.list-group-item.active:focus .list-group-item-heading>.small,.list-group-item.active:focus .list-group-item-heading>small,.list-group-item.active:hover .list-group-item-heading,.list-group-item.active:hover .list-group-item-heading>.small,.list-group-item.active:hover .list-group-item-heading>small{color:inherit}.list-group-item.active .list-group-item-text,.list-group-item.active:focus .list-group-item-text,.list-group-item.active:hover .list-group-item-text{color:#c7ddef}.list-group-item-success{color:#3c763d;background-color:#dff0d8}a.list-group-item-success,button.list-group-item-success{color:#3c763d}a.list-group-item-success .list-group-item-heading,button.list-group-item-success .list-group-item-heading{color:inherit}a.list-group-item-success:focus,a.list-group-item-success:hover,button.list-group-item-success:focus,button.list-group-item-success:hover{color:#3c763d;background-color:#d0e9c6}a.list-group-item-success.active,a.list-group-item-success.active:focus,a.list-group-item-success.active:hover,button.list-group-item-success.active,button.list-group-item-success.active:focus,button.list-group-item-success.active:hover{color:#fff;background-color:#3c763d;border-color:#3c763d}.list-group-item-info{color:#31708f;background-color:#d9edf7}a.list-group-item-info,button.list-group-item-info{color:#31708f}a.list-group-item-info .list-group-item-heading,button.list-group-item-info .list-group-item-heading{color:inherit}a.list-group-item-info:focus,a.list-group-item-info:hover,button.list-group-item-info:focus,button.list-group-item-info:hover{color:#31708f;background-color:#c4e3f3}a.list-group-item-info.active,a.list-group-item-info.active:focus,a.list-group-item-info.active:hover,button.list-group-item-info.active,button.list-group-item-info.active:focus,button.list-group-item-info.active:hover{color:#fff;background-color:#31708f;border-color:#31708f}.list-group-item-warning{color:#8a6d3b;background-color:#fcf8e3}a.list-group-item-warning,button.list-group-item-warning{color:#8a6d3b}a.list-group-item-warning .list-group-item-heading,button.list-group-item-warning .list-group-item-heading{color:inherit}a.list-group-item-warning:focus,a.list-group-item-warning:hover,button.list-group-item-warning:focus,button.list-group-item-warning:hover{color:#8a6d3b;background-color:#faf2cc}a.list-group-item-warning.active,a.list-group-item-warning.active:focus,a.list-group-item-warning.active:hover,button.list-group-item-warning.active,button.list-group-item-warning.active:focus,button.list-group-item-warning.active:hover{color:#fff;background-color:#8a6d3b;border-color:#8a6d3b}.list-group-item-danger{color:#a94442;background-color:#f2dede}a.list-group-item-danger,button.list-group-item-danger{color:#a94442}a.list-group-item-danger .list-group-item-heading,button.list-group-item-danger .list-group-item-heading{color:inherit}a.list-group-item-danger:focus,a.list-group-item-danger:hover,button.list-group-item-danger:focus,button.list-group-item-danger:hover{color:#a94442;background-color:#ebcccc}a.list-group-item-danger.active,a.list-group-item-danger.active:focus,a.list-group-item-danger.active:hover,button.list-group-item-danger.active,button.list-group-item-danger.active:focus,button.list-group-item-danger.active:hover{color:#fff;background-color:#a94442;border-color:#a94442}.list-group-item-heading{margin-top:0;margin-bottom:5px}.list-group-item-text{margin-bottom:0;line-height:1.3}.panel{margin-bottom:20px;background-color:#fff;border:1px solid transparent;border-radius:4px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.panel-body{padding:15px}.panel-body:after,.panel-body:before{content:" ";display:table}.panel-body:after{clear:both}.panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-right-radius:3px;border-top-left-radius:3px}.panel-heading>.dropdown .dropdown-toggle,.panel-title{color:inherit}.panel-title{margin-top:0;margin-bottom:0;font-size:16px}.panel-title>.small,.panel-title>.small>a,.panel-title>a,.panel-title>small,.panel-title>small>a{color:inherit}.panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.list-group,.panel>.panel-collapse>.list-group{margin-bottom:0}.panel>.list-group .list-group-item,.panel>.panel-collapse>.list-group .list-group-item{border-width:1px 0;border-radius:0}.panel>.list-group:first-child .list-group-item:first-child,.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child{border-top:0;border-top-right-radius:3px;border-top-left-radius:3px}.panel>.list-group:last-child .list-group-item:last-child,.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child{border-bottom:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.panel-heading+.panel-collapse>.list-group .list-group-item:first-child{border-top-right-radius:0;border-top-left-radius:0}.list-group+.panel-footer,.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.panel>.panel-collapse>.table,.panel>.table,.panel>.table-responsive>.table{margin-bottom:0}.panel>.panel-collapse>.table caption,.panel>.table-responsive>.table caption,.panel>.table caption{padding-left:15px;padding-right:15px}.panel>.table-responsive:first-child>.table:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child,.panel>.table:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child,.panel>.table:first-child>thead:first-child>tr:first-child{border-top-right-radius:3px;border-top-left-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table:first-child>thead:first-child>tr:first-child th:first-child{border-top-left-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table:first-child>thead:first-child>tr:first-child th:last-child{border-top-right-radius:3px}.panel>.table-responsive:last-child>.table:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child,.panel>.table:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child{border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:first-child{border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:last-child{border-bottom-right-radius:3px}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive,.panel>.table+.panel-body,.panel>.table-responsive+.panel-body{border-top:1px solid #ddd}.panel>.table>tbody:first-child>tr:first-child td,.panel>.table>tbody:first-child>tr:first-child th{border-top:0}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th{border-bottom:0}.panel>.table-responsive{border:0;margin-bottom:0}.panel-group{margin-bottom:20px}.panel-group .panel{margin-bottom:0;border-radius:4px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading{border-bottom:0}.panel-group .panel-heading+.panel-collapse>.list-group,.panel-group .panel-heading+.panel-collapse>.panel-body{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd}.panel-default>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ddd}.panel-default>.panel-heading .badge{color:#f5f5f5;background-color:#333}.panel-default>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#337ab7}.panel-primary>.panel-heading{color:#fff;background-color:#337ab7;border-color:#337ab7}.panel-primary>.panel-heading+.panel-collapse>.panel-body{border-top-color:#337ab7}.panel-primary>.panel-heading .badge{color:#337ab7;background-color:#fff}.panel-primary>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#337ab7}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse>.panel-body{border-top-color:#d6e9c6}.panel-success>.panel-heading .badge{color:#dff0d8;background-color:#3c763d}.panel-success>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#d6e9c6}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse>.panel-body{border-top-color:#bce8f1}.panel-info>.panel-heading .badge{color:#d9edf7;background-color:#31708f}.panel-info>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#bce8f1}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse>.panel-body{border-top-color:#faebcc}.panel-warning>.panel-heading .badge{color:#fcf8e3;background-color:#8a6d3b}.panel-warning>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ebccd1}.panel-danger>.panel-heading .badge{color:#f2dede;background-color:#a94442}.panel-danger>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ebccd1}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,.15)}.well-lg{padding:24px;border-radius:6px}.well-sm{padding:9px;border-radius:3px}.embed-responsive{position:relative;display:block;height:0;padding:0;overflow:hidden}.embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;left:0;bottom:0;height:100%;width:100%;border:0}.embed-responsive-16by9{padding-bottom:56.25%}.embed-responsive-4by3{padding-bottom:75%}.close{float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.5;filter:alpha(opacity=50)}button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none}.modal,.modal-open{overflow:hidden}.modal{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;-webkit-overflow-scrolling:touch;outline:0}.modal.fade .modal-dialog{-webkit-transform:translateY(-25%);transform:translateY(-25%);-webkit-transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out}.modal.in .modal-dialog{-webkit-transform:translate(0);transform:translate(0)}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal-dialog{position:relative;width:auto;margin:10px}.modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 3px 9px rgba(0,0,0,.5);background-clip:padding-box;outline:0}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade{opacity:0;filter:alpha(opacity=0)}.modal-backdrop.in{opacity:.5;filter:alpha(opacity=50)}.modal-header{padding:15px;border-bottom:1px solid #e5e5e5}.modal-header:after,.modal-header:before{content:" ";display:table}.modal-header:after{clear:both}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.42857}.modal-body{position:relative;padding:15px}.modal-footer{padding:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer:after,.modal-footer:before{content:" ";display:table}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-left:5px;margin-bottom:0}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (min-width:768px){.modal-dialog{width:600px;margin:30px auto}.modal-content{box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm{width:300px}}@media (min-width:992px){.modal-lg{width:900px}}.tooltip{position:absolute;z-index:1070;display:block;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-style:normal;font-weight:400;letter-spacing:normal;line-break:auto;line-height:1.42857;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;font-size:12px;opacity:0;filter:alpha(opacity=0)}.tooltip.in{opacity:.9;filter:alpha(opacity=90)}.tooltip.top{margin-top:-3px;padding:5px 0}.tooltip.right{margin-left:3px;padding:0 5px}.tooltip.bottom{margin-top:3px;padding:5px 0}.tooltip.left{margin-left:-3px;padding:0 5px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-left .tooltip-arrow{right:5px}.tooltip.top-left .tooltip-arrow,.tooltip.top-right .tooltip-arrow{bottom:0;margin-bottom:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-right .tooltip-arrow{left:5px}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-left .tooltip-arrow{top:0;right:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-right .tooltip-arrow{top:0;left:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.popover{position:absolute;top:0;left:0;z-index:1060;display:none;max-width:276px;padding:1px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-style:normal;font-weight:400;letter-spacing:normal;line-break:auto;line-height:1.42857;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;font-size:14px;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 5px 10px rgba(0,0,0,.2)}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{margin:0;padding:8px 14px;font-size:14px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover>.arrow,.popover>.arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover>.arrow{border-width:11px}.popover>.arrow:after{border-width:10px;content:""}.popover.top>.arrow{left:50%;margin-left:-11px;border-bottom-width:0;border-top-color:#999;border-top-color:rgba(0,0,0,.25);bottom:-11px}.popover.top>.arrow:after{content:" ";bottom:1px;margin-left:-10px;border-bottom-width:0;border-top-color:#fff}.popover.right>.arrow{top:50%;left:-11px;margin-top:-11px;border-left-width:0;border-right-color:#999;border-right-color:rgba(0,0,0,.25)}.popover.right>.arrow:after{content:" ";left:1px;bottom:-10px;border-left-width:0;border-right-color:#fff}.popover.bottom>.arrow{left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,.25);top:-11px}.popover.bottom>.arrow:after{content:" ";top:1px;margin-left:-10px;border-top-width:0;border-bottom-color:#fff}.popover.left>.arrow{top:50%;right:-11px;margin-top:-11px;border-right-width:0;border-left-color:#999;border-left-color:rgba(0,0,0,.25)}.popover.left>.arrow:after{content:" ";right:1px;border-right-width:0;border-left-color:#fff;bottom:-10px}.carousel,.carousel-inner{position:relative}.carousel-inner{overflow:hidden;width:100%}.carousel-inner>.item{display:none;position:relative;-webkit-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>a>img,.carousel-inner>.item>img{display:block;max-width:100%;height:auto;line-height:1}@media (-webkit-transform-3d),all and (transform-3d){.carousel-inner>.item{-webkit-transition:-webkit-transform .6s ease-in-out;transition:transform .6s ease-in-out;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000px;perspective:1000px}.carousel-inner>.item.active.right,.carousel-inner>.item.next{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);left:0}.carousel-inner>.item.active.left,.carousel-inner>.item.prev{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);left:0}.carousel-inner>.item.active,.carousel-inner>.item.next.left,.carousel-inner>.item.prev.right{-webkit-transform:translateZ(0);transform:translateZ(0);left:0}}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:0;left:0;bottom:0;width:15%;opacity:.5;filter:alpha(opacity=50);font-size:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6);background-color:transparent}.carousel-control.left{background-image:-webkit-linear-gradient(left,rgba(0,0,0,.5),rgba(0,0,0,.0001));background-image:linear-gradient(90deg,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001));background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#80000000\',endColorstr=\'#00000000\',GradientType=1)}.carousel-control.right{left:auto;right:0;background-image:-webkit-linear-gradient(left,rgba(0,0,0,.0001),rgba(0,0,0,.5));background-image:linear-gradient(90deg,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5));background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#00000000\',endColorstr=\'#80000000\',GradientType=1)}.carousel-control:focus,.carousel-control:hover{outline:0;color:#fff;text-decoration:none;opacity:.9;filter:alpha(opacity=90)}.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{position:absolute;top:50%;margin-top:-10px;z-index:5;display:inline-block}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{left:50%;margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{right:50%;margin-right:-10px}.carousel-control .icon-next,.carousel-control .icon-prev{width:20px;height:20px;line-height:1;font-family:serif}.carousel-control .icon-prev:before{content:\'\\2039\'}.carousel-control .icon-next:before{content:\'\\203A\'}.carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:15;width:60%;margin-left:-30%;padding-left:0;list-style:none;text-align:center}.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;border:1px solid #fff;border-radius:10px;cursor:pointer;background-color:#000\\9;background-color:transparent}.carousel-indicators .active{margin:0;width:12px;height:12px;background-color:#fff}.carousel-caption{position:absolute;left:15%;right:15%;bottom:20px;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6)}.carousel-caption .btn{text-shadow:none}@media screen and (min-width:768px){.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{width:30px;height:30px;margin-top:-10px;font-size:30px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{margin-right:-10px}.carousel-caption{left:20%;right:20%;padding-bottom:30px}.carousel-indicators{bottom:20px}}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.center-block{display:block;margin-left:auto;margin-right:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}@media (max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table!important}tr.visible-xs{display:table-row!important}td.visible-xs,th.visible-xs{display:table-cell!important}}@media (max-width:767px){.visible-xs-block{display:block!important}}@media (max-width:767px){.visible-xs-inline{display:inline!important}}@media (max-width:767px){.visible-xs-inline-block{display:inline-block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table!important}tr.visible-sm{display:table-row!important}td.visible-sm,th.visible-sm{display:table-cell!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-block{display:block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline{display:inline!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline-block{display:inline-block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table!important}tr.visible-md{display:table-row!important}td.visible-md,th.visible-md{display:table-cell!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-block{display:block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline{display:inline!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline-block{display:inline-block!important}}@media (min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table!important}tr.visible-lg{display:table-row!important}td.visible-lg,th.visible-lg{display:table-cell!important}}@media (min-width:1200px){.visible-lg-block{display:block!important}}@media (min-width:1200px){.visible-lg-inline{display:inline!important}}@media (min-width:1200px){.visible-lg-inline-block{display:inline-block!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}}@media (min-width:1200px){.hidden-lg{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table!important}tr.visible-print{display:table-row!important}td.visible-print,th.visible-print{display:table-cell!important}}.visible-print-block{display:none!important}@media print{.visible-print-block{display:block!important}}.visible-print-inline{display:none!important}@media print{.visible-print-inline{display:inline!important}}.visible-print-inline-block{display:none!important}@media print{.visible-print-inline-block{display:inline-block!important}}@media print{.hidden-print{display:none!important}}',""]);
},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){t.exports=n.p+"f4769f9bdb7466be65088239c12046d1.eot"},function(t,e,n){t.exports=n.p+"448c34a56d699c29117adc64c43affeb.woff2"},function(t,e,n){t.exports=n.p+"fa2772327f55d8198301fdb8bcfc8158.woff"},function(t,e,n){t.exports=n.p+"e18bbf611f2a2e43afc071aa2f4e1512.ttf"},function(t,e,n){t.exports=n.p+"89889688147bd7575d6327160d64e760.svg"},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(u(r.parts[i],e))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(u(r.parts[i],e));p[r.id]={id:r.id,refs:1,parts:a}}}}function o(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],i=o[0],a=o[1],s=o[2],l=o[3],u={css:a,media:s,sourceMap:l};n[i]?n[i].parts.push(u):e.push(n[i]={id:i,parts:[u]})}return e}function i(t,e){var n=b(),r=y[y.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",i(t,e),e}function l(t){var e=document.createElement("link");return e.rel="stylesheet",i(t,e),e}function u(t,e){var n,r,o;if(e.singleton){var i=v++;n=g||(g=s(e)),r=c.bind(null,n,i,!1),o=c.bind(null,n,i,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(e),r=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),r=f.bind(null,n),o=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}function c(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=x(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function f(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var p={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},m=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),b=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,v=0,y=[];t.exports=function(t,e){if("object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},"undefined"==typeof e.singleton&&(e.singleton=m()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=o(t);return r(n,e),function(t){for(var i=[],a=0;a<n.length;a++){var s=n[a],l=p[s.id];l.refs--,i.push(l)}if(t){var u=o(t);r(u,e)}for(var a=0;a<i.length;a++){var l=i[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete p[l.id]}}}};var x=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(13),i=r(o),a=n(15),s=r(a),l=n(21),u=r(l);n(22),n(91);var c=i["default"].module("main.app",["main.directives.wowJsRender","main.directives.fileDownloader",s["default"]]);c.controller("UrlChooserCtrl",["$scope",function(t){t.isReadyForStart=!1,t.isReadyForDownload=!1,t.params={},t.params.urlForLoading=u["default"].getUrlToLoadWoWFile(),t.params.zipFile=null,t.selectedModeName="Please select mode";var e={predefined:[{name:"Shattrath city (WotLK)",source:"zip",url:"http://deamon87.github.io/WoWFiles/shattrath.zip",sceneType:"map",mapId:530,mapName:"Expansion01",x:-1663,y:5098,z:27},{name:"Ironforge (WotLK)",source:"zip",url:"http://deamon87.github.io/WoWFiles/ironforge.zip",sceneType:"wmo",fileName:"World/wmo/KhazModan/Cities/Ironforge/ironforge.wmo"}],custom:[{name:"Raw coordinates",source:"http",sceneType:"customMap"},{name:"Azeroth adt 31-31",source:"http",sceneType:"map",mapId:0,mapName:"Azeroth",x:0,y:0,z:0},{name:"Eye of Storm",source:"http",sceneType:"map",mapName:"NetherstormBG",x:2110,y:1489,z:1474},{name:"Halls Of Reflection",source:"http",sceneType:"map",mapName:"HallsOfReflection",x:5243.2461346537075,y:1938.6550422193939,z:717.0332923206179},{name:"Darkshire",source:"http",sceneType:"map",mapName:"Azeroth",x:-10559.7,y:-1189.02,z:29.0698},{name:"Forsaken start",source:"http",sceneType:"map",mapName:"Azeroth",x:2e3,y:1600,z:137},{name:"Deeprun Tram",source:"http",sceneType:"map",mapName:"DeeprunTram",x:17066.666666656,y:17066.666666656,z:0},{name:"Karazahn",source:"http",sceneType:"map",mapName:"Karazahn",x:-10666.666666656,y:-1600,z:170},{name:"Gnome subway glass(Wotlk)",source:"http",sceneType:"m2",modelName:"WORLD\\GENERIC\\GNOME\\PASSIVE DOODADS\\GNOMEMACHINE\\GNOMESUBWAYGLASS.m2"},{name:"Ironforge garage machine",source:"http",sceneType:"m2",modelName:"WORLD\\KHAZMODAN\\IRONFORGE\\PASSIVEDOODADS\\GARAGEMACHINE\\GARAGEMACHINE.m2"},{name:"KARAZAN CHANDELIER",source:"http",sceneType:"m2",modelName:"WORLD\\AZEROTH\\KARAZAHN\\PASSIVEDOODADS\\CHANDELIERS\\KARAZANCHANDELIER_02.m2"}]};t.selectionOptions=e,t.status={},t.status.isopen=!1,t.selectMode=function(e){t.selectedValue=e,t.selectedSource=e.source,t.selectedModeName=e.name,u["default"].setArchiveUrl(e.url),u["default"].setFileReadMethod(e.source)},t.startApplication=function(){u["default"].setUrlToLoadWoWFile(t.params.urlForLoading),t.params.zipUrl=u["default"].getArchiveUrl(),t.params.downLoadProgress=0,u["default"].setSceneParams(t.selectedValue),t.isReadyForDownload="zip"==u["default"].getFileReadMethod(),t.isReadyForStart="http"==u["default"].getFileReadMethod()},t.$watch("params.zipFile",function(e){e&&(u["default"].setArchiveFile(e),t.isReadyForDownload=!1,t.isReadyForStart=!0)})}]),c.config(["$provide","$httpProvider",function(t,e){t.factory("myHttpInterceptor",["$window","$q","$templateCache",function(t,e,n){return{request:function(t){if(t.url){var e=t.url.indexOf(".glsl"),r=e>-1;r?t.cache=n:t.params||(t.params={})}return t}}}]),e.interceptors.push("myHttpInterceptor")}]),c.run(["$log",function(t){}])},function(t,e,n){n(14),t.exports=angular},function(t,e){/**
	 * @license AngularJS v1.5.1
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(t,e,n){"use strict";function r(t,e){return e=e||Error,function(){var n,r,o=2,i=arguments,a=i[0],s="["+(t?t+":":"")+a+"] ",l=i[1];for(s+=l.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1),n=e+o;return n<i.length?xt(i[n]):t}),s+="\nhttp://errors.angularjs.org/1.5.1/"+(t?t+"/":"")+a,r=o,n="?";r<i.length;r++,n="&")s+=n+"p"+(r-o)+"="+encodeURIComponent(xt(i[r]));return new e(s)}}function o(t){if(null==t||T(t))return!1;if(Wr(t)||k(t)||Or&&t instanceof Or)return!0;var e="length"in Object(t)&&t.length;return E(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function i(t,e,n){var r,a;if(t)if(M(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(Wr(t)||o(t)){var s="object"!=typeof t;for(r=0,a=t.length;a>r;r++)(s||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==i)t.forEach(e,n,t);else if(_(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)Sr.call(t,r)&&e.call(n,t[r],r,t);return t}function a(t,e,n){for(var r=Object.keys(t).sort(),o=0;o<r.length;o++)e.call(n,t[r[o]],r[o]);return r}function s(t){return function(e,n){t(n,e)}}function l(){return++qr}function u(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function c(t,e,n){for(var r=t.$$hashKey,o=0,i=e.length;i>o;++o){var a=e[o];if(w(a)||M(a))for(var s=Object.keys(a),l=0,f=s.length;f>l;l++){var d=s[l],p=a[d];n&&w(p)?$(p)?t[d]=new Date(p.valueOf()):A(p)?t[d]=new RegExp(p):p.nodeName?t[d]=p.cloneNode(!0):j(p)?t[d]=p.clone():(w(t[d])||(t[d]=Wr(p)?[]:{}),c(t[d],[p],!0)):t[d]=p}}return u(t,r),t}function f(t){return c(t,Lr.call(arguments,1),!1)}function d(t){return c(t,Lr.call(arguments,1),!0)}function p(t){return parseInt(t,10)}function h(t,e){return f(Object.create(t),e)}function m(){}function b(t){return t}function g(t){return function(){return t}}function v(t){return M(t.toString)&&t.toString!==Br}function y(t){return"undefined"==typeof t}function x(t){return"undefined"!=typeof t}function w(t){return null!==t&&"object"==typeof t}function _(t){return null!==t&&"object"==typeof t&&!Vr(t)}function k(t){return"string"==typeof t}function E(t){return"number"==typeof t}function $(t){return"[object Date]"===Br.call(t)}function M(t){return"function"==typeof t}function A(t){return"[object RegExp]"===Br.call(t)}function T(t){return t&&t.window===t}function S(t){return t&&t.$evalAsync&&t.$watch}function C(t){return"[object File]"===Br.call(t)}function F(t){return"[object FormData]"===Br.call(t)}function I(t){return"[object Blob]"===Br.call(t)}function D(t){return"boolean"==typeof t}function R(t){return t&&M(t.then)}function O(t){return t&&E(t.length)&&Hr.test(Br.call(t))}function P(t){return"[object ArrayBuffer]"===Br.call(t)}function j(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function L(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}function N(t){return Cr(t.nodeName||t[0]&&t[0].nodeName)}function U(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function B(t,e){function r(t,e){var n,r=e.$$hashKey;if(Wr(t))for(var i=0,a=t.length;a>i;i++)e.push(o(t[i]));else if(_(t))for(n in t)e[n]=o(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=o(t[n]));else for(n in t)Sr.call(t,n)&&(e[n]=o(t[n]));return u(e,r),e}function o(t){if(!w(t))return t;var e=s.indexOf(t);if(-1!==e)return l[e];if(T(t)||S(t))throw zr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var o=!1,i=a(t);return i===n&&(i=Wr(t)?[]:Object.create(Vr(t)),o=!0),s.push(t),l.push(i),o?r(t,i):i}function a(t){switch(Br.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(o(t.buffer));case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}return M(t.cloneNode)?t.cloneNode(!0):void 0}var s=[],l=[];if(e){if(O(e)||P(e))throw zr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw zr("cpi","Can't copy! Source and destination are identical.");return Wr(e)?e.length=0:i(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),s.push(t),l.push(e),r(t,e)}return o(t)}function V(t,e){if(Wr(t)){e=e||[];for(var n=0,r=t.length;r>n;n++)e[n]=t[n]}else if(w(t)){e=e||{};for(var o in t)"$"===o.charAt(0)&&"$"===o.charAt(1)||(e[o]=t[o])}return e||t}function z(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var n,r,o,i=typeof t,a=typeof e;if(i==a&&"object"==i){if(!Wr(t)){if($(t))return $(e)?z(t.getTime(),e.getTime()):!1;if(A(t))return A(e)?t.toString()==e.toString():!1;if(S(t)||S(e)||T(t)||T(e)||Wr(e)||$(e)||A(e))return!1;o=gt();for(r in t)if("$"!==r.charAt(0)&&!M(t[r])){if(!z(t[r],e[r]))return!1;o[r]=!0}for(r in e)if(!(r in o)&&"$"!==r.charAt(0)&&x(e[r])&&!M(e[r]))return!1;return!0}if(!Wr(e))return!1;if((n=t.length)==e.length){for(r=0;n>r;r++)if(!z(t[r],e[r]))return!1;return!0}}return!1}function G(t,e,n){return t.concat(Lr.call(e,n))}function q(t,e){return Lr.call(t,e||0)}function W(t,e){var n=arguments.length>2?q(arguments,2):[];return!M(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,G(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function H(t,r){var o=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?o=n:T(r)?o="$WINDOW":r&&e===r?o="$DOCUMENT":S(r)&&(o="$SCOPE"),o}function X(t,e){return y(t)?n:(E(e)||(e=e?2:null),JSON.stringify(t,H,e))}function Y(t){return k(t)?JSON.parse(t):t}function Z(t,e){t=t.replace(Qr,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function K(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Q(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset(),o=Z(e,r);return K(t,n*(o-r))}function J(t){t=Or(t).clone();try{t.empty()}catch(e){}var n=Or("<div>").append(t).html();try{return t[0].nodeType===oo?Cr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Cr(e)})}catch(e){return Cr(n)}}function tt(t){try{return decodeURIComponent(t)}catch(e){}}function et(t){var e={};return i((t||"").split("&"),function(t){var n,r,o;t&&(r=t=t.replace(/\+/g,"%20"),n=t.indexOf("="),-1!==n&&(r=t.substring(0,n),o=t.substring(n+1)),r=tt(r),x(r)&&(o=x(o)?tt(o):!0,Sr.call(e,r)?Wr(e[r])?e[r].push(o):e[r]=[e[r],o]:e[r]=o))}),e}function nt(t){var e=[];return i(t,function(t,n){Wr(t)?i(t,function(t){e.push(ot(n,!0)+(t===!0?"":"="+ot(t,!0)))}):e.push(ot(n,!0)+(t===!0?"":"="+ot(t,!0)))}),e.length?e.join("&"):""}function rt(t){return ot(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ot(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function it(t,e){var n,r,o=Jr.length;for(r=0;o>r;++r)if(n=Jr[r]+e,k(n=t.getAttribute(n)))return n;return null}function at(t,e){var n,r,o={};i(Jr,function(e){var o=e+"app";!n&&t.hasAttribute&&t.hasAttribute(o)&&(n=t,r=t.getAttribute(o))}),i(Jr,function(e){var o,i=e+"app";!n&&(o=t.querySelector("["+i.replace(":","\\:")+"]"))&&(n=o,r=o.getAttribute(i))}),n&&(o.strictDi=null!==it(n,"strict-di"),e(n,r?[r]:[],o))}function st(n,r,o){w(o)||(o={});var a={strictDi:!1};o=f(a,o);var s=function(){if(n=Or(n),n.injector()){var t=n[0]===e?"document":J(n);throw zr("btstrpd","App Already Bootstrapped with this Element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(t){t.value("$rootElement",n)}]),o.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng");var i=oe(r,o.strictDi);return i.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),i},l=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return t&&l.test(t.name)&&(o.debugInfoEnabled=!0,t.name=t.name.replace(l,"")),t&&!u.test(t.name)?s():(t.name=t.name.replace(u,""),Gr.resumeBootstrap=function(t){return i(t,function(t){r.push(t)}),s()},void(M(Gr.resumeDeferredBootstrap)&&Gr.resumeDeferredBootstrap()))}function lt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function ut(t){var e=Gr.element(t).injector();if(!e)throw zr("test","no injector found for element argument to getTestability");return e.get("$$testability")}function ct(t,e){return e=e||"_",t.replace(to,function(t,n){return(n?e:"")+t.toLowerCase()})}function ft(){var e;if(!eo){var r=Kr();Pr=y(r)?t.jQuery:r?t[r]:n,Pr&&Pr.fn.on?(Or=Pr,f(Pr.fn,{scope:Eo.scope,isolateScope:Eo.isolateScope,controller:Eo.controller,injector:Eo.injector,inheritedData:Eo.inheritedData}),e=Pr.cleanData,Pr.cleanData=function(t){for(var n,r,o=0;null!=(r=t[o]);o++)n=Pr._data(r,"events"),n&&n.$destroy&&Pr(r).triggerHandler("$destroy");e(t)}):Or=Ft,Gr.element=Or,eo=!0}}function dt(t,e,n){if(!t)throw zr("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function pt(t,e,n){return n&&Wr(t)&&(t=t[t.length-1]),dt(M(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function ht(t,e){if("hasOwnProperty"===t)throw zr("badname","hasOwnProperty is not a valid {0} name",e)}function mt(t,e,n){if(!e)return t;for(var r,o=e.split("."),i=t,a=o.length,s=0;a>s;s++)r=o[s],t&&(t=(i=t)[r]);return!n&&M(t)?W(i,t):t}function bt(t){for(var e,n=t[0],r=t[t.length-1],o=1;n!==r&&(n=n.nextSibling);o++)(e||t[o]!==n)&&(e||(e=Or(Lr.call(t,0,o))),e.push(n));return e||t}function gt(){return Object.create(null)}function vt(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),o=r("ng"),i=e(t,"angular",Object);return i.$$minErr=i.$$minErr||r,e(i,"module",function(){var t={};return function(r,i,a){var s=function(t,e){if("hasOwnProperty"===t)throw o("badname","hasOwnProperty is not a valid {0} name",e)};return s(r,"module"),i&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,function(){function t(t,e,n,r){return r||(r=o),function(){return r[n||"push"]([t,e,arguments]),c}}function e(t,e){return function(n,i){return i&&M(i)&&(i.$$moduleName=r),o.push([t,e,arguments]),c}}if(!i)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var o=[],s=[],l=[],u=t("$injector","invoke","push",s),c={_invokeQueue:o,_configBlocks:s,_runBlocks:l,requires:i,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:e("$provide","decorator"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),component:e("$compileProvider","component"),config:u,run:function(t){return l.push(t),this}};return a&&u(a),c})}})}function yt(t){var e=[];return JSON.stringify(t,function(t,n){if(n=H(t,n),w(n)){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}function xt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):y(t)?"undefined":"string"!=typeof t?yt(t):t}function wt(e){f(e,{bootstrap:st,copy:B,extend:f,merge:d,equals:z,element:Or,forEach:i,injector:oe,noop:m,bind:W,toJson:X,fromJson:Y,identity:b,isUndefined:y,isDefined:x,isString:k,isFunction:M,isObject:w,isNumber:E,isElement:j,isArray:Wr,version:lo,isDate:$,lowercase:Cr,uppercase:Fr,callbacks:{counter:0},getTestability:ut,$$minErr:r,$$csp:Zr,reloadWithDebugInfo:lt}),(jr=vt(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:kn}),t.provider("$compile",he).directive({a:Si,input:Xi,textarea:Xi,form:Ri,script:za,select:Wa,style:Xa,option:Ha,ngBind:Ki,ngBindHtml:Ji,ngBindTemplate:Qi,ngClass:ea,ngClassEven:ra,ngClassOdd:na,ngCloak:oa,ngController:ia,ngForm:Oi,ngHide:Pa,ngIf:la,ngInclude:ua,ngInit:fa,ngNonBindable:Aa,ngPluralize:Fa,ngRepeat:Ia,ngShow:Oa,ngStyle:ja,ngSwitch:La,ngSwitchWhen:Na,ngSwitchDefault:Ua,ngOptions:Ca,ngTransclude:Va,ngModel:Ea,ngList:da,ngChange:ta,pattern:Za,ngPattern:Za,required:Ya,ngRequired:Ya,minlength:Qa,ngMinlength:Qa,maxlength:Ka,ngMaxlength:Ka,ngValue:Zi,ngModelOptions:Ma}).directive({ngInclude:ca}).directive(Ci).directive(aa),t.provider({$anchorScroll:ie,$animate:Uo,$animateCss:zo,$$animateJs:Lo,$$animateQueue:No,$$AnimateRunner:Vo,$$animateAsyncRun:Bo,$browser:fe,$cacheFactory:de,$controller:ye,$document:xe,$exceptionHandler:we,$filter:jn,$$forceReflow:Xo,$interpolate:Oe,$interval:Pe,$http:Fe,$httpParamSerializer:ke,$httpParamSerializerJQLike:Ee,$httpBackend:De,$xhrFactory:Ie,$location:Ze,$log:Ke,$parse:gn,$rootScope:_n,$q:vn,$$q:yn,$sce:An,$sceDelegate:Mn,$sniffer:Tn,$templateCache:pe,$templateRequest:Sn,$$testability:Cn,$timeout:Fn,$window:Rn,$$rAF:wn,$$jqLite:Qt,$$HashMap:To,$$cookieReader:Pn})}])}function _t(){return++co}function kt(t){return t.replace(ho,function(t,e,n,r){return r?n.toUpperCase():n}).replace(mo,"Moz$1")}function Et(t){return!yo.test(t)}function $t(t){var e=t.nodeType;return e===no||!e||e===ao}function Mt(t){for(var e in uo[t.ng339])return!0;return!1}function At(t){for(var e=0,n=t.length;n>e;e++)Ot(t[e])}function Tt(t,e){var n,r,o,a,s=e.createDocumentFragment(),l=[];if(Et(t))l.push(e.createTextNode(t));else{for(n=n||s.appendChild(e.createElement("div")),r=(xo.exec(t)||["",""])[1].toLowerCase(),o=_o[r]||_o._default,n.innerHTML=o[1]+t.replace(wo,"<$1></$2>")+o[2],a=o[0];a--;)n=n.lastChild;l=G(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",i(l,function(t){s.appendChild(t)}),s}function St(t,n){n=n||e;var r;return(r=vo.exec(t))?[n.createElement(r[1])]:(r=Tt(t,n))?r.childNodes:[]}function Ct(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}function Ft(t){if(t instanceof Ft)return t;var e;if(k(t)&&(t=Xr(t),e=!0),!(this instanceof Ft)){if(e&&"<"!=t.charAt(0))throw go("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ft(t)}e?Bt(this,St(t)):Bt(this,t)}function It(t){return t.cloneNode(!0)}function Dt(t,e){if(e||Ot(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),r=0,o=n.length;o>r;r++)Ot(n[r])}function Rt(t,e,n,r){if(x(r))throw go("offargs","jqLite#off() does not support the `selector` argument");var o=Pt(t),a=o&&o.events,s=o&&o.handle;if(s)if(e){var l=function(e){var r=a[e];x(n)&&U(r||[],n),x(n)&&r&&r.length>0||(po(t,e,s),delete a[e])};i(e.split(" "),function(t){l(t),bo[t]&&l(bo[t])})}else for(e in a)"$destroy"!==e&&po(t,e,s),delete a[e]}function Ot(t,e){var r=t.ng339,o=r&&uo[r];if(o){if(e)return void delete o.data[e];o.handle&&(o.events.$destroy&&o.handle({},"$destroy"),Rt(t)),delete uo[r],t.ng339=n}}function Pt(t,e){var r=t.ng339,o=r&&uo[r];return e&&!o&&(t.ng339=r=_t(),o=uo[r]={events:{},data:{},handle:n}),o}function jt(t,e,n){if($t(t)){var r=x(n),o=!r&&e&&!w(e),i=!e,a=Pt(t,!o),s=a&&a.data;if(r)s[e]=n;else{if(i)return s;if(o)return s&&s[e];f(s,e)}}}function Lt(t,e){return t.getAttribute?(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1:!1}function Nt(t,e){e&&t.setAttribute&&i(e.split(" "),function(e){t.setAttribute("class",Xr((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Xr(e)+" "," ")))})}function Ut(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");i(e.split(" "),function(t){t=Xr(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",Xr(n))}}function Bt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;n>r;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Vt(t,e){return zt(t,"$"+(e||"ngController")+"Controller")}function zt(t,e,n){t.nodeType==ao&&(t=t.documentElement);for(var r=Wr(e)?e:[e];t;){for(var o=0,i=r.length;i>o;o++)if(x(n=Or.data(t,r[o])))return n;t=t.parentNode||t.nodeType===so&&t.host}}function Gt(t){for(Dt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function qt(t,e){e||Dt(t);var n=t.parentNode;n&&n.removeChild(t)}function Wt(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):Or(n).on("load",e)}function Ht(t,e){var n=$o[e.toLowerCase()];return n&&Mo[N(t)]&&n}function Xt(t){return Ao[t]}function Yt(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var o=e[r||n.type],i=o?o.length:0;if(i){if(y(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=o.specialHandlerWrapper||Zt;i>1&&(o=V(o));for(var l=0;i>l;l++)n.isImmediatePropagationStopped()||s(t,n,o[l])}};return n.elem=t,n}function Zt(t,e,n){n.call(t,e)}function Kt(t,e,n){var r=e.relatedTarget;r&&(r===t||ko.call(t,r))||n.call(t,e)}function Qt(){this.$get=function(){return f(Ft,{hasClass:function(t,e){return t.attr&&(t=t[0]),Lt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Ut(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Nt(t,e)}})}}function Jt(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"==r||"object"==r&&null!==t?t.$$hashKey=r+":"+(e||l)():r+":"+t}function te(t,e){if(e){var n=0;this.nextUid=function(){return++n}}i(t,this.put,this)}function ee(t){var e=t.toString().replace(Do,""),n=e.match(So)||e.match(Co);return n}function ne(t){var e=ee(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function re(t,e,n){var r,o,a;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw k(n)&&n||(n=t.name||ne(t)),Ro("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=ee(t),i(o[1].split(Fo),function(t){t.replace(Io,function(t,e,n){r.push(n)})})}t.$inject=r}}else Wr(t)?(a=t.length-1,pt(t[a],"fn"),r=t.slice(0,a)):pt(t,"fn",!0);return r}function oe(t,e){function r(t){return function(e,n){return w(e)?void i(e,s(t)):t(e,n)}}function o(t,e){if(ht(t,"service"),(M(e)||Wr(e))&&(e=E.instantiate(e)),!e.$get)throw Ro("pget","Provider '{0}' must define $get factory method.",t);return _[t+b]=e}function a(t,e){return function(){var n=T.invoke(e,this);if(y(n))throw Ro("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function l(t,e,n){return o(t,{$get:n!==!1?a(t,e):e})}function u(t,e){return l(t,["$injector",function(t){return t.instantiate(e)}])}function c(t,e){return l(t,g(e),!1)}function f(t,e){ht(t,"constant"),_[t]=e,$[t]=e}function d(t,e){var n=E.get(t+b),r=n.$get;n.$get=function(){var t=T.invoke(r,n);return T.invoke(e,null,{$delegate:t})}}function p(t){dt(y(t)||Wr(t),"modulesToLoad","not an array");var e,n=[];return i(t,function(t){function r(t){var e,n;for(e=0,n=t.length;n>e;e++){var r=t[e],o=E.get(r[0]);o[r[1]].apply(o,r[2])}}if(!x.get(t)){x.put(t,!0);try{k(t)?(e=jr(t),n=n.concat(p(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):M(t)?n.push(E.invoke(t)):Wr(t)?n.push(E.invoke(t)):pt(t,"module")}catch(o){throw Wr(t)&&(t=t[t.length-1]),o.message&&o.stack&&-1==o.stack.indexOf(o.message)&&(o=o.message+"\n"+o.stack),Ro("modulerr","Failed to instantiate module {0} due to:\n{1}",t,o.stack||o.message||o)}}}),n}function h(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===m)throw Ro("cdep","Circular dependency found: {0}",e+" <- "+v.join(" <- "));return t[e]}try{return v.unshift(e),t[e]=m,t[e]=n(e,r)}catch(o){throw t[e]===m&&delete t[e],o}finally{v.shift()}}function o(t,n,o){for(var i=[],a=oe.$$annotate(t,e,o),s=0,l=a.length;l>s;s++){var u=a[s];if("string"!=typeof u)throw Ro("itkn","Incorrect injection token! Expected service name as string, got {0}",u);i.push(n&&n.hasOwnProperty(u)?n[u]:r(u,o))}return i}function i(t){return 11>=Rr?!1:"function"==typeof t&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(t))}function a(t,e,n,r){"string"==typeof n&&(r=n,n=null);var a=o(t,n,r);return Wr(t)&&(t=t[t.length-1]),i(t)?(a.unshift(null),new(Function.prototype.bind.apply(t,a))):t.apply(e,a)}function s(t,e,n){var r=Wr(t)?t[t.length-1]:t,i=o(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))}return{invoke:a,instantiate:s,get:r,annotate:oe.$$annotate,has:function(e){return _.hasOwnProperty(e+b)||t.hasOwnProperty(e)}}}e=e===!0;var m={},b="Provider",v=[],x=new te([],!0),_={$provide:{provider:r(o),factory:r(l),service:r(u),value:r(c),constant:r(f),decorator:d}},E=_.$injector=h(_,function(t,e){throw Gr.isString(e)&&v.push(e),Ro("unpr","Unknown provider: {0}",v.join(" <- "))}),$={},A=h($,function(t,e){var r=E.get(t+b,e);return T.invoke(r.$get,r,n,t)}),T=A;_["$injector"+b]={$get:g(A)};var S=p(t);return T=A.get("$injector"),T.strictDi=e,i(S,function(t){t&&T.invoke(t)}),T}function ie(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,r){function o(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===N(t)?(e=t,!0):void 0}),e}function i(){var t=s.yOffset;if(M(t))t=t();else if(j(t)){var n=t[0],r=e.getComputedStyle(n);t="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else E(t)||(t=0);return t}function a(t){if(t){t.scrollIntoView();var n=i();if(n){var r=t.getBoundingClientRect().top;e.scrollBy(0,r-n)}}else e.scrollTo(0,0)}function s(t){t=k(t)?t:n.hash();var e;t?(e=l.getElementById(t))?a(e):(e=o(l.getElementsByName(t)))?a(e):"top"===t&&a(null):a(null)}var l=e.document;return t&&r.$watch(function(){return n.hash()},function(t,e){t===e&&""===t||Wt(function(){r.$evalAsync(s)})}),s}]}function ae(t,e){return t||e?t?e?(Wr(t)&&(t=t.join(" ")),Wr(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function se(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Po)return n}}function le(t){k(t)&&(t=t.split(" "));var e=gt();return i(t,function(t){t.length&&(e[t]=!0)}),e}function ue(t){return w(t)?t:{}}function ce(t,e,n,r){function o(t){try{t.apply(null,q(arguments,1))}finally{if(v--,0===v)for(;x.length;)try{x.pop()()}catch(e){n.error(e)}}}function a(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}function s(){$=null,u(),c()}function l(){try{return p.state}catch(t){}}function u(){w=l(),w=y(w)?null:w,z(w,T)&&(w=T),T=w}function c(){k===f.url()&&_===w||(k=f.url(),_=w,i(M,function(t){t(f.url(),w)}))}var f=this,d=(e[0],t.location),p=t.history,h=t.setTimeout,b=t.clearTimeout,g={};f.isMock=!1;var v=0,x=[];f.$$completeOutstandingRequest=o,f.$$incOutstandingRequestCount=function(){v++},f.notifyWhenNoOutstandingRequests=function(t){0===v?t():x.push(t)};var w,_,k=d.href,E=e.find("base"),$=null;u(),_=w,f.url=function(e,n,o){if(y(o)&&(o=null),d!==t.location&&(d=t.location),p!==t.history&&(p=t.history),e){var i=_===o;if(k===e&&(!r.history||i))return f;var s=k&&Be(k)===Be(e);return k=e,_=o,!r.history||s&&i?(s&&!$||($=e),n?d.replace(e):s?d.hash=a(e):d.href=e,d.href!==e&&($=e)):(p[n?"replaceState":"pushState"](o,"",e),u(),_=w),f}return $||d.href.replace(/%27/g,"'")},f.state=function(){return w};var M=[],A=!1,T=null;f.onUrlChange=function(e){return A||(r.history&&Or(t).on("popstate",s),Or(t).on("hashchange",s),A=!0),M.push(e),e},f.$$applicationDestroyed=function(){Or(t).off("hashchange popstate",s)},f.$$checkUrlChange=c,f.baseHref=function(){var t=E.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},f.defer=function(t,e){var n;return v++,n=h(function(){delete g[n],o(t)},e||0),g[n]=!0,n},f.defer.cancel=function(t){return g[t]?(delete g[t],b(t),o(m),!0):!1}}function fe(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new ce(t,r,e,n)}]}function de(){this.$get=function(){function t(t,n){function o(t){t!=d&&(p?p==t&&(p=t.n):p=t,i(t.n,t.p),i(t,d),d=t,d.n=null)}function i(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var a=0,s=f({},n,{id:t}),l=gt(),u=n&&n.capacity||Number.MAX_VALUE,c=gt(),d=null,p=null;return e[t]={put:function(t,e){if(!y(e)){if(u<Number.MAX_VALUE){var n=c[t]||(c[t]={key:t});o(n)}return t in l||a++,l[t]=e,a>u&&this.remove(p.key),e}},get:function(t){if(u<Number.MAX_VALUE){var e=c[t];if(!e)return;o(e)}return l[t]},remove:function(t){if(u<Number.MAX_VALUE){var e=c[t];if(!e)return;e==d&&(d=e.p),e==p&&(p=e.n),i(e.n,e.p),delete c[t]}t in l&&(delete l[t],a--)},removeAll:function(){l=gt(),a=0,c=gt(),d=p=null},destroy:function(){l=null,s=null,c=null,delete e[t]},info:function(){return f({},s,{size:a})}}}var e={};return t.info=function(){var t={};return i(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function pe(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function he(t,r){function o(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o={};return i(t,function(t,i){if(t in $)return void(o[i]=$[t]);var a=t.match(r);if(!a)throw Go("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,i,t,n?"controller bindings definition":"isolate scope definition");o[i]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||i},a[4]&&($[t]=o[i])}),o}function a(t,e){var n={isolateScope:null,bindToController:null};if(w(t.scope)&&(t.bindToController===!0?(n.bindToController=o(t.scope,e,!0),n.isolateScope={}):n.isolateScope=o(t.scope,e,!1)),w(t.bindToController)&&(n.bindToController=o(t.bindToController,e,!0)),w(n.bindToController)){var r=t.controller,i=t.controllerAs;if(!r)throw Go("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!ve(r,i))throw Go("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}function l(t){var e=t.charAt(0);if(!e||e!==Cr(e))throw Go("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw Go("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}var u={},c="Directive",d=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,p=/(([\w\-]+)(?:\:([^;]+))?;?)/,v=L("ngSrc,ngSrcset,src,srcset"),_=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,E=/^(on[a-z]+|formaction)$/,$=gt();this.directive=function T(e,n){return ht(e,"directive"),k(e)?(l(e),dt(n,"directiveFactory"),u.hasOwnProperty(e)||(u[e]=[],t.factory(e+c,["$injector","$exceptionHandler",function(t,n){var r=[];return i(u[e],function(o,i){try{var a=t.invoke(o);M(a)?a={compile:g(a)}:!a.compile&&a.link&&(a.compile=g(a.link)),a.priority=a.priority||0,a.index=i,a.name=a.name||e,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"EA",a.$$moduleName=o.$$moduleName,r.push(a)}catch(s){n(s)}}),r}])),u[e].push(n)):i(e,s(T)),this},this.component=function(t,e){function n(t){function n(e){return M(e)||Wr(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var o=e.template||e.templateUrl?e.template:"";return{controller:r,controllerAs:ve(e.controller)||e.controllerAs||"$ctrl",template:n(o),templateUrl:n(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require}}var r=e.controller||m;return i(e,function(t,e){"$"===e.charAt(0)&&(n[e]=t,r[e]=t)}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationWhitelist=function(t){return x(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return x(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var A=!0;this.debugInfoEnabled=function(t){return x(t)?(A=t,this):A},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,r,o,s,l,g,x,$,T,C){function F(t,e,n){ht.innerHTML="<span "+e+">";var r=ht.firstChild.attributes,o=r[0];r.removeNamedItem(o.name),o.value=n,t.attributes.setNamedItem(o)}function I(t,e){try{t.addClass(e)}catch(n){}}function R(t,e,n,r,o){t instanceof Or||(t=Or(t));var i=P(t,e,t,n,r,o);R.$$addScopeClass(t);var a=null;return function(e,n,r){dt(e,"scope"),o&&o.needsNewScope&&(e=e.$parent.$new()),r=r||{};var s=r.parentBoundTranscludeFn,l=r.transcludeControllers,u=r.futureParentElement;s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=O(u));var c;if(c="html"!==a?Or(ot(a,Or("<div>").append(t).html())):n?Eo.clone.call(t):t,l)for(var f in l)c.data("$"+f+"Controller",l[f].instance);return R.$$addScopeInfo(c,e),n&&n(c,e),i&&i(e,c,c,s),c}}function O(t){var e=t&&t[0];return e&&"foreignobject"!==N(e)&&Br.call(e).match(/SVG/)?"svg":"html"}function P(t,e,r,o,i,a){function s(t,r,o,i){var a,s,l,u,c,f,d,p,b;if(h){var g=r.length;for(b=new Array(g),c=0;c<m.length;c+=3)d=m[c],b[d]=r[d]}else b=r;for(c=0,f=m.length;f>c;)l=b[m[c++]],a=m[c++],s=m[c++],a?(a.scope?(u=t.$new(),R.$$addScopeInfo(Or(l),u)):u=t,p=a.transcludeOnThisElement?j(t,a.transclude,i):!a.templateOnThisElement&&i?i:!i&&e?j(t,e):null,a(s,u,l,o,p)):s&&s(t,l.childNodes,n,i)}for(var l,u,c,f,d,p,h,m=[],b=0;b<t.length;b++)l=new mt,u=L(t[b],[],l,0===b?o:n,i),c=u.length?W(u,t[b],l,e,r,null,[],[],a):null,c&&c.scope&&R.$$addScopeClass(l.$$element),d=c&&c.terminal||!(f=t[b].childNodes)||!f.length?null:P(f,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||d)&&(m.push(b,c,d),p=!0,h=h||c),a=null;return p?s:null}function j(t,e,n){var r=function(r,o,i,a,s){return r||(r=t.$new(!1,s),r.$$transcluded=!0),e(r,o,{parentBoundTranscludeFn:n,transcludeControllers:i,futureParentElement:a})},o=r.$$slots=gt();for(var i in e.$$slots)e.$$slots[i]?o[i]=j(t,e.$$slots[i],n):o[i]=null;return r}function L(t,e,n,r,o){var i,a,s=t.nodeType,l=n.$attr;switch(s){case no:Z(e,me(N(t)),"E",r,o);for(var u,c,f,h,m,b,g=t.attributes,v=0,y=g&&g.length;y>v;v++){var x=!1,_=!1;u=g[v],c=u.name,m=Xr(u.value),h=me(c),(b=xt.test(h))&&(c=c.replace(qo,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var E=h.match(wt);E&&K(E[1])&&(x=c,_=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),f=me(c.toLowerCase()),l[f]=c,!b&&n.hasOwnProperty(f)||(n[f]=m,Ht(t,f)&&(n[f]=!0)),at(t,e,m,f,b),Z(e,f,"A",r,o,x,_)}if(a=t.className,w(a)&&(a=a.animVal),k(a)&&""!==a)for(;i=p.exec(a);)f=me(i[2]),Z(e,f,"C",r,o)&&(n[f]=Xr(i[3])),a=a.substr(i.index+i[0].length);break;case oo:if(11===Rr)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===oo;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);rt(e,t.nodeValue);break;case io:try{i=d.exec(t.nodeValue),i&&(f=me(i[1]),Z(e,f,"M",r,o)&&(n[f]=Xr(i[2])))}catch($){}}return e.sort(et),e}function B(t,e,n){var r=[],o=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Go("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType==no&&(t.hasAttribute(e)&&o++,t.hasAttribute(n)&&o--),r.push(t),t=t.nextSibling}while(o>0)}else r.push(t);return Or(r)}function V(t,e,n){return function(r,o,i,a,s){return o=B(o[0],e,n),t(r,o,i,a,s)}}function G(t,e,n,r,o,i){var a;return t?R(e,n,r,o,i):function(){return a||(a=R(e,n,r,o,i),e=n=i=null),a.apply(this,arguments)}}function W(t,e,r,a,s,l,u,c,d){function p(t,e,n,r){t&&(n&&(t=V(t,n,r)),t.require=m.require,t.directiveName=b,($===m||m.$$isolateScope)&&(t=lt(t,{isolateScope:!0})),u.push(t)),e&&(n&&(e=V(e,n,r)),e.require=m.require,e.directiveName=b,($===m||m.$$isolateScope)&&(e=lt(e,{isolateScope:!0})),c.push(e))}function h(t,o,a,s,l){function d(t,e,r,o){var i;if(S(t)||(o=r,r=e,e=t,t=n),I&&(i=v),r||(r=I?_.parent():_),!o)return l(t,e,i,r,N);var a=l.$$slots[o];
if(a)return a(t,e,i,r,N);if(y(a))throw Go("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',o,J(_))}var p,h,m,b,g,v,x,_,T,C,F;e===a?(T=r,_=r.$$element):(_=Or(a),T=new mt(_,r)),g=o,$?b=o.$new(!0):k&&(g=o.$parent),l&&(x=d,x.$$boundTransclude=l,x.isSlotFilled=function(t){return!!l.$$slots[t]}),E&&(v=X(_,T,x,E,b,o,$)),$&&(R.$$addScopeInfo(_,b,!0,!(A&&(A===$||A===$.$$originalDirective))),R.$$addScopeClass(_,!0),b.$$isolateBindings=$.$$isolateBindings,C=ft(o,T,b,b.$$isolateBindings,$),C&&b.$on("$destroy",C));for(var D in v){var O=E[D],P=v[D],j=O.$$bindings.bindToController;P.identifier&&j&&(F=ft(g,T,P.instance,j,O));var L=P();L!==P.instance&&(P.instance=L,_.data("$"+O.name+"Controller",L),F&&F(),F=ft(g,T,P.instance,j,O))}for(i(E,function(t,e){var n=t.require;t.bindToController&&!Wr(n)&&w(n)&&f(v[e].instance,H(e,n,_,v))}),i(v,function(t){M(t.instance.$onInit)&&t.instance.$onInit()}),p=0,h=u.length;h>p;p++)m=u[p],ut(m,m.isolateScope?b:o,_,T,m.require&&H(m.directiveName,m.require,_,v),x);var N=o;for($&&($.template||null===$.templateUrl)&&(N=b),t&&t(N,a.childNodes,n,l),p=c.length-1;p>=0;p--)m=c[p],ut(m,m.isolateScope?b:o,_,T,m.require&&H(m.directiveName,m.require,_,v),x)}d=d||{};for(var m,b,g,v,x,_=-Number.MAX_VALUE,k=d.newScopeDirective,E=d.controllerDirectives,$=d.newIsolateScopeDirective,A=d.templateDirective,T=d.nonTlbTranscludeDirective,C=!1,F=!1,I=d.hasElementTranscludeDirective,D=r.$$element=Or(e),O=l,P=a,j=!1,U=!1,z=0,W=t.length;W>z;z++){m=t[z];var Z=m.$$start,K=m.$$end;if(Z&&(D=B(e,Z,K)),g=n,_>m.priority)break;if((x=m.scope)&&(m.templateUrl||(w(x)?(nt("new/isolated scope",$||k,m,D),$=m):nt("new/isolated scope",$,m,D)),k=k||m),b=m.name,!j&&(m.replace&&(m.templateUrl||m.template)||m.transclude&&!m.$$tlb)){for(var et,rt=z+1;et=t[rt++];)if(et.transclude&&!et.$$tlb||et.replace&&(et.templateUrl||et.template)){U=!0;break}j=!0}if(!m.templateUrl&&m.controller&&(x=m.controller,E=E||gt(),nt("'"+b+"' controller",E[b],m,D),E[b]=m),x=m.transclude)if(C=!0,m.$$tlb||(nt("transclusion",T,m,D),T=m),"element"==x)I=!0,_=m.priority,g=D,D=r.$$element=Or(R.$$createComment(b,r[b])),e=D[0],st(s,q(g),e),P=G(U,g,a,_,O&&O.name,{nonTlbTranscludeDirective:T});else{var it=gt();if(g=Or(It(e)).contents(),w(x)){g=[];var at=gt(),ct=gt();i(x,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,at[t]=e,it[e]=null,ct[e]=n}),i(D.contents(),function(t){var e=at[me(N(t))];e?(ct[e]=!0,it[e]=it[e]||[],it[e].push(t)):g.push(t)}),i(ct,function(t,e){if(!t)throw Go("reqslot","Required transclusion slot `{0}` was not filled.",e)});for(var dt in it)it[dt]&&(it[dt]=G(U,it[dt],a))}D.empty(),P=G(U,g,a,n,n,{needsNewScope:m.$$isolateScope||m.$$newScope}),P.$$slots=it}if(m.template)if(F=!0,nt("template",A,m,D),A=m,x=M(m.template)?m.template(D,r):m.template,x=yt(x),m.replace){if(O=m,g=Et(x)?[]:ge(ot(m.templateNamespace,Xr(x))),e=g[0],1!=g.length||e.nodeType!==no)throw Go("tplrt","Template for directive '{0}' must have exactly one root element. {1}",b,"");st(s,D,e);var pt={$attr:{}},ht=L(e,[],pt),bt=t.splice(z+1,t.length-(z+1));($||k)&&Y(ht,$,k),t=t.concat(ht).concat(bt),Q(r,pt),W=t.length}else D.html(x);if(m.templateUrl)F=!0,nt("template",A,m,D),A=m,m.replace&&(O=m),h=tt(t.splice(z,t.length-z),D,r,s,C&&P,u,c,{controllerDirectives:E,newScopeDirective:k!==m&&k,newIsolateScopeDirective:$,templateDirective:A,nonTlbTranscludeDirective:T}),W=t.length;else if(m.compile)try{v=m.compile(D,r,P),M(v)?p(null,v,Z,K):v&&p(v.pre,v.post,Z,K)}catch(vt){o(vt,J(D))}m.terminal&&(h.terminal=!0,_=Math.max(_,m.priority))}return h.scope=k&&k.scope===!0,h.transcludeOnThisElement=C,h.templateOnThisElement=F,h.transclude=P,d.hasElementTranscludeDirective=I,h}function H(t,e,n,r){var o;if(k(e)){var a=e.match(_),s=e.substring(a[0].length),l=a[1]||a[3],u="?"===a[2];if("^^"===l?n=n.parent():(o=r&&r[s],o=o&&o.instance),!o){var c="$"+s+"Controller";o=l?n.inheritedData(c):n.data(c)}if(!o&&!u)throw Go("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,t)}else if(Wr(e)){o=[];for(var f=0,d=e.length;d>f;f++)o[f]=H(t,e[f],n,r)}else w(e)&&(o={},i(e,function(e,i){o[i]=H(t,e,n,r)}));return o||null}function X(t,e,n,r,o,i,a){var s=gt();for(var l in r){var u=r[l],c={$scope:u===a||u.$$isolateScope?o:i,$element:t,$attrs:e,$transclude:n},f=u.controller;"@"==f&&(f=e[u.name]);var d=g(f,c,!0,u.controllerAs);s[u.name]=d,t.data("$"+u.name+"Controller",d.instance)}return s}function Y(t,e,n){for(var r=0,o=t.length;o>r;r++)t[r]=h(t[r],{$$isolateScope:e,$$newScope:n})}function Z(e,n,r,i,s,l,f){if(n===s)return null;var d=null;if(u.hasOwnProperty(n))for(var p,m=t.get(n+c),b=0,g=m.length;g>b;b++)try{if(p=m[b],(y(i)||i>p.priority)&&-1!=p.restrict.indexOf(r)){if(l&&(p=h(p,{$$start:l,$$end:f})),!p.$$bindings){var v=p.$$bindings=a(p,p.name);w(v.isolateScope)&&(p.$$isolateBindings=v.isolateScope)}e.push(p),d=p}}catch(x){o(x)}return d}function K(e){if(u.hasOwnProperty(e))for(var n,r=t.get(e+c),o=0,i=r.length;i>o;o++)if(n=r[o],n.multiElement)return!0;return!1}function Q(t,e){var n=e.$attr,r=t.$attr,o=t.$$element;i(t,function(r,o){"$"!=o.charAt(0)&&(e[o]&&e[o]!==r&&(r+=("style"===o?";":" ")+e[o]),t.$set(o,r,!0,n[o]))}),i(e,function(e,i){"class"==i?(I(o,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==i?(o.attr("style",o.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==i.charAt(0)||t.hasOwnProperty(i)||(t[i]=e,r[i]=n[i])})}function tt(t,e,n,r,o,a,l,u){var c,f,d=[],p=e[0],m=t.shift(),b=h(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),g=M(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,v=m.templateNamespace;return e.empty(),s(g).then(function(s){var h,y,x,_;if(s=yt(s),m.replace){if(x=Et(s)?[]:ge(ot(v,Xr(s))),h=x[0],1!=x.length||h.nodeType!==no)throw Go("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,g);y={$attr:{}},st(r,e,h);var k=L(h,[],y);w(m.scope)&&Y(k,!0),t=k.concat(t),Q(n,y)}else h=p,e.html(s);for(t.unshift(b),c=W(t,h,n,o,e,m,a,l,u),i(r,function(t,n){t==h&&(r[n]=e[0])}),f=P(e[0].childNodes,o);d.length;){var E=d.shift(),$=d.shift(),M=d.shift(),A=d.shift(),T=e[0];if(!E.$$destroyed){if($!==p){var S=$.className;u.hasElementTranscludeDirective&&m.replace||(T=It(h)),st(M,Or($),T),I(Or(T),S)}_=c.transcludeOnThisElement?j(E,c.transclude,A):A,c(f,E,T,r,_)}}d=null}),function(t,e,n,r,o){var i=o;e.$$destroyed||(d?d.push(e,n,r,i):(c.transcludeOnThisElement&&(i=j(e,c.transclude,o)),c(f,e,n,r,i)))}}function et(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function nt(t,e,n,r){function o(t){return t?" (module: "+t+")":""}if(e)throw Go("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,o(e.$$moduleName),n.name,o(n.$$moduleName),t,J(r))}function rt(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){var e=t.parent(),r=!!e.length;return r&&R.$$addBindingClass(e),function(t,e){var o=e.parent();r||R.$$addBindingClass(o),R.$$addBindingInfo(o,n.expressions),t.$watch(n,function(t){e[0].nodeValue=t})}}})}function ot(t,n){switch(t=Cr(t||"html")){case"svg":case"math":var r=e.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function it(t,e){if("srcdoc"==e)return $.HTML;var n=N(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?$.RESOURCE_URL:void 0}function at(t,e,n,o,i){var a=it(t,o);i=v[o]||i;var s=r(n,!0,a,i);if(s){if("multiple"===o&&"select"===N(t))throw Go("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",J(t));e.push({priority:100,compile:function(){return{pre:function(t,e,l){var u=l.$$observers||(l.$$observers=gt());if(E.test(o))throw Go("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=l[o];c!==n&&(s=c&&r(c,!0,a,i),n=c),s&&(l[o]=s(t),(u[o]||(u[o]=[])).$$inter=!0,(l.$$observers&&l.$$observers[o].$$scope||t).$watch(s,function(t,e){"class"===o&&t!=e?l.$updateClass(t,e):l.$set(o,t)}))}}}})}}function st(t,n,r){var o,i,a=n[0],s=n.length,l=a.parentNode;if(t)for(o=0,i=t.length;i>o;o++)if(t[o]==a){t[o++]=r;for(var u=o,c=u+s-1,f=t.length;f>u;u++,c++)f>c?t[u]=t[c]:delete t[u];t.length-=s-1,t.context===a&&(t.context=r);break}l&&l.replaceChild(r,a);var d=e.createDocumentFragment();for(o=0;s>o;o++)d.appendChild(n[o]);for(Or.hasData(a)&&(Or.data(r,Or.data(a)),Or(a).off("$destroy")),Or.cleanData(d.querySelectorAll("*")),o=1;s>o;o++)delete n[o];n[0]=r,n.length=1}function lt(t,e){return f(function(){return t.apply(null,arguments)},t,e)}function ut(t,e,n,r,i,a){try{t(e,n,r,i,a)}catch(s){o(s,J(n))}}function ft(t,e,n,o,a){var s=[];return i(o,function(o,i){var u,c,f,d,p,h=o.attrName,b=o.optional,g=o.mode;switch(g){case"@":b||Sr.call(e,h)||(n[i]=e[h]=void 0),e.$observe(h,function(t){k(t)&&(n[i]=t)}),e.$$observers[h].$$scope=t,u=e[h],k(u)?n[i]=r(u)(t):D(u)&&(n[i]=u);break;case"=":if(!Sr.call(e,h)){if(b)break;e[h]=void 0}if(b&&!e[h])break;c=l(e[h]),d=c.literal?z:function(t,e){return t===e||t!==t&&e!==e},f=c.assign||function(){throw u=n[i]=c(t),Go("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[h],h,a.name)},u=n[i]=c(t);var v=function(e){return d(e,n[i])||(d(e,u)?f(t,e=n[i]):n[i]=e),u=e};v.$stateful=!0,p=o.collection?t.$watchCollection(e[h],v):t.$watch(l(e[h],v),null,c.literal),s.push(p);break;case"<":if(!Sr.call(e,h)){if(b)break;e[h]=void 0}if(b&&!e[h])break;c=l(e[h]),n[i]=c(t),p=t.$watch(c,function(t){n[i]=t},c.literal),s.push(p);break;case"&":if(c=e.hasOwnProperty(h)?l(e[h]):m,c===m&&b)break;n[i]=function(e){return c(t,e)}}}),s.length&&function(){for(var t=0,e=s.length;e>t;++t)s[t]()}}var pt=/^\w/,ht=e.createElement("div"),mt=function(t,e){if(e){var n,r,o,i=Object.keys(e);for(n=0,r=i.length;r>n;n++)o=i[n],this[o]=e[o]}else this.$attr={};this.$$element=t};mt.prototype={$normalize:me,$addClass:function(t){t&&t.length>0&&T.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&T.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=be(t,e);n&&n.length&&T.addClass(this.$$element,n);var r=be(e,t);r&&r.length&&T.removeClass(this.$$element,r)},$set:function(t,e,n,r){var a,s=this.$$element[0],l=Ht(s,t),u=Xt(t),c=t;if(l?(this.$$element.prop(t,e),r=l):u&&(this[u]=e,c=u),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t],r||(this.$attr[t]=r=ct(t,"-"))),a=N(this.$$element),"a"===a&&("href"===t||"xlinkHref"===t)||"img"===a&&"src"===t)this[t]=e=C(e,"src"===t);else if("img"===a&&"srcset"===t){for(var f="",d=Xr(e),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,h=/\s/.test(d)?p:/(,)/,m=d.split(h),b=Math.floor(m.length/2),g=0;b>g;g++){var v=2*g;f+=C(Xr(m[v]),!0),f+=" "+Xr(m[v+1])}var x=Xr(m[2*g]).split(/\s/);f+=C(Xr(x[0]),!0),2===x.length&&(f+=" "+Xr(x[1])),this[t]=e=f}n!==!1&&(null===e||y(e)?this.$$element.removeAttr(r):pt.test(r)?this.$$element.attr(r,e):F(this.$$element[0],r,e));var w=this.$$observers;w&&i(w[c],function(t){try{t(e)}catch(n){o(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=gt()),o=r[t]||(r[t]=[]);return o.push(e),x.$evalAsync(function(){o.$$inter||!n.hasOwnProperty(t)||y(n[t])||e(n[t])}),function(){U(o,e)}}};var bt=r.startSymbol(),vt=r.endSymbol(),yt="{{"==bt&&"}}"==vt?b:function(t){return t.replace(/\{\{/g,bt).replace(/}}/g,vt)},xt=/^ngAttr[A-Z]/,wt=/^(.+)Start$/;return R.$$addBindingInfo=A?function(t,e){var n=t.data("$binding")||[];Wr(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:m,R.$$addBindingClass=A?function(t){I(t,"ng-binding")}:m,R.$$addScopeInfo=A?function(t,e,n,r){var o=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(o,e)}:m,R.$$addScopeClass=A?function(t,e){I(t,e?"ng-isolate-scope":"ng-scope")}:m,R.$$createComment=function(t,n){var r="";return A&&(r=" "+(t||"")+": "+(n||"")+" "),e.createComment(r)},R}]}function me(t){return kt(t.replace(qo,""))}function be(t,e){var n="",r=t.split(/\s+/),o=e.split(/\s+/);t:for(var i=0;i<r.length;i++){for(var a=r[i],s=0;s<o.length;s++)if(a==o[s])continue t;n+=(n.length>0?" ":"")+a}return n}function ge(t){t=Or(t);var e=t.length;if(1>=e)return t;for(;e--;){var n=t[e];n.nodeType===io&&Nr.call(t,e,1)}return t}function ve(t,e){if(e&&k(e))return e;if(k(t)){var n=Ho.exec(t);if(n)return n[3]}}function ye(){var t={},e=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){ht(e,"controller"),w(e)?f(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(o,i){function a(t,e,n,o){if(!t||!w(t.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",o,e);t.$scope[e]=n}return function(r,s,l,u){var c,d,p,h;if(l=l===!0,u&&k(u)&&(h=u),k(r)){if(d=r.match(Ho),!d)throw Wo("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);p=d[1],h=h||d[3],r=t.hasOwnProperty(p)?t[p]:mt(s.$scope,p,!0)||(e?mt(i,p,!0):n),pt(r,p,!0)}if(l){var m=(Wr(r)?r[r.length-1]:r).prototype;c=Object.create(m||null),h&&a(s,h,c,p||r.name);var b;return b=f(function(){var t=o.invoke(r,c,s,p);return t!==c&&(w(t)||M(t))&&(c=t,h&&a(s,h,c,p||r.name)),c},{instance:c,identifier:h})}return c=o.instantiate(r,s,p),h&&a(s,h,c,p||r.name),c}}]}function xe(){this.$get=["$window",function(t){return Or(t.document)}]}function we(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function _e(t){return w(t)?$(t)?t.toISOString():X(t):t}function ke(){this.$get=function(){return function(t){if(!t)return"";var e=[];return a(t,function(t,n){null===t||y(t)||(Wr(t)?i(t,function(t,r){e.push(ot(n)+"="+ot(_e(t)))}):e.push(ot(n)+"="+ot(_e(t))))}),e.join("&")}}}function Ee(){this.$get=function(){return function(t){function e(t,r,o){null===t||y(t)||(Wr(t)?i(t,function(t,n){e(t,r+"["+(w(t)?n:"")+"]")}):w(t)&&!$(t)?a(t,function(t,n){e(t,r+(o?"":"[")+n+(o?"":"]"))}):n.push(ot(r)+"="+ot(_e(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function $e(t,e){if(k(t)){var n=t.replace(Jo,"").trim();if(n){var r=e("Content-Type");(r&&0===r.indexOf(Yo)||Me(n))&&(t=Y(n))}}return t}function Me(t){var e=t.match(Ko);return e&&Qo[e[0]].test(t)}function Ae(t){function e(t,e){t&&(r[t]=r[t]?r[t]+", "+e:e)}var n,r=gt();return k(t)?i(t.split("\n"),function(t){n=t.indexOf(":"),e(Cr(Xr(t.substr(0,n))),Xr(t.substr(n+1)))}):w(t)&&i(t,function(t,n){e(Cr(n),Xr(t))}),r}function Te(t){var e;return function(n){if(e||(e=Ae(t)),n){var r=e[Cr(n)];return void 0===r&&(r=null),r}return e}}function Se(t,e,n,r){return M(r)?r(t,e,n):(i(r,function(r){t=r(t,e,n)}),t)}function Ce(t){return t>=200&&300>t}function Fe(){var t=this.defaults={transformResponse:[$e],transformRequest:[function(t){return!w(t)||C(t)||I(t)||F(t)?t:X(t)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:V(Zo),put:V(Zo),patch:V(Zo)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},e=!1;this.useApplyAsync=function(t){return x(t)?(e=!!t,this):e};var o=!0;this.useLegacyPromiseExtensions=function(t){return x(t)?(o=!!t,this):o};var a=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,l,u,c,d,p){function h(e){function a(t){var e=f({},t);return e.data=Se(t.data,t.headers,t.status,u.transformResponse),Ce(t.status)?e:d.reject(e)}function s(t,e){var n,r={};return i(t,function(t,o){M(t)?(n=t(e),null!=n&&(r[o]=n)):r[o]=t}),r}function l(e){var n,r,o,i=t.headers,a=f({},e.headers);i=f({},i.common,i[Cr(e.method)]);t:for(n in i){r=Cr(n);for(o in a)if(Cr(o)===r)continue t;a[n]=i[n]}return s(a,V(e))}if(!w(e))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",e);if(!k(e.url))throw r("$http")("badreq","Http request configuration url must be a string.  Received: {0}",e.url);var u=f({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},e);u.headers=l(e),u.method=Fr(u.method),u.paramSerializer=k(u.paramSerializer)?p.get(u.paramSerializer):u.paramSerializer;var c=function(e){var r=e.headers,o=Se(e.data,Te(r),n,e.transformRequest);return y(o)&&i(r,function(t,e){"content-type"===Cr(e)&&delete r[e]}),y(e.withCredentials)&&!y(t.withCredentials)&&(e.withCredentials=t.withCredentials),g(e,o).then(a,a)},h=[c,n],m=d.when(u);for(i(E,function(t){(t.request||t.requestError)&&h.unshift(t.request,t.requestError),(t.response||t.responseError)&&h.push(t.response,t.responseError)});h.length;){var b=h.shift(),v=h.shift();m=m.then(b,v)}return o?(m.success=function(t){return pt(t,"fn"),m.then(function(e){t(e.data,e.status,e.headers,u)}),m},m.error=function(t){return pt(t,"fn"),m.then(null,function(e){t(e.data,e.status,e.headers,u)}),m}):(m.success=ei("success"),m.error=ei("error")),m}function m(t){i(arguments,function(t){h[t]=function(e,n){return h(f({},n||{},{method:t,url:e}))}})}function b(t){i(arguments,function(t){h[t]=function(e,n,r){return h(f({},r||{},{method:t,url:e,data:n}))}})}function g(r,o){function i(t,n,r,o){function i(){a(n,t,r,o)}p&&(Ce(t)?p.put(E,[t,n,Ae(r),o]):p.remove(E)),e?c.$applyAsync(i):(i(),c.$$phase||c.$apply())}function a(t,e,n,o){e=e>=-1?e:0,(Ce(e)?b.resolve:b.reject)({data:t,status:e,headers:Te(n),config:r,statusText:o})}function u(t){a(t.data,t.status,V(t.headers()),t.statusText)}function f(){var t=h.pendingRequests.indexOf(r);-1!==t&&h.pendingRequests.splice(t,1)}var p,m,b=d.defer(),g=b.promise,k=r.headers,E=v(r.url,r.paramSerializer(r.params));if(h.pendingRequests.push(r),g.then(f,f),!r.cache&&!t.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(p=w(r.cache)?r.cache:w(t.cache)?t.cache:_),p&&(m=p.get(E),x(m)?R(m)?m.then(u,u):Wr(m)?a(m[1],m[0],V(m[2]),m[3]):a(m,200,{},"OK"):p.put(E,g)),y(m)){var $=Dn(r.url)?l()[r.xsrfCookieName||t.xsrfCookieName]:n;$&&(k[r.xsrfHeaderName||t.xsrfHeaderName]=$),s(r.method,E,o,i,k,r.timeout,r.withCredentials,r.responseType)}return g}function v(t,e){return e.length>0&&(t+=(-1==t.indexOf("?")?"?":"&")+e),t}var _=u("$http");t.paramSerializer=k(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var E=[];return i(a,function(t){E.unshift(k(t)?p.get(t):p.invoke(t))}),h.pendingRequests=[],m("get","delete","head","jsonp"),b("post","put","patch"),h.defaults=t,h}]}function Ie(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function De(){this.$get=["$browser","$window","$document","$xhrFactory",function(t,e,n,r){return Re(t,r,t.defer,e.angular.callbacks,n[0])}]}function Re(t,e,n,r,o){function a(t,e,n){var i=o.createElement("script"),a=null;return i.type="text/javascript",i.src=t,i.async=!0,a=function(t){po(i,"load",a),po(i,"error",a),o.body.removeChild(i),i=null;var s=-1,l="unknown";t&&("load"!==t.type||r[e].called||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},fo(i,"load",a),fo(i,"error",a),o.body.appendChild(i),a}return function(o,s,l,u,c,f,d,p){function h(){v&&v(),w&&w.abort()}function b(e,r,o,i,a){x(E)&&n.cancel(E),v=w=null,e(r,o,i,a),t.$$completeOutstandingRequest(m)}if(t.$$incOutstandingRequestCount(),s=s||t.url(),"jsonp"==Cr(o)){var g="_"+(r.counter++).toString(36);r[g]=function(t){r[g].data=t,r[g].called=!0};var v=a(s.replace("JSON_CALLBACK","angular.callbacks."+g),g,function(t,e){b(u,t,r[g].data,"",e),r[g]=m})}else{var w=e(o,s);w.open(o,s,!0),i(c,function(t,e){x(t)&&w.setRequestHeader(e,t)}),w.onload=function(){var t=w.statusText||"",e="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=e?200:"file"==In(s).protocol?404:0),b(u,n,e,w.getAllResponseHeaders(),t)};var _=function(){b(u,-1,null,null,"")};if(w.onerror=_,w.onabort=_,d&&(w.withCredentials=!0),p)try{w.responseType=p}catch(k){if("json"!==p)throw k}w.send(y(l)?null:l)}if(f>0)var E=n(h,f);else R(f)&&f.then(h)}}function Oe(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,o){function i(t){return"\\\\\\"+t}function a(n){return n.replace(p,t).replace(h,e)}function s(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=X(t)}return t}function l(t,e,n,r){var o;return o=t.$watch(function(t){return o(),r(t)},e,n)}function u(i,u,p,h){function m(t){try{return t=I(t),h&&!x(t)?t:s(t)}catch(e){r(ni.interr(i,e))}}if(!i.length||-1===i.indexOf(t)){var b;if(!u){var v=a(i);b=g(v),b.exp=i,b.expressions=[],b.$$watchDelegate=l}return b}h=!!h;for(var w,_,k,E=0,$=[],A=[],T=i.length,S=[],C=[];T>E;){if(-1==(w=i.indexOf(t,E))||-1==(_=i.indexOf(e,w+c))){E!==T&&S.push(a(i.substring(E)));break}E!==w&&S.push(a(i.substring(E,w))),k=i.substring(w+c,_),$.push(k),A.push(n(k,m)),E=_+d,C.push(S.length),S.push("")}if(p&&S.length>1&&ni.throwNoconcat(i),!u||$.length){var F=function(t){for(var e=0,n=$.length;n>e;e++){if(h&&y(t[e]))return;S[C[e]]=t[e]}return S.join("")},I=function(t){return p?o.getTrusted(p,t):o.valueOf(t)};return f(function(t){var e=0,n=$.length,o=new Array(n);try{for(;n>e;e++)o[e]=A[e](t);return F(o)}catch(a){r(ni.interr(i,a))}},{exp:i,expressions:$,$$watchDelegate:function(t,e){var n;return t.$watchGroup(A,function(r,o){var i=F(r);M(e)&&e.call(this,i,r!==o?n:i,t),n=i})}})}}var c=t.length,d=e.length,p=new RegExp(t.replace(/./g,i),"g"),h=new RegExp(e.replace(/./g,i),"g");return u.startSymbol=function(){return t},u.endSymbol=function(){return e},u}]}function Pe(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,o){function i(i,s,l,u){function c(){f?i.apply(null,d):i(m)}var f=arguments.length>4,d=f?q(arguments,4):[],p=e.setInterval,h=e.clearInterval,m=0,b=x(u)&&!u,g=(b?r:n).defer(),v=g.promise;return l=x(l)?l:0,v.$$intervalId=p(function(){b?o.defer(c):t.$evalAsync(c),g.notify(m++),l>0&&m>=l&&(g.resolve(m),h(v.$$intervalId),delete a[v.$$intervalId]),b||t.$apply()},s),a[v.$$intervalId]=g,v}var a={};return i.cancel=function(t){return t&&t.$$intervalId in a?(a[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete a[t.$$intervalId],!0):!1},i}]}function je(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=rt(e[n]);return e.join("/")}function Le(t,e){var n=In(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=p(n.port)||oi[n.protocol]||null}function Ne(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var r=In(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=et(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Ue(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function Be(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Ve(t){return t.replace(/(#.+)|#$/,"$1")}function ze(t){return t.substr(0,Be(t).lastIndexOf("/")+1)}function Ge(t){return t.substring(0,t.indexOf("/",t.indexOf("//")+2))}function qe(t,e,n){this.$$html5=!0,n=n||"",Le(t,this),this.$$parse=function(t){var n=Ue(e,t);if(!k(n))throw ii("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);Ne(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=nt(this.$$search),n=this.$$hash?"#"+rt(this.$$hash):"";this.$$url=je(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var i,a,s;return x(i=Ue(t,r))?(a=i,s=x(i=Ue(n,i))?e+(Ue("/",i)||i):t+a):x(i=Ue(e,r))?s=e+i:e==r+"/"&&(s=e),s&&this.$$parse(s),!!s}}function We(t,e,n){Le(t,this),this.$$parse=function(r){function o(t,e,n){var r,o=/^\/[A-Z]:(\/.*)/;return 0===e.indexOf(n)&&(e=e.replace(n,"")),o.exec(e)?t:(r=o.exec(t),r?r[1]:t)}var i,a=Ue(t,r)||Ue(e,r);y(a)||"#"!==a.charAt(0)?this.$$html5?i=a:(i="",y(a)&&(t=r,this.replace())):(i=Ue(n,a),y(i)&&(i=a)),Ne(i,this),this.$$path=o(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=nt(this.$$search),r=this.$$hash?"#"+rt(this.$$hash):"";this.$$url=je(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Be(t)==Be(e)?(this.$$parse(e),!0):!1}}function He(t,e,n){this.$$html5=!0,We.apply(this,arguments),this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var i,a;return t==Be(r)?i=r:(a=Ue(e,r))?i=t+n+a:e===r+"/"&&(i=e),i&&this.$$parse(i),!!i},this.$$compose=function(){var e=nt(this.$$search),r=this.$$hash?"#"+rt(this.$$hash):"";this.$$url=je(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url}}function Xe(t){return function(){return this[t]}}function Ye(t,e){return function(n){return y(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function Ze(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return x(e)?(t=e,this):t},this.html5Mode=function(t){return D(t)?(e.enabled=t,this):w(t)?(D(t.enabled)&&(e.enabled=t.enabled),D(t.requireBase)&&(e.requireBase=t.requireBase),D(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,o,i,a){function s(t,e,n){var o=u.url(),i=u.$$state;try{r.url(t,e,n),u.$$state=r.state()}catch(a){throw u.url(o),u.$$state=i,a}}function l(t,e){n.$broadcast("$locationChangeSuccess",u.absUrl(),t,u.$$state,e)}var u,c,f,d=r.baseHref(),p=r.url();if(e.enabled){if(!d&&e.requireBase)throw ii("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Ge(p)+(d||"/"),c=o.history?qe:He}else f=Be(p),c=We;var h=ze(f);u=new c(f,h,"#"+t),u.$$parseLinkUrl(p,p),u.$$state=r.state();var m=/^\s*(javascript|mailto):/i;i.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var o=Or(t.target);"a"!==N(o[0]);)if(o[0]===i[0]||!(o=o.parent())[0])return;var s=o.prop("href"),l=o.attr("href")||o.attr("xlink:href");w(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=In(s.animVal).href),m.test(s)||!s||o.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(s,l)&&(t.preventDefault(),u.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Ve(u.absUrl())!=Ve(p)&&r.url(u.absUrl(),!0);var b=!0;return r.onUrlChange(function(t,e){return y(Ue(h,t))?void(a.location.href=t):(n.$evalAsync(function(){var r,o=u.absUrl(),i=u.$$state;t=Ve(t),u.$$parse(t),u.$$state=e,r=n.$broadcast("$locationChangeStart",t,o,e,i).defaultPrevented,u.absUrl()===t&&(r?(u.$$parse(o),u.$$state=i,s(o,!1,i)):(b=!1,l(o,i)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var t=Ve(r.url()),e=Ve(u.absUrl()),i=r.state(),a=u.$$replace,c=t!==e||u.$$html5&&o.history&&i!==u.$$state;(b||c)&&(b=!1,n.$evalAsync(function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,i).defaultPrevented;u.absUrl()===e&&(r?(u.$$parse(t),u.$$state=i):(c&&s(e,a,i===u.$$state?null:u.$$state),l(t,i)))})),u.$$replace=!1}),u}]}function Ke(){var t=!0,e=this;this.debugEnabled=function(e){return x(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function o(t){var e=n.console||{},o=e[t]||e.log||m,a=!1;try{a=!!o.apply}catch(s){}return a?function(){var t=[];return i(arguments,function(e){t.push(r(e))}),o.apply(e,t)}:function(t,e){o(t,null==e?"":e)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function Qe(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw si("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function Je(t){return t+""}function tn(t,e){if(t){if(t.constructor===t)throw si("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw si("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw si("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw si("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function en(t,e){if(t){if(t.constructor===t)throw si("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===li||t===ui||t===ci)throw si("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function nn(t,e){if(t&&(t===0..constructor||t===(!1).constructor||t==="".constructor||t==={}.constructor||t===[].constructor||t===Function.constructor))throw si("isecaf","Assigning to a constructor is disallowed! Expression: {0}",e)}function rn(t,e){return"undefined"!=typeof t?t:e}function on(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function an(t,e){var n=t(e);return!n.$stateful}function sn(t,e){var n,r;switch(t.type){case hi.Program:n=!0,i(t.body,function(t){sn(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case hi.Literal:t.constant=!0,t.toWatch=[];break;case hi.UnaryExpression:sn(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case hi.BinaryExpression:sn(t.left,e),sn(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case hi.LogicalExpression:sn(t.left,e),sn(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case hi.ConditionalExpression:sn(t.test,e),sn(t.alternate,e),sn(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case hi.Identifier:t.constant=!1,t.toWatch=[t];break;case hi.MemberExpression:sn(t.object,e),t.computed&&sn(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case hi.CallExpression:n=t.filter?an(e,t.callee.name):!1,r=[],i(t.arguments,function(t){sn(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&an(e,t.callee.name)?r:[t];break;case hi.AssignmentExpression:sn(t.left,e),sn(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case hi.ArrayExpression:n=!0,r=[],i(t.elements,function(t){sn(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=r;break;case hi.ObjectExpression:n=!0,r=[],i(t.properties,function(t){sn(t.value,e),n=n&&t.value.constant,t.value.constant||r.push.apply(r,t.value.toWatch)}),t.constant=n,t.toWatch=r;break;case hi.ThisExpression:t.constant=!1,t.toWatch=[];break;case hi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function ln(t){if(1==t.length){var e=t[0].expression,r=e.toWatch;return 1!==r.length?r:r[0]!==e?r:n}}function un(t){return t.type===hi.Identifier||t.type===hi.MemberExpression}function cn(t){return 1===t.body.length&&un(t.body[0].expression)?{type:hi.AssignmentExpression,left:t.body[0].expression,right:{type:hi.NGValueParameter},operator:"="}:void 0}function fn(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===hi.Literal||t.body[0].expression.type===hi.ArrayExpression||t.body[0].expression.type===hi.ObjectExpression)}function dn(t){return t.constant}function pn(t,e){this.astBuilder=t,this.$filter=e}function hn(t,e){this.astBuilder=t,this.$filter=e}function mn(t){return"constructor"==t}function bn(t){return M(t.valueOf)?t.valueOf():bi.call(t)}function gn(){var t=gt(),e=gt(),r={"true":!0,"false":!1,"null":null,undefined:n};this.addLiteral=function(t,e){r[t]=e},this.$get=["$filter",function(o){function a(n,r,i){var a,l,h;switch(i=i||v,typeof n){case"string":n=n.trim(),h=n;var y=i?e:t;if(a=y[h],!a){":"===n.charAt(0)&&":"===n.charAt(1)&&(l=!0,n=n.substring(2));var x=i?g:b,w=new pi(x),_=new mi(w,o,x);a=_.parse(n),a.constant?a.$$watchDelegate=d:l?a.$$watchDelegate=a.literal?f:c:a.inputs&&(a.$$watchDelegate=u),i&&(a=s(a)),y[h]=a}return p(a,r);
case"function":return p(n,r);default:return p(m,r)}}function s(t){function e(e,n,r,o){var i=v;v=!0;try{return t(e,n,r,o)}finally{v=i}}if(!t)return t;e.$$watchDelegate=t.$$watchDelegate,e.assign=s(t.assign),e.constant=t.constant,e.literal=t.literal;for(var n=0;t.inputs&&n<t.inputs.length;++n)t.inputs[n]=s(t.inputs[n]);return e.inputs=t.inputs,e}function l(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=bn(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function u(t,e,r,o,i){var a,s=o.inputs;if(1===s.length){var u=l;return s=s[0],t.$watch(function(t){var e=s(t);return l(e,u)||(a=o(t,n,n,[e]),u=e&&bn(e)),a},e,r,i)}for(var c=[],f=[],d=0,p=s.length;p>d;d++)c[d]=l,f[d]=null;return t.$watch(function(t){for(var e=!1,r=0,i=s.length;i>r;r++){var u=s[r](t);(e||(e=!l(u,c[r])))&&(f[r]=u,c[r]=u&&bn(u))}return e&&(a=o(t,n,n,f)),a},e,r,i)}function c(t,e,n,r){var o,i;return o=t.$watch(function(t){return r(t)},function(t,n,r){i=t,M(e)&&e.apply(this,arguments),x(t)&&r.$$postDigest(function(){x(i)&&o()})},n)}function f(t,e,n,r){function o(t){var e=!0;return i(t,function(t){x(t)||(e=!1)}),e}var a,s;return a=t.$watch(function(t){return r(t)},function(t,n,r){s=t,M(e)&&e.call(this,t,n,r),o(t)&&r.$$postDigest(function(){o(s)&&a()})},n)}function d(t,e,n,r){var o;return o=t.$watch(function(t){return o(),r(t)},e,n)}function p(t,e){if(!e)return t;var n=t.$$watchDelegate,r=!1,o=n!==f&&n!==c,i=o?function(n,o,i,a){var s=r&&a?a[0]:t(n,o,i,a);return e(s,n,o)}:function(n,r,o,i){var a=t(n,r,o,i),s=e(a,n,r);return x(a)?s:a};return t.$$watchDelegate&&t.$$watchDelegate!==u?i.$$watchDelegate=t.$$watchDelegate:e.$stateful||(i.$$watchDelegate=u,r=!t.inputs,i.inputs=t.inputs?t.inputs:[t]),i}var h=Zr().noUnsafeEval,b={csp:h,expensiveChecks:!1,literals:B(r)},g={csp:h,expensiveChecks:!0,literals:B(r)},v=!1;return a.$$runningExpensiveChecks=function(){return v},a}]}function vn(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return xn(function(e){t.$evalAsync(e)},e)}]}function yn(){this.$get=["$browser","$exceptionHandler",function(t,e){return xn(function(e){t.defer(e)},e)}]}function xn(t,e){function o(){this.$$state={status:0}}function a(t,e){return function(n){e.call(t,n)}}function s(t){var r,o,i;i=t.pending,t.processScheduled=!1,t.pending=n;for(var a=0,s=i.length;s>a;++a){o=i[a][0],r=i[a][t.status];try{M(r)?o.resolve(r(t.value)):1===t.status?o.resolve(t.value):o.reject(t.value)}catch(l){o.reject(l),e(l)}}}function l(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){s(e)}))}function u(){this.promise=new o}function c(t){var e=new u,n=0,r=Wr(t)?[]:{};return i(t,function(t,o){n++,g(t).then(function(t){r.hasOwnProperty(o)||(r[o]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(o)||e.reject(t)})}),0===n&&e.resolve(r),e.promise}var d=r("$q",TypeError),p=function(){var t=new u;return t.resolve=a(t,t.resolve),t.reject=a(t,t.reject),t.notify=a(t,t.notify),t};f(o.prototype,{then:function(t,e,n){if(y(t)&&y(e)&&y(n))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return b(e,!0,t)},function(e){return b(e,!1,t)},e)}}),f(u.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(d("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){function n(t){s||(s=!0,i.$$resolve(t))}function r(t){s||(s=!0,i.$$reject(t))}var o,i=this,s=!1;try{(w(t)||M(t))&&(o=t&&t.then),M(o)?(this.promise.$$state.status=-1,o.call(t,n,r,a(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,l(this.promise.$$state))}catch(u){r(u),e(u)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&t(function(){for(var t,o,i=0,a=r.length;a>i;i++){o=r[i][0],t=r[i][3];try{o.notify(M(t)?t(n):n)}catch(s){e(s)}}})}});var h=function(t){var e=new u;return e.reject(t),e.promise},m=function(t,e){var n=new u;return e?n.resolve(t):n.reject(t),n.promise},b=function(t,e,n){var r=null;try{M(n)&&(r=n())}catch(o){return m(o,!1)}return R(r)?r.then(function(){return m(t,e)},function(t){return m(t,!1)}):m(t,e)},g=function(t,e,n,r){var o=new u;return o.resolve(t),o.promise.then(e,n,r)},v=g,x=function(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}if(!M(t))throw d("norslvr","Expected resolverFn, got '{0}'",t);var r=new u;return t(e,n),r.promise};return x.prototype=o.prototype,x.defer=p,x.reject=h,x.when=g,x.resolve=v,x.all=c,x}function wn(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,o=!!n,i=o?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return i.supported=o,i}]}function _n(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=l(),this.$$ChildScope=null}return e.prototype=t,e}var e=10,n=r("$rootScope"),a=null,s=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$exceptionHandler","$parse","$browser",function(r,u,c){function f(t){t.currentScope.$$destroyed=!0}function d(t){9===Rr&&(t.$$childHead&&d(t.$$childHead),t.$$nextSibling&&d(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function p(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function h(t){if(E.$$phase)throw n("inprog","{0} already in progress",E.$$phase);E.$$phase=t}function b(){E.$$phase=null}function g(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function v(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function x(){}function _(){for(;T.length;)try{T.shift()()}catch(t){r(t)}s=null}function k(){null===s&&(s=c.defer(function(){E.$apply(_)}))}p.prototype={constructor:p,$new:function(e,n){var r;return n=n||this,e?(r=new p,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(e||n!=this)&&r.$on("$destroy",f),r},$watch:function(t,e,n,r){var o=u(t);if(o.$$watchDelegate)return o.$$watchDelegate(this,e,n,o,t);var i=this,s=i.$$watchers,l={fn:e,last:x,get:o,exp:r||t,eq:!!n};return a=null,M(e)||(l.fn=m),s||(s=i.$$watchers=[]),s.unshift(l),g(this,1),function(){U(s,l)>=0&&g(i,-1),a=null}},$watchGroup:function(t,e){function n(){l=!1,u?(u=!1,e(o,o,s)):e(o,r,s)}var r=new Array(t.length),o=new Array(t.length),a=[],s=this,l=!1,u=!0;if(!t.length){var c=!0;return s.$evalAsync(function(){c&&e(o,o,s)}),function(){c=!1}}return 1===t.length?this.$watch(t[0],function(t,n,i){o[0]=t,r[0]=n,e(o,t===n?o:r,i)}):(i(t,function(t,e){var i=s.$watch(t,function(t,i){o[e]=t,r[e]=i,l||(l=!0,s.$evalAsync(n))});a.push(i)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){i=t;var e,n,r,s,l;if(!y(i)){if(w(i))if(o(i)){a!==p&&(a=p,b=a.length=0,f++),e=i.length,b!==e&&(f++,a.length=b=e);for(var u=0;e>u;u++)l=a[u],s=i[u],r=l!==l&&s!==s,r||l===s||(f++,a[u]=s)}else{a!==h&&(a=h={},b=0,f++),e=0;for(n in i)Sr.call(i,n)&&(e++,s=i[n],l=a[n],n in a?(r=l!==l&&s!==s,r||l===s||(f++,a[n]=s)):(b++,a[n]=s,f++));if(b>e){f++;for(n in a)Sr.call(i,n)||(b--,delete a[n])}}else a!==i&&(a=i,f++);return f}}function r(){if(m?(m=!1,e(i,i,l)):e(i,s,l),c)if(w(i))if(o(i)){s=new Array(i.length);for(var t=0;t<i.length;t++)s[t]=i[t]}else{s={};for(var n in i)Sr.call(i,n)&&(s[n]=i[n])}else s=i}n.$stateful=!0;var i,a,s,l=this,c=e.length>1,f=0,d=u(t,n),p=[],h={},m=!0,b=0;return this.$watch(d,r)},$digest:function(){var t,o,i,l,u,f,d,p,m,g,v,y,w=e,k=this,T=[];h("$digest"),c.$$checkUrlChange(),this===E&&null!==s&&(c.defer.cancel(s),_()),a=null;do{for(p=!1,g=k;$.length;){try{y=$.shift(),y.scope.$eval(y.expression,y.locals)}catch(S){r(S)}a=null}t:do{if(f=g.$$watchers)for(d=f.length;d--;)try{if(t=f[d])if(u=t.get,(o=u(g))===(i=t.last)||(t.eq?z(o,i):"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))){if(t===a){p=!1;break t}}else p=!0,a=t,t.last=t.eq?B(o,null):o,l=t.fn,l(o,i===x?o:i,g),5>w&&(v=4-w,T[v]||(T[v]=[]),T[v].push({msg:M(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:o,oldVal:i}))}catch(S){r(S)}if(!(m=g.$$watchersCount&&g.$$childHead||g!==k&&g.$$nextSibling))for(;g!==k&&!(m=g.$$nextSibling);)g=g.$parent}while(g=m);if((p||$.length)&&!w--)throw b(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,T)}while(p||$.length);for(b();A.length;)try{A.shift()()}catch(S){r(S)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&c.$$applicationDestroyed(),g(this,-this.$$watchersCount);for(var e in this.$$listenerCount)v(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=m,this.$on=this.$watch=this.$watchGroup=function(){return m},this.$$listeners={},this.$$nextSibling=null,d(this)}},$eval:function(t,e){return u(t)(this,e)},$evalAsync:function(t,e){E.$$phase||$.length||c.defer(function(){$.length&&E.$digest()}),$.push({scope:this,expression:u(t),locals:e})},$$postDigest:function(t){A.push(t)},$apply:function(t){try{h("$apply");try{return this.$eval(t)}finally{b()}}catch(e){r(e)}finally{try{E.$digest()}catch(e){throw r(e),e}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&T.push(e),t=u(t),k()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++;while(r=r.$parent);var o=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,v(o,1,t))}},$emit:function(t,e){var n,o,i,a=[],s=this,l=!1,u={name:t,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=G([u],arguments,1);do{for(n=s.$$listeners[t]||a,u.currentScope=s,o=0,i=n.length;i>o;o++)if(n[o])try{n[o].apply(null,c)}catch(f){r(f)}else n.splice(o,1),o--,i--;if(l)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(t,e){var n=this,o=n,i=n,a={name:t,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return a;for(var s,l,u,c=G([a],arguments,1);o=i;){for(a.currentScope=o,s=o.$$listeners[t]||[],l=0,u=s.length;u>l;l++)if(s[l])try{s[l].apply(null,c)}catch(f){r(f)}else s.splice(l,1),l--,u--;if(!(i=o.$$listenerCount[t]&&o.$$childHead||o!==n&&o.$$nextSibling))for(;o!==n&&!(i=o.$$nextSibling);)o=o.$parent}return a.currentScope=null,a}};var E=new p,$=E.$$asyncQueue=[],A=E.$$postDigestQueue=[],T=E.$$applyAsyncQueue=[];return E}]}function kn(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return x(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return x(t)?(e=t,this):e},this.$get=function(){return function(n,r){var o,i=r?e:t;return o=In(n).href,""===o||o.match(i)?n:"unsafe:"+o}}}function En(t){if("self"===t)return t;if(k(t)){if(t.indexOf("***")>-1)throw gi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Yr(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(A(t))return new RegExp("^"+t.source+"$");throw gi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function $n(t){var e=[];return x(t)&&i(t,function(t){e.push(En(t))}),e}function Mn(){this.SCE_CONTEXTS=vi;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=$n(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=$n(t)),e},this.$get=["$injector",function(n){function r(t,e){return"self"===t?Dn(e):!!t.exec(e.href)}function o(n){var o,i,a=In(n.toString()),s=!1;for(o=0,i=t.length;i>o;o++)if(r(t[o],a)){s=!0;break}if(s)for(o=0,i=e.length;i>o;o++)if(r(e[o],a)){s=!1;break}return s}function i(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}function a(t,e){var n=f.hasOwnProperty(t)?f[t]:null;if(!n)throw gi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||y(e)||""===e)return e;if("string"!=typeof e)throw gi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)}function s(t){return t instanceof c?t.$$unwrapTrustedValue():t}function l(t,e){if(null===e||y(e)||""===e)return e;var n=f.hasOwnProperty(t)?f[t]:null;if(n&&e instanceof n)return e.$$unwrapTrustedValue();if(t===vi.RESOURCE_URL){if(o(e))return e;throw gi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===vi.HTML)return u(e);throw gi("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(t){throw gi("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var c=i(),f={};return f[vi.HTML]=i(c),f[vi.CSS]=i(c),f[vi.URL]=i(c),f[vi.JS]=i(c),f[vi.RESOURCE_URL]=i(f[vi.URL]),{trustAs:a,getTrusted:l,valueOf:s}}]}function An(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>Rr)throw gi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=V(vi);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=b),r.parseAs=function(t,n){var o=e(n);return o.literal&&o.constant?o:e(n,function(e){return r.getTrusted(t,e)})};var o=r.parseAs,a=r.getTrusted,s=r.trustAs;return i(vi,function(t,e){var n=Cr(e);r[kt("parse_as_"+n)]=function(e){return o(t,e)},r[kt("get_trusted_"+n)]=function(e){return a(t,e)},r[kt("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function Tn(){this.$get=["$window","$document",function(t,e){var n,r,o={},i=p((/android (\d+)/.exec(Cr((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,u=s.body&&s.body.style,c=!1,f=!1;if(u){for(var d in u)if(r=l.exec(d)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),c=!!("transition"in u||n+"Transition"in u),f=!!("animation"in u||n+"Animation"in u),!i||c&&f||(c=k(u.webkitTransition),f=k(u.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>i||a),hasEvent:function(t){if("input"===t&&11>=Rr)return!1;if(y(o[t])){var e=s.createElement("div");o[t]="on"+t in e}return o[t]},csp:Zr(),vendorPrefix:n,transitions:c,animations:f,android:i}}]}function Sn(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,n,r,o){function i(a,s){function l(t){if(!s)throw Go("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText);return r.reject(t)}i.totalPendingRequests++,k(a)&&e.get(a)||(a=o.getTrustedResourceUrl(a));var u=n.defaults&&n.defaults.transformResponse;return Wr(u)?u=u.filter(function(t){return t!==$e}):u===$e&&(u=null),n.get(a,f({cache:e,transformResponse:u},t))["finally"](function(){i.totalPendingRequests--}).then(function(t){return e.put(a,t.data),t.data},l)}return i.totalPendingRequests=0,i}]}function Cn(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={};return r.findBindings=function(t,e,n){var r=t.getElementsByClassName("ng-binding"),o=[];return i(r,function(t){var r=Gr.element(t).data("$binding");r&&i(r,function(r){if(n){var i=new RegExp("(^|\\s)"+Yr(e)+"(\\s|\\||$)");i.test(r)&&o.push(t)}else-1!=r.indexOf(e)&&o.push(t)})}),o},r.findModels=function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],o=0;o<r.length;++o){var i=n?"=":"*=",a="["+r[o]+"model"+i+'"'+e+'"]',s=t.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(e){e!==n.url()&&(n.url(e),t.$digest())},r.whenStable=function(t){e.notifyWhenNoOutstandingRequests(t)},r}]}function Fn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,o){function i(i,s,l){M(i)||(l=s,s=i,i=m);var u,c=q(arguments,3),f=x(l)&&!l,d=(f?r:n).defer(),p=d.promise;return u=e.defer(function(){try{d.resolve(i.apply(null,c))}catch(e){d.reject(e),o(e)}finally{delete a[p.$$timeoutId]}f||t.$apply()},s),p.$$timeoutId=u,a[u]=d,p}var a={};return i.cancel=function(t){return t&&t.$$timeoutId in a?(a[t.$$timeoutId].reject("canceled"),delete a[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},i}]}function In(t){var e=t;return Rr&&(yi.setAttribute("href",e),e=yi.href),yi.setAttribute("href",e),{href:yi.href,protocol:yi.protocol?yi.protocol.replace(/:$/,""):"",host:yi.host,search:yi.search?yi.search.replace(/^\?/,""):"",hash:yi.hash?yi.hash.replace(/^#/,""):"",hostname:yi.hostname,port:yi.port,pathname:"/"===yi.pathname.charAt(0)?yi.pathname:"/"+yi.pathname}}function Dn(t){var e=k(t)?In(t):t;return e.protocol===xi.protocol&&e.host===xi.host}function Rn(){this.$get=g(t)}function On(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var n=t[0]||{},r={},o="";return function(){var t,i,a,s,l,u=n.cookie||"";if(u!==o)for(o=u,t=o.split("; "),r={},a=0;a<t.length;a++)i=t[a],s=i.indexOf("="),s>0&&(l=e(i.substring(0,s)),y(r[l])&&(r[l]=e(i.substring(s+1))));return r}}function Pn(){this.$get=On}function jn(t){function e(r,o){if(w(r)){var a={};return i(r,function(t,n){a[n]=e(n,t)}),a}return t.factory(r+n,o)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",Vn),e("date",rr),e("filter",Ln),e("json",or),e("limitTo",ir),e("lowercase",Ai),e("number",zn),e("orderBy",ar),e("uppercase",Ti)}function Ln(){return function(t,e,n){if(!o(t)){if(null==t)return t;throw r("filter")("notarray","Expected array but received: {0}",t)}var i,a,s=Bn(e);switch(s){case"function":i=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":i=Nn(e,n,a);break;default:return t}return Array.prototype.filter.call(t,i)}}function Nn(t,e,n){var r,o=w(t)&&"$"in t;return e===!0?e=z:M(e)||(e=function(t,e){return y(t)?!1:null===t||null===e?t===e:w(e)||w(t)&&!v(t)?!1:(t=Cr(""+t),e=Cr(""+e),-1!==t.indexOf(e))}),r=function(r){return o&&!w(r)?Un(r,t.$,e,!1):Un(r,t,e,n)}}function Un(t,e,n,r,o){var i=Bn(t),a=Bn(e);if("string"===a&&"!"===e.charAt(0))return!Un(t,e.substring(1),n,r);if(Wr(t))return t.some(function(t){return Un(t,e,n,r)});switch(i){case"object":var s;if(r){for(s in t)if("$"!==s.charAt(0)&&Un(t[s],e,n,!0))return!0;return o?!1:Un(t,e,n,!1)}if("object"===a){for(s in e){var l=e[s];if(!M(l)&&!y(l)){var u="$"===s,c=u?t:t[s];if(!Un(c,l,n,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function Bn(t){return null===t?"null":typeof t}function Vn(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return y(n)&&(n=e.CURRENCY_SYM),y(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:Wn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function zn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Wn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Gn(t){var e,n,r,o,i,a=0;for((n=t.indexOf(_i))>-1&&(t=t.replace(_i,"")),(r=t.search(/e/i))>0?(0>n&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):0>n&&(n=t.length),r=0;t.charAt(r)==ki;r++);if(r==(i=t.length))e=[0],n=1;else{for(i--;t.charAt(i)==ki;)i--;for(n-=r,e=[],o=0;i>=r;r++,o++)e[o]=+t.charAt(r)}return n>wi&&(e=e.splice(0,wi-1),a=n-1,n=1),{d:e,e:a,i:n}}function qn(t,e,n,r){var o=t.d,i=o.length-t.i;e=y(e)?Math.min(Math.max(n,i),r):+e;var a=e+t.i,s=o[a];if(a>0){o.splice(Math.max(t.i,a));for(var l=a;l<o.length;l++)o[l]=0}else{i=Math.max(0,i),t.i=1,o.length=Math.max(1,a=e+1),o[0]=0;for(var u=1;a>u;u++)o[u]=0}if(s>=5)if(0>a-1){for(var c=0;c>a;c--)o.unshift(0),t.i++;o.unshift(1),t.i++}else o[a-1]++;for(;i<Math.max(0,e);i++)o.push(0);var f=o.reduceRight(function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)},0);f&&(o.unshift(f),t.i++)}function Wn(t,e,n,r,o){if(!k(t)&&!E(t)||isNaN(t))return"";var i,a=!isFinite(t),s=!1,l=Math.abs(t)+"",u="";if(a)u="";else{i=Gn(l),qn(i,o,e.minFrac,e.maxFrac);var c=i.d,f=i.i,d=i.e,p=[];for(s=c.reduce(function(t,e){return t&&!e},!0);0>f;)c.unshift(0),f++;f>0?p=c.splice(f):(p=c,c=[0]);var h=[];for(c.length>e.lgSize&&h.unshift(c.splice(-e.lgSize).join(""));c.length>e.gSize;)h.unshift(c.splice(-e.gSize).join(""));c.length&&h.unshift(c.join("")),u=h.join(n),p.length&&(u+=r+p.join("")),d&&(u+="e+"+d)}return 0>t&&!s?e.negPre+u+e.negSuf:e.posPre+u+e.posSuf}function Hn(t,e,n,r){var o="";for((0>t||r&&0>=t)&&(r?t=-t+1:(t=-t,o="-")),t=""+t;t.length<e;)t=ki+t;return n&&(t=t.substr(t.length-e)),o+t}function Xn(t,e,n,r,o){return n=n||0,function(i){var a=i["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),Hn(a,e,r,o)}}function Yn(t,e,n){return function(r,o){var i=r["get"+t](),a=(n?"STANDALONE":"")+(e?"SHORT":""),s=Fr(a+t);return o[s][i]}}function Zn(t,e,n){var r=-1*n,o=r>=0?"+":"";return o+=Hn(Math[r>0?"floor":"ceil"](r/60),2)+Hn(Math.abs(r%60),2)}function Kn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function Qn(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Jn(t){return function(e){var n=Kn(e.getFullYear()),r=Qn(e),o=+r-+n,i=1+Math.round(o/6048e5);return Hn(i,t)}}function tr(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function er(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}function nr(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}function rr(t){function e(t){var e;if(e=t.match(n)){var r=new Date(0),o=0,i=0,a=e[8]?r.setUTCFullYear:r.setFullYear,s=e[8]?r.setUTCHours:r.setHours;e[9]&&(o=p(e[9]+e[10]),i=p(e[9]+e[11])),a.call(r,p(e[1]),p(e[2])-1,p(e[3]));var l=p(e[4]||0)-o,u=p(e[5]||0)-i,c=p(e[6]||0),f=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(r,l,u,c,f),r}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,o){var a,s,l="",u=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,k(n)&&(n=Mi.test(n)?p(n):e(n)),E(n)&&(n=new Date(n)),!$(n)||!isFinite(n.getTime()))return n;for(;r;)s=$i.exec(r),s?(u=G(u,s,1),r=u.pop()):(u.push(r),r=null);var c=n.getTimezoneOffset();return o&&(c=Z(o,c),n=Q(n,o,!0)),i(u,function(e){a=Ei[e],l+=a?a(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function or(){return function(t,e){return y(e)&&(e=2),X(t,e)}}function ir(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):p(e),isNaN(e)?t:(E(t)&&(t=t.toString()),Wr(t)||k(t)?(n=!n||isNaN(n)?0:p(n),n=0>n?Math.max(0,t.length+n):n,e>=0?t.slice(n,n+e):0===n?t.slice(e,t.length):t.slice(Math.max(0,n+e),n)):t)}}function ar(t){function e(e,n){return n=n?-1:1,e.map(function(e){var r=1,o=b;if(M(e))o=e;else if(k(e)&&("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(r="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(o=t(e),o.constant))){var i=o();o=function(t){return t[i]}}return{get:o,descending:r*n}})}function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function i(t,e){return"function"==typeof t.valueOf&&(t=t.valueOf(),n(t))?t:v(t)&&(t=t.toString(),n(t))?t:e}function a(t,e){var n=typeof t;return null===t?(n="string",t="null"):"string"===n?t=t.toLowerCase():"object"===n&&(t=i(t,e)),{value:t,type:n}}function s(t,e){var n=0;return t.type===e.type?t.value!==e.value&&(n=t.value<e.value?-1:1):n=t.type<e.type?-1:1,n}return function(t,n,i){function l(t,e){return{value:t,predicateValues:c.map(function(n){return a(n.get(t),e)})}}function u(t,e){for(var n=0,r=0,o=c.length;o>r&&!(n=s(t.predicateValues[r],e.predicateValues[r])*c[r].descending);++r);return n}if(null==t)return t;if(!o(t))throw r("orderBy")("notarray","Expected array but received: {0}",t);Wr(n)||(n=[n]),0===n.length&&(n=["+"]);var c=e(n,i);c.push({get:function(){return{}},descending:i?-1:1});var f=Array.prototype.map.call(t,l);return f.sort(u),t=f.map(function(t){return t.value})}}function sr(t){return M(t)&&(t={link:t}),t.restrict=t.restrict||"AC",g(t)}function lr(t,e){t.$name=e}function ur(t,e,r,o,a){var s=this,l=[];s.$error={},s.$$success={},s.$pending=n,s.$name=a(e.name||e.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,s.$$parentForm=Fi,s.$rollbackViewValue=function(){i(l,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){i(l,function(t){t.$commitViewValue()})},s.$addControl=function(t){ht(t.$name,"input"),l.push(t),t.$name&&(s[t.$name]=t),t.$$parentForm=s},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],i(s.$pending,function(e,n){s.$setValidity(n,null,t)}),i(s.$error,function(e,n){s.$setValidity(n,null,t)}),i(s.$$success,function(e,n){s.$setValidity(n,null,t)}),U(l,t),t.$$parentForm=Fi},Er({ctrl:this,$element:t,set:function(t,e,n){var r=t[e];if(r){var o=r.indexOf(n);-1===o&&r.push(n)}else t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(U(r,n),0===r.length&&delete t[e])},$animate:o}),s.$setDirty=function(){o.removeClass(t,ma),o.addClass(t,ba),s.$dirty=!0,s.$pristine=!1,s.$$parentForm.$setDirty()},s.$setPristine=function(){o.setClass(t,ma,ba+" "+Ii),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,i(l,function(t){t.$setPristine()})},s.$setUntouched=function(){i(l,function(t){t.$setUntouched()})},s.$setSubmitted=function(){o.addClass(t,Ii),s.$submitted=!0,s.$$parentForm.$setSubmitted()}}function cr(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function fr(t,e,n,r,o,i){dr(t,e,n,r,o,i),cr(r)}function dr(t,e,n,r,o,i){var a=Cr(e[0].type);if(!o.android){var s=!1;e.on("compositionstart",function(t){s=!0}),e.on("compositionend",function(){s=!1,u()})}var l,u=function(t){if(l&&(i.defer.cancel(l),l=null),!s){var o=e.val(),u=t&&t.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(o=Xr(o)),(r.$viewValue!==o||""===o&&r.$$hasNativeValidators)&&r.$setViewValue(o,u)}};if(o.hasEvent("input"))e.on("input",u);else{var c=function(t,e,n){l||(l=i.defer(function(){l=null,e&&e.value===n||u(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||c(t,this,this.value)}),o.hasEvent("paste")&&e.on("paste cut",c)}e.on("change",u),Wi[a]&&r.$$hasNativeValidators&&a===n.type&&e.on(qi,function(t){if(!l){var e=this[Tr],n=e.badInput,r=e.typeMismatch;l=i.defer(function(){l=null,e.badInput===n&&e.typeMismatch===r||u(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function pr(t,e){if($(t))return t;if(k(t)){Vi.lastIndex=0;var n=Vi.exec(t);if(n){var r=+n[1],o=+n[2],i=0,a=0,s=0,l=0,u=Kn(r),c=7*(o-1);return e&&(i=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds()),new Date(r,0,u.getDate()+c,i,a,s,l)}}return NaN}function hr(t,e){return function(n,r){var o,a;if($(n))return n;if(k(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Pi.test(n))return new Date(n);if(t.lastIndex=0,o=t.exec(n))return o.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},i(o,function(t,n){n<e.length&&(a[e[n]]=+t)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function mr(t,e,r,o){return function(i,a,s,l,u,c,f){function d(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function p(t){return x(t)&&!$(t)?r(t)||n:t}br(i,a,s,l),dr(i,a,s,l,u,c);var h,m=l&&l.$options&&l.$options.timezone;if(l.$$parserName=t,l.$parsers.push(function(t){if(l.$isEmpty(t))return null;if(e.test(t)){var o=r(t,h);return m&&(o=Q(o,m)),o}return n}),l.$formatters.push(function(t){if(t&&!$(t))throw _a("datefmt","Expected `{0}` to be a date",t);return d(t)?(h=t,h&&m&&(h=Q(h,m,!0)),f("date")(t,o,m)):(h=null,"")}),x(s.min)||s.ngMin){var b;l.$validators.min=function(t){return!d(t)||y(b)||r(t)>=b},s.$observe("min",function(t){b=p(t),l.$validate()})}if(x(s.max)||s.ngMax){var g;l.$validators.max=function(t){return!d(t)||y(g)||r(t)<=g},s.$observe("max",function(t){g=p(t),l.$validate()})}}}function br(t,e,r,o){var i=e[0],a=o.$$hasNativeValidators=w(i.validity);a&&o.$parsers.push(function(t){var r=e.prop(Tr)||{};return r.badInput||r.typeMismatch?n:t})}function gr(t,e,r,o,i,a){if(br(t,e,r,o),dr(t,e,r,o,i,a),o.$$parserName="number",o.$parsers.push(function(t){return o.$isEmpty(t)?null:Ni.test(t)?parseFloat(t):n}),o.$formatters.push(function(t){if(!o.$isEmpty(t)){if(!E(t))throw _a("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t}),x(r.min)||r.ngMin){var s;o.$validators.min=function(t){return o.$isEmpty(t)||y(s)||t>=s},r.$observe("min",function(t){x(t)&&!E(t)&&(t=parseFloat(t,10)),s=E(t)&&!isNaN(t)?t:n,o.$validate()})}if(x(r.max)||r.ngMax){var l;o.$validators.max=function(t){return o.$isEmpty(t)||y(l)||l>=t},r.$observe("max",function(t){x(t)&&!E(t)&&(t=parseFloat(t,10)),l=E(t)&&!isNaN(t)?t:n,o.$validate()})}}function vr(t,e,n,r,o,i){dr(t,e,n,r,o,i),cr(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||ji.test(n)}}function yr(t,e,n,r,o,i){dr(t,e,n,r,o,i),cr(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Li.test(n)}}function xr(t,e,n,r){y(n.name)&&e.attr("name",l());var o=function(t){e[0].checked&&r.$setViewValue(n.value,t&&t.type)};e.on("click",o),r.$render=function(){var t=n.value;e[0].checked=t==r.$viewValue},n.$observe("value",r.$render)}function wr(t,e,n,r,o){var i;if(x(r)){if(i=t(r),!i.constant)throw _a("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return i(e)}return o}function _r(t,e,n,r,o,i,a,s){var l=wr(s,t,"ngTrueValue",n.ngTrueValue,!0),u=wr(s,t,"ngFalseValue",n.ngFalseValue,!1),c=function(t){r.$setViewValue(e[0].checked,t&&t.type)};e.on("click",c),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return t===!1},r.$formatters.push(function(t){return z(t,l)}),r.$parsers.push(function(t){return t?l:u})}function kr(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[];t:for(var r=0;r<t.length;r++){for(var o=t[r],i=0;i<e.length;i++)if(o==e[i])continue t;n.push(o)}return n}function o(t){var e=[];return Wr(t)?(i(t,function(t){e=e.concat(o(t))}),e):k(t)?t.split(" "):w(t)?(i(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}return{restrict:"AC",link:function(a,s,l){function u(t){var e=f(t,1);l.$addClass(e)}function c(t){var e=f(t,-1);l.$removeClass(e)}function f(t,e){var n=s.data("$classCounts")||gt(),r=[];return i(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,
n[t]===+(e>0)&&r.push(t))}),s.data("$classCounts",n),r.join(" ")}function d(t,e){var o=r(e,t),i=r(t,e);o=f(o,1),i=f(i,-1),o&&o.length&&n.addClass(s,o),i&&i.length&&n.removeClass(s,i)}function p(t){if(e===!0||a.$index%2===e){var n=o(t||[]);if(h){if(!z(t,h)){var r=o(h);d(r,n)}}else u(n)}h=V(t)}var h;a.$watch(l[t],p,!0),l.$observe("class",function(e){p(a.$eval(l[t]))}),"ngClass"!==t&&a.$watch("$index",function(n,r){var i=1&n;if(i!==(1&r)){var s=o(a.$eval(l[t]));i===e?u(s):c(s)}})}}}]}function Er(t){function e(t,e,l){y(e)?r("$pending",t,l):o("$pending",t,l),D(e)?e?(f(s.$error,t,l),c(s.$$success,t,l)):(c(s.$error,t,l),f(s.$$success,t,l)):(f(s.$error,t,l),f(s.$$success,t,l)),s.$pending?(i(ya,!0),s.$valid=s.$invalid=n,a("",null)):(i(ya,!1),s.$valid=$r(s.$error),s.$invalid=!s.$valid,a("",s.$valid));var u;u=s.$pending&&s.$pending[t]?n:s.$error[t]?!1:s.$$success[t]?!0:null,a(t,u),s.$$parentForm.$setValidity(t,u,s)}function r(t,e,n){s[t]||(s[t]={}),c(s[t],e,n)}function o(t,e,r){s[t]&&f(s[t],e,r),$r(s[t])&&(s[t]=n)}function i(t,e){e&&!u[t]?(d.addClass(l,t),u[t]=!0):!e&&u[t]&&(d.removeClass(l,t),u[t]=!1)}function a(t,e){t=t?"-"+ct(t,"-"):"",i(pa+t,e===!0),i(ha+t,e===!1)}var s=t.ctrl,l=t.$element,u={},c=t.set,f=t.unset,d=t.$animate;u[ha]=!(u[pa]=l.hasClass(pa)),s.$setValidity=e}function $r(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Mr(t){t[0].hasAttribute("selected")&&(t[0].selected=!0)}var Ar=/^\/(.+)\/([a-z]*)$/,Tr="validity",Sr=Object.prototype.hasOwnProperty,Cr=function(t){return k(t)?t.toLowerCase():t},Fr=function(t){return k(t)?t.toUpperCase():t},Ir=function(t){return k(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Dr=function(t){return k(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(Cr=Ir,Fr=Dr);var Rr,Or,Pr,jr,Lr=[].slice,Nr=[].splice,Ur=[].push,Br=Object.prototype.toString,Vr=Object.getPrototypeOf,zr=r("ng"),Gr=t.angular||(t.angular={}),qr=0;Rr=e.documentMode,m.$inject=[],b.$inject=[];var Wr=Array.isArray,Hr=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Xr=function(t){return k(t)?t.trim():t},Yr=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Zr=function(){function t(){try{return new Function(""),!1}catch(t){return!0}}if(!x(Zr.rules)){var n=e.querySelector("[ng-csp]")||e.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");Zr.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else Zr.rules={noUnsafeEval:t(),noInlineStyle:!1}}return Zr.rules},Kr=function(){if(x(Kr.name_))return Kr.name_;var t,n,r,o,i=Jr.length;for(n=0;i>n;++n)if(r=Jr[n],t=e.querySelector("["+r.replace(":","\\:")+"jq]")){o=t.getAttribute(r+"jq");break}return Kr.name_=o},Qr=/:/g,Jr=["ng-","data-ng-","ng:","x-ng-"],to=/[A-Z]/g,eo=!1,no=1,ro=2,oo=3,io=8,ao=9,so=11,lo={full:"1.5.1",major:1,minor:5,dot:1,codeName:"equivocal-sophistication"};Ft.expando="ng339";var uo=Ft.cache={},co=1,fo=function(t,e,n){t.addEventListener(e,n,!1)},po=function(t,e,n){t.removeEventListener(e,n,!1)};Ft._data=function(t){return this.cache[t[this.expando]]||{}};var ho=/([\:\-\_]+(.))/g,mo=/^moz([A-Z])/,bo={mouseleave:"mouseout",mouseenter:"mouseover"},go=r("jqLite"),vo=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,yo=/<|&#?\w+;/,xo=/<([\w:-]+)/,wo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,_o={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};_o.optgroup=_o.option,_o.tbody=_o.tfoot=_o.colgroup=_o.caption=_o.thead,_o.th=_o.td;var ko=Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))},Eo=Ft.prototype={ready:function(n){function r(){o||(o=!0,n())}var o=!1;"complete"===e.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),Ft(t).on("load",r))},toString:function(){var t=[];return i(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return Or(t>=0?this[t]:this[this.length+t])},length:0,push:Ur,sort:[].sort,splice:[].splice},$o={};i("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){$o[Cr(t)]=t});var Mo={};i("input,select,option,textarea,button,form,details".split(","),function(t){Mo[t]=!0});var Ao={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};i({data:jt,removeData:Ot,hasData:Mt,cleanData:At},function(t,e){Ft[e]=t}),i({data:jt,inheritedData:zt,scope:function(t){return Or.data(t,"$scope")||zt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return Or.data(t,"$isolateScope")||Or.data(t,"$isolateScopeNoTemplate")},controller:Vt,injector:function(t){return zt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Lt,css:function(t,e,n){return e=kt(e),x(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,r){var o=t.nodeType;if(o!==oo&&o!==ro&&o!==io){var i=Cr(e);if($o[i]){if(!x(r))return t[e]||(t.attributes.getNamedItem(e)||m).specified?i:n;r?(t[e]=!0,t.setAttribute(e,i)):(t[e]=!1,t.removeAttribute(i))}else if(x(r))t.setAttribute(e,r);else if(t.getAttribute){var a=t.getAttribute(e,2);return null===a?n:a}}},prop:function(t,e,n){return x(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(y(e)){var n=t.nodeType;return n===no||n===oo?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(y(e)){if(t.multiple&&"select"===N(t)){var n=[];return i(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return y(e)?t.innerHTML:(Dt(t,!0),void(t.innerHTML=e))},empty:Gt},function(t,e){Ft.prototype[e]=function(e,n){var r,o,i=this.length;if(t!==Gt&&y(2==t.length&&t!==Lt&&t!==Vt?e:n)){if(w(e)){for(r=0;i>r;r++)if(t===jt)t(this[r],e);else for(o in e)t(this[r],o,e[o]);return this}for(var a=t.$dv,s=y(a)?Math.min(i,1):i,l=0;s>l;l++){var u=t(this[l],e,n);a=a?a+u:u}return a}for(r=0;i>r;r++)t(this[r],e,n);return this}}),i({removeData:Ot,on:function(t,e,r,o){if(x(o))throw go("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if($t(t)){var i=Pt(t,!0),a=i.events,s=i.handle;s||(s=i.handle=Yt(t,a));for(var l=e.indexOf(" ")>=0?e.split(" "):[e],u=l.length,c=function(e,n,o){var i=a[e];i||(i=a[e]=[],i.specialHandlerWrapper=n,"$destroy"===e||o||fo(t,e,s)),i.push(r)};u--;)e=l[u],bo[e]?(c(bo[e],Kt),c(e,n,!0)):c(e)}},off:Rt,one:function(t,e,n){t=Or(t),t.on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;Dt(t),i(new Ft(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return i(t.childNodes,function(t){t.nodeType===no&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===no||n===so){e=new Ft(e);for(var r=0,o=e.length;o>r;r++){var i=e[r];t.appendChild(i)}}},prepend:function(t,e){if(t.nodeType===no){var n=t.firstChild;i(new Ft(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){Ct(t,Or(e).eq(0).clone()[0])},remove:qt,detach:function(t){qt(t,!0)},after:function(t,e){var n=t,r=t.parentNode;e=new Ft(e);for(var o=0,i=e.length;i>o;o++){var a=e[o];r.insertBefore(a,n.nextSibling),n=a}},addClass:Ut,removeClass:Nt,toggleClass:function(t,e,n){e&&i(e.split(" "),function(e){var r=n;y(r)&&(r=!Lt(t,e)),(r?Ut:Nt)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==so?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:It,triggerHandler:function(t,e,n){var r,o,a,s=e.type||e,l=Pt(t),u=l&&l.events,c=u&&u[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:m,type:s,target:t},e.type&&(r=f(r,e)),o=V(c),a=n?[r].concat(n):[r],i(o,function(e){r.isImmediatePropagationStopped()||e.apply(t,a)}))}},function(t,e){Ft.prototype[e]=function(e,n,r){for(var o,i=0,a=this.length;a>i;i++)y(o)?(o=t(this[i],e,n,r),x(o)&&(o=Or(o))):Bt(o,t(this[i],e,n,r));return x(o)?o:this},Ft.prototype.bind=Ft.prototype.on,Ft.prototype.unbind=Ft.prototype.off}),te.prototype={put:function(t,e){this[Jt(t,this.nextUid)]=e},get:function(t){return this[Jt(t,this.nextUid)]},remove:function(t){var e=this[t=Jt(t,this.nextUid)];return delete this[t],e}};var To=[function(){this.$get=[function(){return te}]}],So=/^([^\(]+?)=>/,Co=/^[^\(]*\(\s*([^\)]*)\)/m,Fo=/,/,Io=/^\s*(_?)(\S+?)\1\s*$/,Do=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ro=r("$injector");oe.$$annotate=re;var Oo=r("$animate"),Po=1,jo="ng-animate",Lo=function(){this.$get=m},No=function(){var t=new te,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function o(t,e,n){var r=!1;return e&&(e=k(e)?e.split(" "):Wr(e)?e:[],i(e,function(e){e&&(r=!0,t[e]=n)})),r}function a(){i(e,function(e){var n=t.get(e);if(n){var r=le(e.attr("class")),o="",a="";i(n,function(t,e){var n=!!r[e];t!==n&&(t?o+=(o.length?" ":"")+e:a+=(a.length?" ":"")+e)}),i(e,function(t){o&&Ut(t,o),a&&Nt(t,a)}),t.remove(e)}}),e.length=0}function s(n,i,s){var l=t.get(n)||{},u=o(l,i,!0),c=o(l,s,!1);(u||c)&&(t.put(n,l),e.push(n),1===e.length&&r.$$postDigest(a))}return{enabled:m,on:m,off:m,pin:m,push:function(t,e,r,o){o&&o(),r=r||{},r.from&&t.css(r.from),r.to&&t.css(r.to),(r.addClass||r.removeClass)&&s(t,r.addClass,r.removeClass);var i=new n;return i.complete(),i}}}]},Uo=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Oo("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var o=n+"-animation";e.$$registeredAnimations[n.substr(1)]=o,t.factory(o,r)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter)){var e=new RegExp("(\\s+|\\/)"+jo+"(\\s+|\\/)");if(e.test(this.$$classNameFilter.toString()))throw Oo("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',jo)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=se(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,o,i){return r=r&&Or(r),o=o&&Or(o),r=r||o.parent(),e(n,r,o),t.push(n,"enter",ue(i))},move:function(n,r,o,i){return r=r&&Or(r),o=o&&Or(o),r=r||o.parent(),e(n,r,o),t.push(n,"move",ue(i))},leave:function(e,n){return t.push(e,"leave",ue(n),function(){e.remove()})},addClass:function(e,n,r){return r=ue(r),r.addClass=ae(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return r=ue(r),r.removeClass=ae(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,o){return o=ue(o),o.addClass=ae(o.addClass,n),o.removeClass=ae(o.removeClass,r),t.push(e,"setClass",o)},animate:function(e,n,r,o,i){return i=ue(i),i.from=i.from?f(i.from,n):n,i.to=i.to?f(i.to,r):r,o=o||"ng-inline-animate",i.tempClasses=ae(i.tempClasses,o),t.push(e,"animate",i)}}}]}],Bo=function(){this.$get=["$$rAF",function(t){function e(e){n.push(e),n.length>1||t(function(){for(var t=0;t<n.length;t++)n[t]();n=[]})}var n=[];return function(){var t=!1;return e(function(){t=!0}),function(n){t?n():e(n)}}}]},Vo=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,r,o){function a(t){this.setHost(t);var e=n(),i=function(t){o(t,0,!1)};this._doneCallbacks=[],this._tick=function(t){var n=r[0];n&&n.hidden?i(t):e(t)},this._state=0}var s=0,l=1,u=2;return a.chain=function(t,e){function n(){return r===t.length?void e(!0):void t[r](function(t){return t===!1?void e(!1):(r++,void n())})}var r=0;n()},a.all=function(t,e){function n(n){o=o&&n,++r===t.length&&e(o)}var r=0,o=!0;i(t,function(t){t.done(n)})},a.prototype={setHost:function(t){this.host=t||{}},done:function(t){this._state===u?t():this._doneCallbacks.push(t)},progress:m,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){e===!1?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},"catch":function(t){return this.getPromise()["catch"](t)},"finally":function(t){return this.getPromise()["finally"](t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;e._state===s&&(e._state=l,e._tick(function(){e._resolve(t)}))},_resolve:function(t){this._state!==u&&(i(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=u)}},a}]},zo=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){function o(){return t(function(){i(),s||l.complete(),s=!0}),l}function i(){a.addClass&&(e.addClass(a.addClass),a.addClass=null),a.removeClass&&(e.removeClass(a.removeClass),a.removeClass=null),a.to&&(e.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=B(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(e.css(a.from),a.from=null);var s,l=new n;return{start:o,end:o}}}]},Go=r("$compile");he.$inject=["$provide","$$sanitizeUriProvider"];var qo=/^((?:x|data)[\:\-_])/i,Wo=r("$controller"),Ho=/^(\S+)(\s+as\s+([\w$]+))?$/,Xo=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof Or&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Yo="application/json",Zo={"Content-Type":Yo+";charset=utf-8"},Ko=/^\[|^\{(?!\{)/,Qo={"[":/]$/,"{":/}$/},Jo=/^\)\]\}',?\n/,ti=r("$http"),ei=function(t){return function(){throw ti("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}},ni=Gr.$interpolateMinErr=r("$interpolate");ni.throwNoconcat=function(t){throw ni("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},ni.interr=function(t,e){return ni("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var ri=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,oi={http:80,https:443,ftp:21},ii=r("$location"),ai={$$html5:!1,$$replace:!1,absUrl:Xe("$$absUrl"),url:function(t){if(y(t))return this.$$url;var e=ri.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:Xe("$$protocol"),host:Xe("$$host"),port:Xe("$$port"),path:Ye("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(k(t)||E(t))t=t.toString(),this.$$search=et(t);else{if(!w(t))throw ii("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");t=B(t,{}),i(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:y(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Ye("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};i([He,We,qe],function(t){t.prototype=Object.create(ai),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==qe||!this.$$html5)throw ii("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=y(e)?null:e,this}});var si=r("$parse"),li=Function.prototype.call,ui=Function.prototype.apply,ci=Function.prototype.bind,fi=gt();i("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){fi[t]=!0});var di={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},pi=function(t){this.options=t};pi.prototype={constructor:pi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(e))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),o=fi[e],i=fi[n],a=fi[r];if(o||i||a){var s=a?r:i?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||"\x0B"===t||""===t},isIdent:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=x(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw si("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=Cr(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,o=!1;this.index<this.text.length;){var i=this.text.charAt(this.index);if(r+=i,o){if("u"===i){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=di[i];n+=s||i}o=!1}else if("\\"===i)o=!0;else{if(i===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=i}this.index++}this.throwError("Unterminated quote",e)}};var hi=function(t,e){this.lexer=t,this.options=e};hi.Program="Program",hi.ExpressionStatement="ExpressionStatement",hi.AssignmentExpression="AssignmentExpression",hi.ConditionalExpression="ConditionalExpression",hi.LogicalExpression="LogicalExpression",hi.BinaryExpression="BinaryExpression",hi.UnaryExpression="UnaryExpression",hi.CallExpression="CallExpression",hi.MemberExpression="MemberExpression",hi.Identifier="Identifier",hi.Literal="Literal",hi.ArrayExpression="ArrayExpression",hi.Property="Property",hi.ObjectExpression="ObjectExpression",hi.ThisExpression="ThisExpression",hi.LocalsExpression="LocalsExpression",hi.NGValueParameter="NGValueParameter",hi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:hi.Program,body:t}},expressionStatement:function(){return{type:hi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t,e=this.expression();t=this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:hi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:hi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:hi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:hi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:hi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:hi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:hi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:hi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:hi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=B(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:hi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:hi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:hi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:hi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:hi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.expression());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:hi.Identifier,name:t.text}},constant:function(){return{type:hi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:hi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:hi.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:hi.ObjectExpression,properties:e}},throwError:function(t,e){throw si("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw si("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw si("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,o){if(this.tokens.length>t){var i=this.tokens[t],a=i.text;if(a===e||a===n||a===r||a===o||!e&&!n&&!r&&!o)return i}return!1},expect:function(t,e,n,r){var o=this.peek(t,e,n,r);return o?(this.tokens.shift(),o):!1},selfReferential:{"this":{type:hi.ThisExpression},$locals:{type:hi.LocalsExpression}}},pn.prototype={compile:function(t,e){var r=this,o=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},sn(o,r.$filter);var a,s="";if(this.stage="assign",a=cn(o)){this.state.computing="assign";var l=this.nextId();this.recurse(a,l),this.return_(l),s="fn.assign="+this.generateFunction("assign","s,v,l")}var u=ln(o.body);r.stage="inputs",i(u,function(t,e){var n="fn"+e;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var o=r.nextId();r.recurse(t,o),r.return_(o),r.state.inputs.push(n),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(o);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",f=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",c)(this.$filter,Qe,tn,en,Je,nn,rn,on,t);return this.state=this.stage=n,f.literal=fn(o),f.constant=dn(o),f},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return i(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return i(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,o,a,s){var l,u,c,f,d=this;if(o=o||m,!s&&x(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,r,o,a,!0));switch(t.type){case hi.Program:i(t.body,function(e,r){d.recurse(e.expression,n,n,function(t){u=t}),r!==t.body.length-1?d.current().body.push(u,";"):d.return_(u)});break;case hi.Literal:f=this.escape(t.value),this.assign(e,f),o(f);break;case hi.UnaryExpression:this.recurse(t.argument,n,n,function(t){u=t}),f=t.operator+"("+this.ifDefined(u,0)+")",this.assign(e,f),o(f);break;case hi.BinaryExpression:this.recurse(t.left,n,n,function(t){l=t}),this.recurse(t.right,n,n,function(t){u=t}),f="+"===t.operator?this.plus(l,u):"-"===t.operator?this.ifDefined(l,0)+t.operator+this.ifDefined(u,0):"("+l+")"+t.operator+"("+u+")",this.assign(e,f),o(f);break;case hi.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),o(e);break;case hi.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),o(e);break;case hi.Identifier:e=e||this.nextId(),r&&(r.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),Qe(t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),function(){d.if_("inputs"===d.stage||"s",function(){a&&1!==a&&d.if_(d.not(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))})},e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),(d.state.expensiveChecks||mn(t.name))&&d.addEnsureSafeObject(e),o(e);break;case hi.MemberExpression:l=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,l,n,function(){d.if_(d.notNull(l),function(){a&&1!==a&&d.addEnsureSafeAssignContext(l),t.computed?(u=d.nextId(),d.recurse(t.property,u),d.getStringValue(u),d.addEnsureSafeMemberName(u),a&&1!==a&&d.if_(d.not(d.computedMember(l,u)),d.lazyAssign(d.computedMember(l,u),"{}")),f=d.ensureSafeObject(d.computedMember(l,u)),d.assign(e,f),r&&(r.computed=!0,r.name=u)):(Qe(t.property.name),a&&1!==a&&d.if_(d.not(d.nonComputedMember(l,t.property.name)),d.lazyAssign(d.nonComputedMember(l,t.property.name),"{}")),f=d.nonComputedMember(l,t.property.name),(d.state.expensiveChecks||mn(t.property.name))&&(f=d.ensureSafeObject(f)),d.assign(e,f),r&&(r.computed=!1,r.name=t.property.name))},function(){d.assign(e,"undefined")}),o(e)},!!a);break;case hi.CallExpression:e=e||this.nextId(),t.filter?(u=d.filter(t.callee.name),c=[],i(t.arguments,function(t){var e=d.nextId();d.recurse(t,e),c.push(e)}),f=u+"("+c.join(",")+")",d.assign(e,f),o(e)):(u=d.nextId(),l={},c=[],d.recurse(t.callee,u,l,function(){d.if_(d.notNull(u),function(){d.addEnsureSafeFunction(u),i(t.arguments,function(t){d.recurse(t,d.nextId(),n,function(t){c.push(d.ensureSafeObject(t))})}),l.name?(d.state.expensiveChecks||d.addEnsureSafeObject(l.context),f=d.member(l.context,l.name,l.computed)+"("+c.join(",")+")"):f=u+"("+c.join(",")+")",f=d.ensureSafeObject(f),d.assign(e,f)},function(){d.assign(e,"undefined")}),o(e)}));break;case hi.AssignmentExpression:if(u=this.nextId(),l={},!un(t.left))throw si("lval","Trying to assign a value to a non l-value");this.recurse(t.left,n,l,function(){d.if_(d.notNull(l.context),function(){d.recurse(t.right,u),d.addEnsureSafeObject(d.member(l.context,l.name,l.computed)),d.addEnsureSafeAssignContext(l.context),f=d.member(l.context,l.name,l.computed)+t.operator+u,d.assign(e,f),o(e||f)})},1);break;case hi.ArrayExpression:c=[],i(t.elements,function(t){d.recurse(t,d.nextId(),n,function(t){c.push(t)})}),f="["+c.join(",")+"]",this.assign(e,f),o(f);break;case hi.ObjectExpression:c=[],i(t.properties,function(t){d.recurse(t.value,d.nextId(),n,function(e){c.push(d.escape(t.key.type===hi.Identifier?t.key.name:""+t.key.value)+":"+e)})}),f="{"+c.join(",")+"}",this.assign(e,f),o(f);break;case hi.ThisExpression:this.assign(e,"s"),o("s");break;case hi.LocalsExpression:this.assign(e,"l"),o("l");break;case hi.NGValueParameter:this.assign(e,"v"),o("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){return t?(this.current().body.push(t,"=",e,";"),t):void 0},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(t===!0)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return t+"."+e},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")");
},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,r,o,i){var a=this;return function(){a.recurse(t,e,n,r,o,i)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(k(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(E(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw si("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},hn.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,sn(r,n.$filter);var o,a;(o=cn(r))&&(a=this.recurse(o));var s,l=ln(r.body);l&&(s=[],i(l,function(t,e){var r=n.recurse(t);t.input=r,s.push(r),t.watchId=e}));var u=[];i(r.body,function(t){u.push(n.recurse(t.expression))});var c=0===r.body.length?m:1===r.body.length?u[0]:function(t,e){var n;return i(u,function(r){n=r(t,e)}),n};return a&&(c.assign=function(t,e,n){return a(t,n,e)}),s&&(c.inputs=s),c.literal=fn(r),c.constant=dn(r),c},recurse:function(t,e,r){var o,a,s,l=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case hi.Literal:return this.value(t.value,e);case hi.UnaryExpression:return a=this.recurse(t.argument),this["unary"+t.operator](a,e);case hi.BinaryExpression:return o=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](o,a,e);case hi.LogicalExpression:return o=this.recurse(t.left),a=this.recurse(t.right),this["binary"+t.operator](o,a,e);case hi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case hi.Identifier:return Qe(t.name,l.expression),l.identifier(t.name,l.expensiveChecks||mn(t.name),e,r,l.expression);case hi.MemberExpression:return o=this.recurse(t.object,!1,!!r),t.computed||(Qe(t.property.name,l.expression),a=t.property.name),t.computed&&(a=this.recurse(t.property)),t.computed?this.computedMember(o,a,e,r,l.expression):this.nonComputedMember(o,a,l.expensiveChecks,e,r,l.expression);case hi.CallExpression:return s=[],i(t.arguments,function(t){s.push(l.recurse(t))}),t.filter&&(a=this.$filter(t.callee.name)),t.filter||(a=this.recurse(t.callee,!0)),t.filter?function(t,r,o,i){for(var l=[],u=0;u<s.length;++u)l.push(s[u](t,r,o,i));var c=a.apply(n,l,i);return e?{context:n,name:n,value:c}:c}:function(t,n,r,o){var i,u=a(t,n,r,o);if(null!=u.value){tn(u.context,l.expression),en(u.value,l.expression);for(var c=[],f=0;f<s.length;++f)c.push(tn(s[f](t,n,r,o),l.expression));i=tn(u.value.apply(u.context,c),l.expression)}return e?{value:i}:i};case hi.AssignmentExpression:return o=this.recurse(t.left,!0,1),a=this.recurse(t.right),function(t,n,r,i){var s=o(t,n,r,i),u=a(t,n,r,i);return tn(s.value,l.expression),nn(s.context),s.context[s.name]=u,e?{value:u}:u};case hi.ArrayExpression:return s=[],i(t.elements,function(t){s.push(l.recurse(t))}),function(t,n,r,o){for(var i=[],a=0;a<s.length;++a)i.push(s[a](t,n,r,o));return e?{value:i}:i};case hi.ObjectExpression:return s=[],i(t.properties,function(t){s.push({key:t.key.type===hi.Identifier?t.key.name:""+t.key.value,value:l.recurse(t.value)})}),function(t,n,r,o){for(var i={},a=0;a<s.length;++a)i[s[a].key]=s[a].value(t,n,r,o);return e?{value:i}:i};case hi.ThisExpression:return function(t){return e?{value:t}:t};case hi.LocalsExpression:return function(t,n){return e?{value:n}:n};case hi.NGValueParameter:return function(t,n,r,o){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,o,i){var a=t(n,r,o,i);return a=x(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,o,i){var a=t(n,r,o,i);return a=x(a)?-a:0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,o,i){var a=!t(n,r,o,i);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a),l=e(r,o,i,a),u=on(s,l);return n?{value:u}:u}},"binary-":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a),l=e(r,o,i,a),u=(x(s)?s:0)-(x(l)?l:0);return n?{value:u}:u}},"binary*":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)*e(r,o,i,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)/e(r,o,i,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)%e(r,o,i,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)===e(r,o,i,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)!==e(r,o,i,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)==e(r,o,i,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)!=e(r,o,i,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)<e(r,o,i,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)>e(r,o,i,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)<=e(r,o,i,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)>=e(r,o,i,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)&&e(r,o,i,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,o,i,a){var s=t(r,o,i,a)||e(r,o,i,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(o,i,a,s){var l=t(o,i,a,s)?e(o,i,a,s):n(o,i,a,s);return r?{value:l}:l}},value:function(t,e){return function(){return e?{context:n,name:n,value:t}:t}},identifier:function(t,e,r,o,i){return function(a,s,l,u){var c=s&&t in s?s:a;o&&1!==o&&c&&!c[t]&&(c[t]={});var f=c?c[t]:n;return e&&tn(f,i),r?{context:c,name:t,value:f}:f}},computedMember:function(t,e,n,r,o){return function(i,a,s,l){var u,c,f=t(i,a,s,l);return null!=f&&(u=e(i,a,s,l),u=Je(u),Qe(u,o),r&&1!==r&&(nn(f),f&&!f[u]&&(f[u]={})),c=f[u],tn(c,o)),n?{context:f,name:u,value:c}:c}},nonComputedMember:function(t,e,r,o,i,a){return function(s,l,u,c){var f=t(s,l,u,c);i&&1!==i&&(nn(f),f&&!f[e]&&(f[e]={}));var d=null!=f?f[e]:n;return(r||mn(e))&&tn(d,a),o?{context:f,name:e,value:d}:d}},inputs:function(t,e){return function(n,r,o,i){return i?i[e]:t(n,r,o)}}};var mi=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new hi(t,n),this.astCompiler=n.csp?new hn(this.ast,e):new pn(this.ast,e)};mi.prototype={constructor:mi,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var bi=Object.prototype.valueOf,gi=r("$sce"),vi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Go=r("$compile"),yi=e.createElement("a"),xi=In(t.location.href);On.$inject=["$document"],jn.$inject=["$provide"];var wi=22,_i=".",ki="0";Vn.$inject=["$locale"],zn.$inject=["$locale"];var Ei={yyyy:Xn("FullYear",4,0,!1,!0),yy:Xn("FullYear",2,0,!0,!0),y:Xn("FullYear",1,0,!1,!0),MMMM:Yn("Month"),MMM:Yn("Month",!0),MM:Xn("Month",2,1),M:Xn("Month",1,1),LLLL:Yn("Month",!1,!0),dd:Xn("Date",2),d:Xn("Date",1),HH:Xn("Hours",2),H:Xn("Hours",1),hh:Xn("Hours",2,-12),h:Xn("Hours",1,-12),mm:Xn("Minutes",2),m:Xn("Minutes",1),ss:Xn("Seconds",2),s:Xn("Seconds",1),sss:Xn("Milliseconds",3),EEEE:Yn("Day"),EEE:Yn("Day",!0),a:tr,Z:Zn,ww:Jn(2),w:Jn(1),G:er,GG:er,GGG:er,GGGG:nr},$i=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Mi=/^\-?\d+$/;rr.$inject=["$locale"];var Ai=g(Cr),Ti=g(Fr);ar.$inject=["$parse"];var Si=g({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref?void 0:function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Br.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Ci={};i($o,function(t,e){function n(t,n,o){t.$watch(o[r],function(t){o.$set(e,!!t)})}if("multiple"!=t){var r=me("ng-"+e),o=n;"checked"===t&&(o=function(t,e,o){o.ngModel!==o[r]&&n(t,e,o)}),Ci[r]=function(){return{restrict:"A",priority:100,link:o}}}}),i(Ao,function(t,e){Ci[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"==r.ngPattern.charAt(0)){var o=r.ngPattern.match(Ar);if(o)return void r.$set("ngPattern",new RegExp(o[1],o[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),i(["src","srcset","href"],function(t){var e=me("ng-"+t);Ci[e]=function(){return{priority:99,link:function(n,r,o){var i=t,a=t;"href"===t&&"[object SVGAnimatedString]"===Br.call(r.prop("href"))&&(a="xlinkHref",o.$attr[a]="xlink:href",i=null),o.$observe(e,function(e){return e?(o.$set(a,e),void(Rr&&i&&r.prop(i,o[a]))):void("href"===t&&o.$set(a,null))})}}}});var Fi={$addControl:m,$$renameControl:lr,$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m,$setSubmitted:m},Ii="ng-submitted";ur.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Di=function(t){return["$timeout","$parse",function(e,r){function o(t){return""===t?r('this[""]').assign:r(t).assign||m}var i={name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:ur,compile:function(r,i){r.addClass(ma).addClass(pa);var a=i.name?"name":t&&i.ngForm?"ngForm":!1;return{pre:function(t,r,i,s){var l=s[0];if(!("action"in i)){var u=function(e){t.$apply(function(){l.$commitViewValue(),l.$setSubmitted()}),e.preventDefault()};fo(r[0],"submit",u),r.on("$destroy",function(){e(function(){po(r[0],"submit",u)},0,!1)})}var c=s[1]||l.$$parentForm;c.$addControl(l);var d=a?o(l.$name):m;a&&(d(t,l),i.$observe(a,function(e){l.$name!==e&&(d(t,n),l.$$parentForm.$$renameControl(l,e),(d=o(l.$name))(t,l))})),r.on("$destroy",function(){l.$$parentForm.$removeControl(l),d(t,n),f(l,Fi)})}}}};return i}]},Ri=Di(),Oi=Di(!0),Pi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ji=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Li=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ni=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Ui=/^(\d{4,})-(\d{2})-(\d{2})$/,Bi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Vi=/^(\d{4,})-W(\d\d)$/,zi=/^(\d{4,})-(\d\d)$/,Gi=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,qi="keydown wheel mousedown",Wi=gt();i("date,datetime-local,month,time,week".split(","),function(t){Wi[t]=!0});var Hi={text:fr,date:mr("date",Ui,hr(Ui,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mr("datetimelocal",Bi,hr(Bi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:mr("time",Gi,hr(Gi,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mr("week",Vi,pr,"yyyy-Www"),month:mr("month",zi,hr(zi,["yyyy","MM"]),"yyyy-MM"),number:gr,url:vr,email:yr,radio:xr,checkbox:_r,hidden:m,button:m,submit:m,reset:m,file:m},Xi=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(o,i,a,s){s[0]&&(Hi[Cr(a.type)]||Hi.text)(o,i,a,s[0],e,t,n,r)}}}}],Yi=/^(true|false|\d+)$/,Zi=function(){return{restrict:"A",priority:100,compile:function(t,e){return Yi.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Ki=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=y(t)?"":t})}}}}],Qi=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,o){var i=t(r.attr(o.$attr.ngBindTemplate));e.$$addBindingInfo(r,i.expressions),r=r[0],o.$observe("ngBindTemplate",function(t){r.textContent=y(t)?"":t})}}}}],Ji=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,o){var i=e(o.ngBindHtml),a=e(o.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(r),function(e,r,o){n.$$addBindingInfo(r,o.ngBindHtml),e.$watch(a,function(){r.html(t.getTrustedHtml(i(e))||"")})}}}}],ta=g({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),ea=kr("",!0),na=kr("Odd",0),ra=kr("Even",1),oa=sr({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),ia=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],aa={},sa={blur:!0,focus:!0};i("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=me("ng-"+t);aa[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(o,i){var a=n(i[e],null,!0);return function(e,n){n.on(t,function(n){var o=function(){a(e,{$event:n})};sa[t]&&r.$$phase?e.$evalAsync(o):e.$apply(o)})}}}}]});var la=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,o,i,a){var s,l,u;n.$watch(o.ngIf,function(n){n?l||a(function(n,i){l=i,n[n.length++]=e.$$createComment("end ngIf",o.ngIf),s={clone:n},t.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=bt(s.clone),t.leave(u).then(function(){u=null}),s=null))})}}}],ua=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Gr.noop,compile:function(r,o){var i=o.ngInclude||o.src,a=o.onload||"",s=o.autoscroll;return function(r,o,l,u,c){var f,d,p,h=0,m=function(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),p&&(n.leave(p).then(function(){d=null}),d=p,p=null)};r.$watch(i,function(i){var l=function(){!x(s)||s&&!r.$eval(s)||e()},d=++h;i?(t(i,!0).then(function(t){if(!r.$$destroyed&&d===h){var e=r.$new();u.template=t;var s=c(e,function(t){m(),n.enter(t,null,o).then(l)});f=e,p=s,f.$emit("$includeContentLoaded",i),r.$eval(a)}},function(){r.$$destroyed||d===h&&(m(),r.$emit("$includeContentError",i))}),r.$emit("$includeContentRequested",i)):(m(),u.template=null)})}}}}],ca=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,o,i){return Br.call(r[0]).match(/SVG/)?(r.empty(),void t(Tt(i.template,e).childNodes)(n,function(t){r.append(t)},{futureParentElement:r})):(r.html(i.template),void t(r.contents())(n))}}}],fa=sr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),da=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,o){var a=e.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,l=s?Xr(a):a,u=function(t){if(!y(t)){var e=[];return t&&i(t.split(l),function(t){t&&e.push(s?Xr(t):t)}),e}};o.$parsers.push(u),o.$formatters.push(function(t){return Wr(t)?t.join(a):n}),o.$isEmpty=function(t){return!t||!t.length}}}},pa="ng-valid",ha="ng-invalid",ma="ng-pristine",ba="ng-dirty",ga="ng-untouched",va="ng-touched",ya="ng-pending",xa="ng-empty",wa="ng-not-empty",_a=r("ngModel"),ka=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,r,o,a,s,l,u,c,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(t),this.$$parentForm=Fi;var d,p=a(r.ngModel),h=p.assign,b=p,g=h,v=null,w=this;this.$$setOptions=function(t){if(w.$options=t,t&&t.getterSetter){var e=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");b=function(t){var n=p(t);return M(n)&&(n=e(t)),n},g=function(t,e){M(p(t))?n(t,{$$$p:w.$modelValue}):h(t,w.$modelValue)}}else if(!p.assign)throw _a("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,J(o))},this.$render=m,this.$isEmpty=function(t){return y(t)||""===t||null===t||t!==t},this.$$updateEmptyClasses=function(t){w.$isEmpty(t)?(s.removeClass(o,wa),s.addClass(o,xa)):(s.removeClass(o,xa),s.addClass(o,wa))};var _=0;Er({ctrl:this,$element:o,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:s}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,s.removeClass(o,ba),s.addClass(o,ma)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,s.removeClass(o,ma),s.addClass(o,ba),w.$$parentForm.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,s.setClass(o,ga,va)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,s.setClass(o,va,ga)},this.$rollbackViewValue=function(){l.cancel(v),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!E(w.$modelValue)||!isNaN(w.$modelValue)){var t=w.$$lastCommittedViewValue,e=w.$$rawModelValue,r=w.$valid,o=w.$modelValue,i=w.$options&&w.$options.allowInvalid;w.$$runValidators(e,t,function(t){i||r===t||(w.$modelValue=t?e:n,w.$modelValue!==o&&w.$$writeModelToScope())})}},this.$$runValidators=function(t,e,r){function o(){var t=w.$$parserName||"parse";return y(d)?(l(t,null),!0):(d||(i(w.$validators,function(t,e){l(e,null)}),i(w.$asyncValidators,function(t,e){l(e,null)})),l(t,d),d)}function a(){var n=!0;return i(w.$validators,function(r,o){var i=r(t,e);n=n&&i,l(o,i)}),n?!0:(i(w.$asyncValidators,function(t,e){l(e,null)}),!1)}function s(){var r=[],o=!0;i(w.$asyncValidators,function(i,a){var s=i(t,e);if(!R(s))throw _a("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(a,n),r.push(s.then(function(){l(a,!0)},function(t){o=!1,l(a,!1)}))}),r.length?c.all(r).then(function(){u(o)},m):u(!0)}function l(t,e){f===_&&w.$setValidity(t,e)}function u(t){f===_&&r(t)}_++;var f=_;return o()&&a()?void s():void u(!1)},this.$commitViewValue=function(){var t=w.$viewValue;l.cancel(v),(w.$$lastCommittedViewValue!==t||""===t&&w.$$hasNativeValidators)&&(w.$$updateEmptyClasses(t),w.$$lastCommittedViewValue=t,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function e(){w.$modelValue!==a&&w.$$writeModelToScope()}var r=w.$$lastCommittedViewValue,o=r;if(d=y(o)?n:!0)for(var i=0;i<w.$parsers.length;i++)if(o=w.$parsers[i](o),y(o)){d=!1;break}E(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=b(t));var a=w.$modelValue,s=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=o,s&&(w.$modelValue=o,e()),w.$$runValidators(o,w.$$lastCommittedViewValue,function(t){s||(w.$modelValue=t?o:n,e())})},this.$$writeModelToScope=function(){g(t,w.$modelValue),i(w.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){w.$viewValue=t,w.$options&&!w.$options.updateOnDefault||w.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,r=0,o=w.$options;o&&x(o.debounce)&&(n=o.debounce,E(n)?r=n:E(n[e])?r=n[e]:E(n["default"])&&(r=n["default"])),l.cancel(v),r?v=l(function(){w.$commitViewValue()},r):u.$$phase?w.$commitViewValue():t.$apply(function(){w.$commitViewValue()})},t.$watch(function(){var e=b(t);if(e!==w.$modelValue&&(w.$modelValue===w.$modelValue||e===e)){w.$modelValue=w.$$rawModelValue=e,d=n;for(var r=w.$formatters,o=r.length,i=e;o--;)i=r[o](i);w.$viewValue!==i&&(w.$$updateEmptyClasses(i),w.$viewValue=w.$$lastCommittedViewValue=i,w.$render(),w.$$runValidators(e,i,m))}return e})}],Ea=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ka,priority:1,compile:function(e){return e.addClass(ma).addClass(ga).addClass(pa),{pre:function(t,e,n,r){var o=r[0],i=r[1]||o.$$parentForm;o.$$setOptions(r[2]&&r[2].$options),i.$addControl(o),n.$observe("name",function(t){o.$name!==t&&o.$$parentForm.$$renameControl(o,t)}),t.$on("$destroy",function(){o.$$parentForm.$removeControl(o)})},post:function(e,n,r,o){var i=o[0];i.$options&&i.$options.updateOn&&n.on(i.$options.updateOn,function(t){i.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(n){i.$touched||(t.$$phase?e.$evalAsync(i.$setTouched):e.$apply(i.$setTouched))})}}}}}],$a=/(\s+|^)default(\s+|$)/,Ma=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=B(t.$eval(e.ngModelOptions)),x(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Xr(this.$options.updateOn.replace($a,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Aa=sr({terminal:!0,priority:1e3}),Ta=r("ngOptions"),Sa=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Ca=["$compile","$parse",function(t,n){function r(t,e,r){function i(t,e,n,r,o){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=o}function a(t){var e;if(!u&&o(t))e=t;else{e=[];for(var n in t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n)}return e}var s=t.match(Sa);if(!s)throw Ta("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,J(e));var l=s[5]||s[7],u=s[6],c=/ as /.test(s[0])&&s[1],f=s[9],d=n(s[2]?s[1]:l),p=c&&n(c),h=p||d,m=f&&n(f),b=f?function(t,e){return m(r,e)}:function(t){return Jt(t)},g=function(t,e){return b(t,k(t,e))},v=n(s[2]||s[1]),y=n(s[3]||""),x=n(s[4]||""),w=n(s[8]),_={},k=u?function(t,e){return _[u]=e,_[l]=t,_}:function(t){return _[l]=t,_};return{trackBy:f,getTrackByValue:g,getWatchables:n(w,function(t){var e=[];t=t||[];for(var n=a(t),o=n.length,i=0;o>i;i++){var l=t===n?i:n[i],u=(t[l],k(t[l],l)),c=b(t[l],u);if(e.push(c),s[2]||s[1]){var f=v(r,u);e.push(f)}if(s[4]){var d=x(r,u);e.push(d)}}return e}),getOptions:function(){for(var t=[],e={},n=w(r)||[],o=a(n),s=o.length,l=0;s>l;l++){var u=n===o?l:o[l],c=n[u],d=k(c,u),p=h(r,d),m=b(p,d),_=v(r,d),E=y(r,d),$=x(r,d),M=new i(m,p,_,E,$);t.push(M),e[m]=M}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[g(t)]},getViewValueFromOption:function(t){return f?Gr.copy(t.viewValue):t.viewValue}}}}}function a(e,n,o,a){function u(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),t.value!==e.value&&(e.value=t.selectValue)}function c(t,e,n,r){var o;return e&&Cr(e.nodeName)===n?o=e:(o=r.cloneNode(!1),e?t.insertBefore(o,e):t.appendChild(o)),o}function f(t){for(var e;t;)e=t.nextSibling,qt(t),t=e}function d(t){var e=h&&h[0],n=k&&k[0];if(e||n)for(;t&&(t===e||t===n||t.nodeType===io||"option"===N(t)&&""===t.value);)t=t.nextSibling;return t}function p(){var t=E&&m.readValue();E=$.getOptions();var e={},r=n[0].firstChild;if(_&&n.prepend(h),r=d(r),E.items.forEach(function(t){var o,i,a;x(t.group)?(o=e[t.group],o||(i=c(n[0],r,"optgroup",l),r=i.nextSibling,i.label=t.group,o=e[t.group]={groupElement:i,currentOptionElement:i.firstChild}),a=c(o.groupElement,o.currentOptionElement,"option",s),u(t,a),o.currentOptionElement=a.nextSibling):(a=c(n[0],r,"option",s),u(t,a),r=a.nextSibling)}),Object.keys(e).forEach(function(t){f(e[t].currentOptionElement)}),f(r),b.$render(),!b.$isEmpty(t)){var o=m.readValue(),i=$.trackBy||g;(i?z(t,o):t===o)||(b.$setViewValue(o),b.$render())}}for(var h,m=a[0],b=a[1],g=o.multiple,v=0,y=n.children(),w=y.length;w>v;v++)if(""===y[v].value){h=y.eq(v);break}var _=!!h,k=Or(s.cloneNode(!1));k.val("?");var E,$=r(o.ngOptions,n,e),M=function(){_||n.prepend(h),n.val(""),h.prop("selected",!0),h.attr("selected",!0)},A=function(){_||h.remove()},T=function(){n.prepend(k),n.val("?"),k.prop("selected",!0),k.attr("selected",!0)},S=function(){k.remove()};g?(b.$isEmpty=function(t){return!t||0===t.length},m.writeValue=function(t){E.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=E.getOptionFromViewValue(t);e&&!e.disabled&&(e.element.selected=!0)})},m.readValue=function(){var t=n.val()||[],e=[];return i(t,function(t){var n=E.selectValueMap[t];n&&!n.disabled&&e.push(E.getViewValueFromOption(n))}),e},$.trackBy&&e.$watchCollection(function(){return Wr(b.$viewValue)?b.$viewValue.map(function(t){return $.getTrackByValue(t)}):void 0},function(){b.$render()})):(m.writeValue=function(t){var e=E.getOptionFromViewValue(t);e&&!e.disabled?(n[0].value!==e.selectValue&&(S(),A(),n[0].value=e.selectValue,e.element.selected=!0),e.element.setAttribute("selected","selected")):null===t||_?(S(),M()):(A(),T())},m.readValue=function(){var t=E.selectValueMap[n.val()];return t&&!t.disabled?(A(),S(),E.getViewValueFromOption(t)):null},$.trackBy&&e.$watch(function(){return $.getTrackByValue(b.$viewValue)},function(){b.$render()})),_?(h.remove(),t(h)(e),h.removeClass("ng-scope")):h=Or(s.cloneNode(!1)),p(),e.$watchCollection($.getWatchables,p)}var s=e.createElement("option"),l=e.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=m},post:a}}}],Fa=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function u(t){s.text(t||"")}var c,f=l.count,d=l.$attr.when&&s.attr(l.$attr.when),p=l.offset||0,h=a.$eval(d)||{},b={},g=e.startSymbol(),v=e.endSymbol(),x=g+f+"-"+p+v,w=Gr.noop;i(l,function(t,e){var n=o.exec(e);if(n){var r=(n[1]?"-":"")+Cr(n[2]);h[r]=s.attr(l.$attr[e])}}),i(h,function(t,n){b[n]=e(t.replace(r,x))}),a.$watch(f,function(e){var r=parseFloat(e),o=isNaN(r);if(o||r in h||(r=t.pluralCat(r-p)),r!==c&&!(o&&E(c)&&isNaN(c))){w();var i=b[r];y(i)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),w=m,u()):w=a.$watch(i,u),c=r}})}}}],Ia=["$parse","$animate","$compile",function(t,e,a){var s="$$NG_REMOVED",l=r("ngRepeat"),u=function(t,e,n,r,o,i,a){t[n]=r,o&&(t[o]=i),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))},c=function(t){return t.clone[0]},f=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,d){var p=d.ngRepeat,h=a.$$createComment("end ngRepeat",p),m=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var b=m[1],g=m[2],v=m[3],y=m[4];if(m=b.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!m)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",b);var x=m[3]||m[1],w=m[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var _,k,E,$,M={$id:Jt};return y?_=t(y):(E=function(t,e){return Jt(e)},$=function(t){return t}),function(t,r,a,d,m){_&&(k=function(e,n,r){return w&&(M[w]=e),M[x]=n,M.$index=r,_(t,M)});var b=gt();t.$watchCollection(g,function(a){var d,g,y,_,M,A,T,S,C,F,I,D,R=r[0],O=gt();if(v&&(t[v]=a),o(a))C=a,S=k||E;else{S=k||$,C=[];for(var P in a)Sr.call(a,P)&&"$"!==P.charAt(0)&&C.push(P)}for(_=C.length,I=new Array(_),d=0;_>d;d++)if(M=a===C?d:C[d],A=a[M],T=S(M,A,d),b[T])F=b[T],delete b[T],O[T]=F,I[d]=F;else{if(O[T])throw i(I,function(t){t&&t.scope&&(b[t.id]=t)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,T,A);I[d]={id:T,scope:n,clone:n},O[T]=!0}for(var j in b){if(F=b[j],D=bt(F.clone),e.leave(D),D[0].parentNode)for(d=0,g=D.length;g>d;d++)D[d][s]=!0;F.scope.$destroy()}for(d=0;_>d;d++)if(M=a===C?d:C[d],A=a[M],F=I[d],F.scope){y=R;do y=y.nextSibling;while(y&&y[s]);c(F)!=y&&e.move(bt(F.clone),null,R),R=f(F),u(F.scope,d,x,A,w,M,_)}else m(function(t,n){F.scope=n;var r=h.cloneNode(!1);t[t.length++]=r,e.enter(t,null,R),R=r,F.clone=t,O[F.id]=F,u(F.scope,d,x,A,w,M,_)});b=O})}}}}],Da="ng-hide",Ra="ng-hide-animate",Oa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,Da,{tempClasses:Ra})})}}}],Pa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,Da,{tempClasses:Ra})})}}}],ja=sr(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&i(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),La=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,o,a){var s=o.ngSwitch||o.on,l=[],u=[],c=[],f=[],d=function(t,e){return function(){t.splice(e,1)}};n.$watch(s,function(n){var r,o;for(r=0,o=c.length;o>r;++r)t.cancel(c[r]);for(c.length=0,r=0,o=f.length;o>r;++r){var s=bt(u[r].clone);f[r].$destroy();var p=c[r]=t.leave(s);p.then(d(c,r))}u.length=0,f.length=0,(l=a.cases["!"+n]||a.cases["?"])&&i(l,function(n){n.transclude(function(r,o){f.push(o);var i=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:r};u.push(a),t.enter(r,i.parent(),i)})})})}}}],Na=sr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,o){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:o,element:e})}}),Ua=sr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,o){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:o,element:e})}}),Ba=r("ngTransclude"),Va=sr({restrict:"EAC",link:function(t,e,n,r,o){function i(t){t.length&&(e.empty(),e.append(t))}if(n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude=""),!o)throw Ba("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",J(e));var a=n.ngTransclude||n.ngTranscludeSlot;o(i,null,a)}}),za=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var r=n.id,o=e[0].text;t.put(r,o)}}}}],Ga={$setViewValue:m,$render:m},qa=["$element","$scope","$attrs",function(t,r,o){var i=this,a=new te;i.ngModelCtrl=Ga,i.unknownOption=Or(e.createElement("option")),i.renderUnknownOption=function(e){var n="? "+Jt(e)+" ?";i.unknownOption.val(n),t.prepend(i.unknownOption),t.val(n)},r.$on("$destroy",function(){i.renderUnknownOption=m}),i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.readValue=function(){return i.removeUnknownOption(),t.val()},i.writeValue=function(e){i.hasOption(e)?(i.removeUnknownOption(),t.val(e),""===e&&i.emptyOption.prop("selected",!0)):null==e&&i.emptyOption?(i.removeUnknownOption(),t.val("")):i.renderUnknownOption(e)},i.addOption=function(t,e){if(e[0].nodeType!==io){ht(t,'"option value"'),""===t&&(i.emptyOption=e);var n=a.get(t)||0;a.put(t,n+1),i.ngModelCtrl.$render(),Mr(e)}},i.removeOption=function(t){var e=a.get(t);e&&(1===e?(a.remove(t),""===t&&(i.emptyOption=n)):a.put(t,e-1))},i.hasOption=function(t){return!!a.get(t)},i.registerOption=function(t,e,n,r,o){if(r){var a;n.$observe("value",function(t){x(a)&&i.removeOption(a),a=t,i.addOption(t,e)})}else o?t.$watch(o,function(t,r){n.$set("value",t),r!==t&&i.removeOption(r),i.addOption(t,e)}):i.addOption(n.value,e);e.on("$destroy",function(){i.removeOption(n.value),i.ngModelCtrl.$render()})}}],Wa=function(){function t(t,e,n,r){var o=r[1];if(o){var a=r[0];if(a.ngModelCtrl=o,e.on("change",function(){t.$apply(function(){o.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var t=[];return i(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},a.writeValue=function(t){var n=new te(t);i(e.find("option"),function(t){t.selected=x(n.get(t.value))})};var s,l=NaN;t.$watch(function(){l!==o.$viewValue||z(s,o.$viewValue)||(s=V(o.$viewValue),
o.$render()),l=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}}}function e(t,e,n,r){var o=r[1];if(o){var i=r[0];o.$render=function(){i.writeValue(o.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:qa,priority:1,link:{pre:t,post:e}}},Ha=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){if(x(n.value))var r=t(n.value,!0);else{var o=t(e.text(),!0);o||n.$set("value",e.text())}return function(t,e,n){var i="$selectController",a=e.parent(),s=a.data(i)||a.parent().data(i);s&&s.registerOption(t,e,n,r,o)}}}}],Xa=g({restrict:"E",terminal:!1}),Ya=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},Za=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,o,i){if(i){var a,s=o.ngPattern||o.pattern;o.$observe("pattern",function(t){if(k(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,t,J(e));a=t||n,i.$validate()}),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||y(a)||a.test(e)}}}}},Ka=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var o=-1;n.$observe("maxlength",function(t){var e=p(t);o=isNaN(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return 0>o||r.$isEmpty(e)||e.length<=o}}}}},Qa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var o=0;n.$observe("minlength",function(t){o=p(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=o}}}}};return t.angular.bootstrap?void(t.console&&console.log("WARNING: Tried to load angular more than once.")):(ft(),wt(Gr),Gr.module("ngLocale",[],["$provide",function(t){function e(t){t+="";var e=t.indexOf(".");return-1==e?0:t.length-e-1}function r(t,r){var o=r;n===o&&(o=Math.min(e(t),3));var i=Math.pow(10,o),a=(t*i|0)%i;return{v:o,f:a}}var o={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var n=0|t,i=r(t,e);return 1==n&&0==i.v?o.ONE:o.OTHER}})}]),void Or(e).ready(function(){at(e,st)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){n(16),n(20);var r="ui.bootstrap.module.dropdown";angular.module(r,["ui.bootstrap.dropdown"]),t.exports=r},function(t,e,n){n(17),n(18);var r="ui.bootstrap.module.position";angular.module(r,["ui.bootstrap.position"]),t.exports=r},function(t,e){angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(t,e){var n,r={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},o={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};return{getRawNode:function(t){return t.nodeName?t:t[0]||t},parseStyle:function(t){return t=parseFloat(t),isFinite(t)?t:0},offsetParent:function(n){function r(t){return"static"===(e.getComputedStyle(t).position||"static")}n=this.getRawNode(n);for(var o=n.offsetParent||t[0].documentElement;o&&o!==t[0].documentElement&&r(o);)o=o.offsetParent;return o||t[0].documentElement},scrollbarWidth:function(){if(angular.isUndefined(n)){var e=angular.element('<div class="uib-position-scrollbar-measure"></div>');t.find("body").append(e),n=e[0].offsetWidth-e[0].clientWidth,n=isFinite(n)?n:0,e.remove()}return n},isScrollable:function(t,n){t=this.getRawNode(t);var o=n?r.hidden:r.normal,i=e.getComputedStyle(t);return o.test(i.overflow+i.overflowY+i.overflowX)},scrollParent:function(n,o){n=this.getRawNode(n);var i=o?r.hidden:r.normal,a=t[0].documentElement,s=e.getComputedStyle(n),l="absolute"===s.position,u=n.parentElement||a;if(u===a||"fixed"===s.position)return a;for(;u.parentElement&&u!==a;){var c=e.getComputedStyle(u);if(l&&"static"!==c.position&&(l=!1),!l&&i.test(c.overflow+c.overflowY+c.overflowX))break;u=u.parentElement}return u},position:function(n,r){n=this.getRawNode(n);var o=this.offset(n);if(r){var i=e.getComputedStyle(n);o.top-=this.parseStyle(i.marginTop),o.left-=this.parseStyle(i.marginLeft)}var a=this.offsetParent(n),s={top:0,left:0};return a!==t[0].documentElement&&(s=this.offset(a),s.top+=a.clientTop-a.scrollTop,s.left+=a.clientLeft-a.scrollLeft),{width:Math.round(angular.isNumber(o.width)?o.width:n.offsetWidth),height:Math.round(angular.isNumber(o.height)?o.height:n.offsetHeight),top:Math.round(o.top-s.top),left:Math.round(o.left-s.left)}},offset:function(n){n=this.getRawNode(n);var r=n.getBoundingClientRect();return{width:Math.round(angular.isNumber(r.width)?r.width:n.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:n.offsetHeight),top:Math.round(r.top+(e.pageYOffset||t[0].documentElement.scrollTop)),left:Math.round(r.left+(e.pageXOffset||t[0].documentElement.scrollLeft))}},viewportOffset:function(n,r,o){n=this.getRawNode(n),o=o!==!1;var i=n.getBoundingClientRect(),a={top:0,left:0,bottom:0,right:0},s=r?t[0].documentElement:this.scrollParent(n),l=s.getBoundingClientRect();if(a.top=l.top+s.clientTop,a.left=l.left+s.clientLeft,s===t[0].documentElement&&(a.top+=e.pageYOffset,a.left+=e.pageXOffset),a.bottom=a.top+s.clientHeight,a.right=a.left+s.clientWidth,o){var u=e.getComputedStyle(s);a.top+=this.parseStyle(u.paddingTop),a.bottom-=this.parseStyle(u.paddingBottom),a.left+=this.parseStyle(u.paddingLeft),a.right-=this.parseStyle(u.paddingRight)}return{top:Math.round(i.top-a.top),bottom:Math.round(a.bottom-i.bottom),left:Math.round(i.left-a.left),right:Math.round(a.right-i.right)}},parsePlacement:function(t){var e=o.auto.test(t);return e&&(t=t.replace(o.auto,"")),t=t.split("-"),t[0]=t[0]||"top",o.primary.test(t[0])||(t[0]="top"),t[1]=t[1]||"center",o.secondary.test(t[1])||(t[1]="center"),e?t[2]=!0:t[2]=!1,t},positionElements:function(t,n,r,i){t=this.getRawNode(t),n=this.getRawNode(n);var a=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),s=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");r=this.parsePlacement(r);var l=i?this.offset(t):this.position(t),u={top:0,left:0,placement:""};if(r[2]){var c=this.viewportOffset(t,i),f=e.getComputedStyle(n),d={width:a+Math.round(Math.abs(this.parseStyle(f.marginLeft)+this.parseStyle(f.marginRight))),height:s+Math.round(Math.abs(this.parseStyle(f.marginTop)+this.parseStyle(f.marginBottom)))};if(r[0]="top"===r[0]&&d.height>c.top&&d.height<=c.bottom?"bottom":"bottom"===r[0]&&d.height>c.bottom&&d.height<=c.top?"top":"left"===r[0]&&d.width>c.left&&d.width<=c.right?"right":"right"===r[0]&&d.width>c.right&&d.width<=c.left?"left":r[0],r[1]="top"===r[1]&&d.height-l.height>c.bottom&&d.height-l.height<=c.top?"bottom":"bottom"===r[1]&&d.height-l.height>c.top&&d.height-l.height<=c.bottom?"top":"left"===r[1]&&d.width-l.width>c.right&&d.width-l.width<=c.left?"right":"right"===r[1]&&d.width-l.width>c.left&&d.width-l.width<=c.right?"left":r[1],"center"===r[1])if(o.vertical.test(r[0])){var p=l.width/2-a/2;c.left+p<0&&d.width-l.width<=c.right?r[1]="left":c.right+p<0&&d.width-l.width<=c.left&&(r[1]="right")}else{var h=l.height/2-d.height/2;c.top+h<0&&d.height-l.height<=c.bottom?r[1]="top":c.bottom+h<0&&d.height-l.height<=c.top&&(r[1]="bottom")}}switch(r[0]){case"top":u.top=l.top-s;break;case"bottom":u.top=l.top+l.height;break;case"left":u.left=l.left-a;break;case"right":u.left=l.left+l.width}switch(r[1]){case"top":u.top=l.top;break;case"bottom":u.top=l.top+l.height-s;break;case"left":u.left=l.left;break;case"right":u.left=l.left+l.width-a;break;case"center":o.vertical.test(r[0])?u.left=l.left+l.width/2-a/2:u.top=l.top+l.height/2-s/2}return u.top=Math.round(u.top),u.left=Math.round(u.left),u.placement="center"===r[1]?r[0]:r[0]+"-"+r[1],u},positionArrow:function(t,n){t=this.getRawNode(t);var r=t.querySelector(".tooltip-inner, .popover-inner");if(r){var i=angular.element(r).hasClass("tooltip-inner"),a=i?t.querySelector(".tooltip-arrow"):t.querySelector(".arrow");if(a){var s={top:"",bottom:"",left:"",right:""};if(n=this.parsePlacement(n),"center"===n[1])return void angular.element(a).css(s);var l="border-"+n[0]+"-width",u=e.getComputedStyle(a)[l],c="border-";c+=o.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],c+="-radius";var f=e.getComputedStyle(i?r:t)[c];switch(n[0]){case"top":s.bottom=i?"0":"-"+u;break;case"bottom":s.top=i?"0":"-"+u;break;case"left":s.right=i?"0":"-"+u;break;case"right":s.left=i?"0":"-"+u}s[n[1]]=f,angular.element(a).css(s)}}}}}])},function(t,e,n){var r=n(19);"string"==typeof r&&(r=[[t.id,r,""]]);n(11)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,".uib-position-measure{display:block!important;visibility:hidden!important;position:absolute!important;top:-9999px!important;left:-9999px!important}.uib-position-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}",""])},function(t,e){angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(t,e){var n=null;this.open=function(e){n||(t.on("click",r),t.on("keydown",o)),n&&n!==e&&(n.isOpen=!1),n=e},this.close=function(e){n===e&&(n=null,t.off("click",r),t.off("keydown",o))};var r=function(t){if(n&&!(t&&"disabled"===n.getAutoClose()||t&&3===t.which)){var r=n.getToggleElement();if(!(t&&r&&r[0].contains(t.target))){var o=n.getDropdownElement();t&&"outsideClick"===n.getAutoClose()&&o&&o[0].contains(t.target)||(n.isOpen=!1,e.$$phase||n.$apply())}}},o=function(t){27===t.which?(n.focusToggleElement(),r()):n.isKeynavEnabled()&&-1!==[38,40].indexOf(t.which)&&n.isOpen&&(t.preventDefault(),t.stopPropagation(),n.focusDropdownEntry(t.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(t,e,n,r,o,i,a,s,l,u,c){var f,d,p=this,h=t.$new(),m=o.appendToOpenClass,b=o.openClass,g=angular.noop,v=n.onToggle?r(n.onToggle):angular.noop,y=!1,x=null,w=!1,_=l.find("body");e.addClass("dropdown"),this.init=function(){if(n.isOpen&&(d=r(n.isOpen),g=d.assign,t.$watch(d,function(t){h.isOpen=!!t})),angular.isDefined(n.dropdownAppendTo)){var o=r(n.dropdownAppendTo)(h);o&&(x=angular.element(o))}y=angular.isDefined(n.dropdownAppendToBody),w=angular.isDefined(n.keyboardNav),y&&!x&&(x=_),x&&p.dropdownMenu&&(x.append(p.dropdownMenu),e.on("$destroy",function(){p.dropdownMenu.remove()}))},this.toggle=function(t){return h.isOpen=arguments.length?!!t:!h.isOpen,angular.isFunction(g)&&g(h,h.isOpen),h.isOpen},this.isOpen=function(){return h.isOpen},h.getToggleElement=function(){return p.toggleElement},h.getAutoClose=function(){return n.autoClose||"always"},h.getElement=function(){return e},h.isKeynavEnabled=function(){return w},h.focusDropdownEntry=function(t){var n=p.dropdownMenu?angular.element(p.dropdownMenu).find("a"):e.find("ul").eq(0).find("a");switch(t){case 40:angular.isNumber(p.selectedOption)?p.selectedOption=p.selectedOption===n.length-1?p.selectedOption:p.selectedOption+1:p.selectedOption=0;break;case 38:angular.isNumber(p.selectedOption)?p.selectedOption=0===p.selectedOption?0:p.selectedOption-1:p.selectedOption=n.length-1}n[p.selectedOption].focus()},h.getDropdownElement=function(){return p.dropdownMenu},h.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},h.$watch("isOpen",function(n,r){if(x&&p.dropdownMenu){var o,l,d=s.positionElements(e,p.dropdownMenu,"bottom-left",!0);if(o={top:d.top+"px",display:n?"block":"none"},l=p.dropdownMenu.hasClass("dropdown-menu-right"),l?(o.left="auto",o.right=window.innerWidth-(d.left+e.prop("offsetWidth"))+"px"):(o.left=d.left+"px",o.right="auto"),!y){var w=s.offset(x);o.top=d.top-w.top+"px",l?o.right=window.innerWidth-(d.left-w.left+e.prop("offsetWidth"))+"px":o.left=d.left-w.left+"px"}p.dropdownMenu.css(o)}var _=x?x:e,k=_.hasClass(x?m:b);if(k===!n&&a[n?"addClass":"removeClass"](_,x?m:b).then(function(){angular.isDefined(n)&&n!==r&&v(t,{open:!!n})}),n)p.dropdownMenuTemplateUrl&&c(p.dropdownMenuTemplateUrl).then(function(t){f=h.$new(),u(t.trim())(f,function(t){var e=t;p.dropdownMenu.replaceWith(e),p.dropdownMenu=e})}),h.focusToggleElement(),i.open(h);else{if(p.dropdownMenuTemplateUrl){f&&f.$destroy();var E=angular.element('<ul class="dropdown-menu"></ul>');p.dropdownMenu.replaceWith(E),p.dropdownMenu=E}i.close(h),p.selectedOption=null}angular.isFunction(g)&&g(t,n)}),t.$on("$locationChangeSuccess",function(){"disabled"!==h.getAutoClose()&&(h.isOpen=!1)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(t,e,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(t,e,n,r){if(r&&!angular.isDefined(n.dropdownNested)){e.addClass("dropdown-menu");var o=n.templateUrl;o&&(r.dropdownMenuTemplateUrl=o),r.dropdownMenu||(r.dropdownMenu=e)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(t,e,n,r){if(r){e.addClass("dropdown-toggle"),r.toggleElement=e;var o=function(o){o.preventDefault(),e.hasClass("disabled")||n.disabled||t.$apply(function(){r.toggle()})};e.bind("click",o),e.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(r.isOpen,function(t){e.attr("aria-expanded",!!t)}),t.$on("$destroy",function(){e.unbind("click",o)})}}}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="/get/",r="zip",o="http://deamon87.github.io/WoWFiles/shattrath.zip",i=null,a=!0,s=!1,l=!1,u=!1,c=!1,f=!1,d=localStorage.getItem("urlForLoading");d&&(n=d);var p=null;e["default"]={getUrlToLoadWoWFile:function(){return n},setUrlToLoadWoWFile:function(t){n=t,localStorage.setItem("urlForLoading",t)},getFileReadMethod:function(){return r},setFileReadMethod:function(t){r=t},getArchiveUrl:function(){return o},setArchiveUrl:function(t){o=t},getArchiveFile:function(){return i},setArchiveFile:function(t){i=t},getRenderM2:function(){return a},setRenderM2:function(t){a=t},getRenderBSP:function(){return s},setRenderBSP:function(t){s=t},getRenderPortals:function(){return l},setRenderPortals:function(t){l=t},getUsePortalCulling:function(){return u},setUsePortalCulling:function(t){u=t},getSceneParams:function(){return p},setSceneParams:function(t){p=t},getDrawWmoBB:function(){return c},setDrawWmoBB:function(t){c=t},getDrawM2BB:function(){return f},setDrawM2BB:function(t){f=t}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(13),i=r(o),a=n(23),s=r(a),l=n(21),u=r(l),c=i["default"].module("main.directives.wowJsRender",[]);c.directive("wowJsRender",["$log","$timeout","$interval","$window",function(t,e,n,r){return{restrict:"E",template:'<div class=""><canvas width = "1024" height = "768" ></canvas><div>camera = ( {{cameraVecs.cameraVec3[0]}}, {{cameraVecs.cameraVec3[1]}}, {{cameraVecs.cameraVec3[2]}} )</div><div>lookAt = ( {{cameraVecs.lookAtVec3[0]}}, {{cameraVecs.lookAtVec3[1]}}, {{cameraVecs.lookAtVec3[2]}} )</div><div>Group number = {{updateResult.interiorGroupNum}}</div><div>BSP Node Id = {{updateResult.nodeId}}</div><input type="checkbox" ng-model="drawM2" >Draw M2 objects</input><input type="checkbox" ng-model="drawPortals">Draw portals</input><input type="checkbox" ng-model="drawM2BB">Draw M2 BB</input><input type="checkbox" ng-model="drawWmoBB">Draw Wmo BB</input><input type="checkbox" ng-model="drawBSP">Draw BSP leafs</input></div>',link:function(t,e,n){var o=e.find("canvas")[0],i=u["default"].getSceneParams(),a=new s["default"](o),l=void 0;if("map"==i.sceneType){var c=Math.floor(32-i.y/533.33333),f=Math.floor(32-i.x/533.33333);a.loadMap(i.mapName,c,f),a.setCameraPos(i.x,i.y,i.z)}else"wmo"==i.sceneType?a.loadWMOFile({fileName:i.fileName,uniqueId:0,pos:{x:17066.666666656,y:0,z:17066.666666656},rotation:{x:0,y:0,z:0},doodadSet:0}):"m2"==i.sceneType&&a.loadM2File({fileName:i.modelName,uniqueId:0,pos:{x:17066.666666656,y:0,z:17066.666666656},rotation:{x:0,y:0,z:0},scale:1024});t.$watch("drawM2BB",function(t){u["default"].setDrawM2BB(t)}),t.$watch("drawWmoBB",function(t){u["default"].setDrawWmoBB(t)}),t.$watch("drawBSP",function(t){u["default"].setRenderBSP(t)}),t.$watch("drawM2",function(t){u["default"].setRenderM2(t)}),t.$watch("drawPortals",function(t){u["default"].setRenderPortals(t)});var d=function p(){var e=(new Date).getTime(),n=0;void 0!==l&&(n=e-l),l=e;var o=a.draw(n),i=o.cameraVecs,s=o.updateResult;t.cameraVecs=i,t.updateResult=s,r.requestAnimationFrame(p)};r.requestAnimationFrame(d),r.setInterval(function(){t.$digest()},200)}}}])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(24),s=r(a),l=n(25),u=(r(l),n(43)),c=r(u),f=n(44),d=r(f),p=n(45),h=r(p),m=n(46),b=r(m),g=n(47),v=r(g),y=n(48),x=r(y),w=n(49),_=r(w),k=n(50),E=r(k),$=n(51),M=r($),A=n(70),T=r(A),S=n(76),C=r(S),F=n(79),I=r(F),D=n(82),R=r(D),O=n(84),P=r(O),j=n(86),L=r(j),N=n(87),U=r(N),B=n(90),V=r(B),z=n(58);z.glMatrix.setMatrixArrayType(Array);var G=function(){function t(e){o(this,t);var n=new s["default"];n.setMode(1),n.domElement.style.position="absolute",n.domElement.style.left="0px",n.domElement.style.top="0px",document.body.appendChild(n.domElement),this.stats=n;var r=this;r.enableDeferred=!1,r.sceneObjectList=[],r.sceneAdts=[],r.initGlContext(e),r.initArrayInstancedExt(),r.initDepthTextureExt(),r.enableDeferred&&r.initDeferredRendering(),r.initRenderBuffers(),r.initAnisotropicExt(),r.initCompressedTextureS3tcExt(),r.initShaders(),r.isShadersLoaded=!0,r.initSceneApi(),r.initSceneGraph(),r.createBlackPixelTexture(),r.initBoxVBO(),r.initCaches(),r.initCamera(e,document)}return i(t,[{key:"compileShader",value:function(t,e){var n=this.gl;this.enableDeferred&&(t="#define ENABLE_DEFERRED 1\r\n"+t,e="#define ENABLE_DEFERRED 1\r\n"+e);var r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,"#define COMPILING_VS 1\r\n "+t),n.compileShader(r);var o=n.getShaderParameter(r,n.COMPILE_STATUS);if(!o)throw"could not compile shader:"+n.getShaderInfoLog(r);var i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,"#define COMPILING_FS 1\r\n "+e),n.compileShader(i);var o=n.getShaderParameter(i,n.COMPILE_STATUS);if(!o)throw"could not compile shader:"+n.getShaderInfoLog(i);var a=n.createProgram();n.attachShader(a,r),n.attachShader(a,i),n.linkProgram(a);var o=n.getProgramParameter(a,n.LINK_STATUS);if(!o)throw"program filed to link:"+n.getProgramInfoLog(a);var s={};s.program=a;for(var l={},u=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),c=0;u>c;++c){var f=n.getActiveAttrib(a,c);if(!f)break;var d=n.getAttribLocation(a,f.name);l[f.name]=d}s.shaderAttributes=l;for(var p={},h=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),c=0;h>c;++c){var m=n.getActiveUniform(a,c);if(!m)break;var b=m.name;"[0]"===b.substr(-3)&&(b=b.substr(0,b.length-3));var g=n.getUniformLocation(a,b);p[b]=g}return s.shaderUniforms=p,s}},{key:"createBlackPixelTexture",value:function(){var t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([255,255,255,255])),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),this.blackPixelTexture=e}},{key:"initGlContext",value:function(t){function e(t,e,n){throw WebGLDebugUtils.glEnumToString(t)+" was caused by call to: "+e}function n(t,e){for(var n=0;n<e.length;++n)void 0===e[n]&&console.error("undefined passed to gl."+t+"("+WebGLDebugUtils.glFunctionArgsToString(t,e)+")")}try{var r=t.getContext("webgl",{premultipliedAlpha:!1,alpha:!1})||t.getContext("experimental-webgl",{premultipliedAlpha:!1});r=WebGLDebugUtils.makeDebugContext(r,e,n)}catch(o){}r||(alert("Unable to initialize WebGL. Your browser may not support it."),r=null),this.gl=r,this.canvas=t}},{key:"initArrayInstancedExt",value:function(){var t=this.gl,e=t.getExtension("ANGLE_instanced_arrays");e&&(this.instancing_ext=e)}},{key:"initAnisotropicExt",value:function(){var t=this.gl,e=t.getExtension("EXT_texture_filter_anisotropic");e&&(this.anisotropic_ext=e)}},{key:"initCompressedTextureS3tcExt",value:function(){var t=this.gl,e=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");e&&(this.comp_tex_ext=e)}},{key:"initDepthTextureExt",value:function(){var t=this.gl,e=t.getExtension("WEBGL_depth_texture");e&&(this.depth_texture_ext=e)}},{key:"initDeferredRendering",value:function(){var t=this.gl,e=t.getExtension("WEBGL_draw_buffers");e?this.wdb_ext=e:this.enableDeferred=!1}},{key:"initShaders",value:function(){var t=this;t.renderFrameShader=t.compileShader(d["default"],d["default"]),t.drawDepthBuffer=t.compileShader(c["default"],c["default"]),t.readDepthBuffer=t.compileShader(h["default"],h["default"]),t.wmoShader=t.compileShader(b["default"],b["default"]),t.wmoInstancingShader=t.compileShader("#define INSTANCED 1\r\n "+b["default"],"#define INSTANCED 1\r\n "+b["default"]),t.m2Shader=t.compileShader(v["default"],v["default"]),t.m2InstancingShader=t.compileShader("#define INSTANCED 1\r\n "+v["default"],"#define INSTANCED 1\r\n "+v["default"]),t.bbShader=t.compileShader(x["default"],x["default"]),t.adtShader=t.compileShader(_["default"],_["default"]),t.drawPortalShader=t.compileShader(E["default"],E["default"])}},{key:"initCaches",value:function(){this.wmoGeomCache=new P["default"](this.sceneApi),this.wmoMainCache=new L["default"](this.sceneApi),this.textureCache=new U["default"](this.sceneApi),this.m2GeomCache=new I["default"](this.sceneApi),this.skinGeomCache=new R["default"](this.sceneApi),this.adtGeomCache=new C["default"](this.sceneApi)}},{key:"initDrawBuffers",value:function(t){var e=this.gl,n=this.wdb_ext;this.texture_floatExt=e.getExtension("OES_texture_float"),this.texture_floatLinExt=e.getExtension("OES_texture_float_linear");var r=e.createTexture(),o=e.createTexture(),i=e.createTexture(),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.canvas.width,this.canvas.height,0,e.RGBA,e.FLOAT,null),e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.canvas.width,this.canvas.height,0,e.RGBA,e.FLOAT,null),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.canvas.width,this.canvas.height,0,e.RGBA,e.FLOAT,null),e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.canvas.width,this.canvas.height,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,t);var s=[];s[0]=n.COLOR_ATTACHMENT0_WEBGL,s[1]=n.COLOR_ATTACHMENT1_WEBGL,s[2]=n.COLOR_ATTACHMENT2_WEBGL,s[3]=n.COLOR_ATTACHMENT3_WEBGL,n.drawBuffersWEBGL(s),e.framebufferTexture2D(e.FRAMEBUFFER,s[0],e.TEXTURE_2D,a,0),e.framebufferTexture2D(e.FRAMEBUFFER,s[1],e.TEXTURE_2D,r,0),e.framebufferTexture2D(e.FRAMEBUFFER,s[2],e.TEXTURE_2D,o,0),e.framebufferTexture2D(e.FRAMEBUFFER,s[3],e.TEXTURE_2D,i,0),this.depthRGBTexture=a,this.normalTexture=r,this.positionTexture=o,this.colorTexture=i}},{key:"initRenderBuffers",value:function(){var t=this.gl;if(this.depth_texture_ext){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.canvas.width,this.canvas.height,0,t.RGBA,t.UNSIGNED_BYTE,null);var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.DEPTH_COMPONENT,this.canvas.width,this.canvas.height,0,t.DEPTH_COMPONENT,t.UNSIGNED_INT,null);var r=t.createFramebuffer();this.enableDeferred&&this.initDrawBuffers(r),t.bindFramebuffer(t.FRAMEBUFFER,r),this.enableDeferred||t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,n,0),this.frameBuffer=r,this.frameBufferColorTexture=e,this.frameBufferDepthTexture=n;var o=[1,1,-1,1,-1,-1,1,1,-1,-1,1,-1],i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),this.vertBuffer=i}}},{key:"initSceneGraph",value:function(){this.graphManager=new M["default"](this.sceneApi)}},{key:"initSceneApi",value:function(){var t=this;this.sceneApi={getGlContext:function(){return t.gl},getCurrentWdt:function(){return t.currentWdt},getBlackPixelTexture:function(){return t.blackPixelTexture},extensions:{getInstancingExt:function(){return t.instancing_ext},getAnisotropicExt:function(){return t.anisotropic_ext},getComprTextExt:function(){return t.comp_tex_ext}},shaders:{activateBoundingBoxShader:function(){t.activateBoundingBoxShader()},deativateBoundingBoxShader:function(){t.deactivateBoundingBoxShader()},activateAdtShader:function(){t.activateAdtShader()},activateDrawPortalShader:function(){t.activateDrawPortalShader()},activateWMOShader:function(){t.activateWMOShader()},deactivateWMOShader:function(){t.deactivateWMOShader()},activateM2Shader:function(){t.activateM2Shader()},deactivateM2Shader:function(){t.deactivateM2Shader()},activateM2InstancingShader:function(){t.activateM2InstancingShader()},deactivateM2InstancingShader:function(){t.deactivateM2InstancingShader()},getShaderUniforms:function(){return t.currentShaderProgram.shaderUniforms},getShaderAttributes:function(){return t.currentShaderProgram.shaderAttributes}},objects:{loadAdtM2Obj:function(e){return t.graphManager.addAdtM2Object(e)},loadAdtWmo:function(e){return t.graphManager.addWmoObject(e)},loadWmoM2Obj:function(e,n,r){return t.graphManager.addWmoM2Object(e,n,r)},loadAdtChunk:function(e){return t.graphManager.addADTObject(e)}},resources:{loadTexture:function(e){return t.textureCache.loadTexture(e)},unLoadTexture:function(e){t.textureCache.unLoadTexture(e)},loadWmoMain:function(e){return t.wmoMainCache.loadWmoMain(e)},unloadWmoMain:function(e){t.wmoMainCache.unloadWmoMain(e)},loadWmoGeom:function(e){return t.wmoGeomCache.loadWmoGeom(e)},unloadWmoGeom:function(e){t.wmoGeomCache.unLoadWmoGeom(e)},loadM2Geom:function(e){return t.m2GeomCache.loadM2(e)},unloadM2Geom:function(e){t.m2GeomCache.unLoadM2(e)},loadSkinGeom:function(e){return t.skinGeomCache.loadSkin(e)},unloadSkinGeom:function(e){t.skinGeomCache.unLoadSkin(e)},loadAdtGeom:function(e){return t.adtGeomCache.loadAdt(e)},unloadAdtGeom:function(e){t.adtGeomCache.unLoadAdt(e)}}}}},{key:"initCamera",value:function(t,e){this.camera=(0,V["default"])(t,e)}},{key:"initBoxVBO",value:function(){var t=this.gl,e=[-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1],n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null);var r=[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,7,6,6,1,1,0,0,7,3,2,2,5,5,4,4,3,6,5,5,2,2,1,1,6,0,3,3,4,4,7,7,0],o=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(r),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this.bbBoxVars={vbo_vertices:n,ibo_elements:o}}},{key:"glClearScreen",value:function(t){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.disable(t.BLEND),t.clearColor(.6,.95,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.disable(t.CULL_FACE)}},{key:"activateRenderFrameShader",value:function(){if(this.currentShaderProgram=this.renderFrameShader,this.currentShaderProgram){var t=this.gl;t.useProgram(this.currentShaderProgram.program);this.sceneApi.shaders.getShaderAttributes();t.activeTexture(t.TEXTURE0),t.disableVertexAttribArray(1),t.uniform1i(this.currentShaderProgram.shaderUniforms.u_sampler,0),this.currentShaderProgram.shaderUniforms.u_depth&&t.uniform1i(this.currentShaderProgram.shaderUniforms.u_depth,1)}}},{key:"activateRenderDepthShader",value:function(){if(this.currentShaderProgram=this.drawDepthBuffer,this.currentShaderProgram){var t=this.gl;t.useProgram(this.currentShaderProgram.program);this.sceneApi.shaders.getShaderAttributes();t.activeTexture(t.TEXTURE0)}}},{key:"activateReadDepthBuffer",value:function(){if(this.currentShaderProgram=this.readDepthBuffer,this.currentShaderProgram){var t=this.gl;t.useProgram(this.currentShaderProgram.program);this.sceneApi.shaders.getShaderAttributes();t.activeTexture(t.TEXTURE0),t.enableVertexAttribArray(this.currentShaderProgram.shaderAttributes.position),t.enableVertexAttribArray(this.currentShaderProgram.shaderAttributes.texture)}}},{key:"activateAdtShader",value:function(){if(this.currentShaderProgram=this.adtShader,this.currentShaderProgram){var t=this.gl,e=(this.sceneApi.extensions.getInstancingExt(),this.sceneApi.shaders.getShaderAttributes());t.useProgram(this.currentShaderProgram.program),t.enableVertexAttribArray(e.aHeight),
t.enableVertexAttribArray(e.aIndex),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),this.currentWdt&&(4&this.currentWdt.flags)>0?t.uniform1i(this.currentShaderProgram.shaderUniforms.uNewFormula,1):t.uniform1i(this.currentShaderProgram.shaderUniforms.uNewFormula,0),t.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer0,0),t.uniform1i(this.currentShaderProgram.shaderUniforms.uAlphaTexture,1),t.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer1,2),t.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer2,3),t.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer3,4)}}},{key:"activateWMOShader",value:function(){if(this.currentShaderProgram=this.wmoShader,this.currentShaderProgram){var t=this.gl;t.useProgram(this.currentShaderProgram.program);var e=this.sceneApi.shaders.getShaderAttributes();t.enableVertexAttribArray(e.aPosition),e.aNormal&&t.enableVertexAttribArray(e.aNormal),t.enableVertexAttribArray(e.aTexCoord),t.enableVertexAttribArray(e.aTexCoord2),t.enableVertexAttribArray(e.aColor),t.enableVertexAttribArray(e.aColor2),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),t.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture,0),t.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture2,1),t.activeTexture(t.TEXTURE0)}}},{key:"deactivateWMOShader",value:function(){var t=this.gl,e=(this.sceneApi.extensions.getInstancingExt(),this.sceneApi.shaders.getShaderAttributes());e.aNormal&&t.disableVertexAttribArray(e.aNormal),t.disableVertexAttribArray(e.aTexCoord),t.disableVertexAttribArray(e.aTexCoord2),t.disableVertexAttribArray(e.aColor),t.disableVertexAttribArray(e.aColor2)}},{key:"activateM2Shader",value:function(){if(this.currentShaderProgram=this.m2Shader,this.currentShaderProgram){var t=this.gl;t.useProgram(this.currentShaderProgram.program);var e=this.sceneApi.shaders.getShaderAttributes();t.enableVertexAttribArray(e.aPosition),e.aNormal&&t.enableVertexAttribArray(e.aNormal),t.enableVertexAttribArray(e.boneWeights),t.enableVertexAttribArray(e.bones),t.enableVertexAttribArray(e.aTexCoord),t.enableVertexAttribArray(e.aTexCoord2),t.disableVertexAttribArray(e.aColor),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),this.currentShaderProgram.shaderUniforms.isBillboard&&t.uniform1i(this.currentShaderProgram.shaderUniforms.isBillboard,0),t.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture,0),t.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture2,1),t.activeTexture(t.TEXTURE0)}}},{key:"deactivateM2Shader",value:function(){var t=this.gl,e=(this.sceneApi.extensions.getInstancingExt(),this.sceneApi.shaders.getShaderAttributes());e.aNormal&&t.disableVertexAttribArray(e.aNormal),t.disableVertexAttribArray(e.boneWeights),t.disableVertexAttribArray(e.bones),t.disableVertexAttribArray(e.aTexCoord),t.disableVertexAttribArray(e.aTexCoord2)}},{key:"activateM2InstancingShader",value:function(){if(this.currentShaderProgram=this.m2InstancingShader,this.currentShaderProgram){var t=this.gl,e=this.sceneApi.extensions.getInstancingExt(),n=this.sceneApi.shaders.getShaderAttributes();t.useProgram(this.currentShaderProgram.program),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),t.activeTexture(t.TEXTURE0),t.enableVertexAttribArray(n.aPosition),n.aNormal&&t.enableVertexAttribArray(n.aNormal),t.enableVertexAttribArray(n.boneWeights),t.enableVertexAttribArray(n.bones),t.enableVertexAttribArray(n.aTexCoord),t.enableVertexAttribArray(n.aTexCoord2),t.disableVertexAttribArray(n.aColor),t.enableVertexAttribArray(n.uPlacementMat+0),t.enableVertexAttribArray(n.uPlacementMat+1),t.enableVertexAttribArray(n.uPlacementMat+2),t.enableVertexAttribArray(n.uPlacementMat+3),null!=e&&(e.vertexAttribDivisorANGLE(n.uPlacementMat+0,1),e.vertexAttribDivisorANGLE(n.uPlacementMat+1,1),e.vertexAttribDivisorANGLE(n.uPlacementMat+2,1),e.vertexAttribDivisorANGLE(n.uPlacementMat+3,1))}}},{key:"deactivateM2InstancingShader",value:function(){var t=this.gl,e=this.sceneApi.extensions.getInstancingExt(),n=this.sceneApi.shaders.getShaderAttributes();n.aNormal&&t.disableVertexAttribArray(n.aNormal),t.disableVertexAttribArray(n.boneWeights),t.disableVertexAttribArray(n.bones),t.disableVertexAttribArray(n.aTexCoord),t.disableVertexAttribArray(n.aTexCoord2),e&&(e.vertexAttribDivisorANGLE(n.uPlacementMat+0,0),e.vertexAttribDivisorANGLE(n.uPlacementMat+1,0),e.vertexAttribDivisorANGLE(n.uPlacementMat+2,0),e.vertexAttribDivisorANGLE(n.uPlacementMat+3,0)),t.disableVertexAttribArray(n.uPlacementMat+0),t.disableVertexAttribArray(n.uPlacementMat+1),t.disableVertexAttribArray(n.uPlacementMat+2),t.disableVertexAttribArray(n.uPlacementMat+3)}},{key:"activateBoundingBoxShader",value:function(){if(this.currentShaderProgram=this.bbShader,this.currentShaderProgram){var t=this.gl;t.useProgram(this.currentShaderProgram.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bbBoxVars.ibo_elements),t.bindBuffer(t.ARRAY_BUFFER,this.bbBoxVars.vbo_vertices),t.vertexAttribPointer(this.currentShaderProgram.shaderAttributes.aPosition,3,t.FLOAT,!1,0,0),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix)}}},{key:"activateDrawPortalShader",value:function(){if(this.currentShaderProgram=this.drawPortalShader,this.currentShaderProgram){var t=this.gl;t.useProgram(this.currentShaderProgram.program),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),t.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix)}}},{key:"drawTexturedQuad",value:function(t,e,n,r,o,i,a,s){if(!this.quadShader){var l=[-1,1,0,1,-1,-1,0,0,1,1,1,1,-1,-1,0,0,1,-1,1,0,1,1,1,1];this.quadVertBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVertBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(l),t.STATIC_DRAW)}t.disable(t.DEPTH_TEST),t.bindBuffer(t.ARRAY_BUFFER,this.quadVertBuffer),t.vertexAttribPointer(this.drawDepthBuffer.shaderAttributes.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(this.drawDepthBuffer.shaderAttributes.texture,2,t.FLOAT,!1,16,8),t.uniform1f(this.drawDepthBuffer.shaderUniforms.uWidth,o/a),t.uniform1f(this.drawDepthBuffer.shaderUniforms.uHeight,i/s),t.uniform1f(this.drawDepthBuffer.shaderUniforms.uX,n/a),t.uniform1f(this.drawDepthBuffer.shaderUniforms.uY,r/s),t.bindTexture(t.TEXTURE_2D,e),t.drawArrays(t.TRIANGLES,0,6),t.enable(t.DEPTH_TEST)}},{key:"drawFrameBuffer",value:function(){var t=this.gl;this.enableDeferred?t.bindTexture(t.TEXTURE_2D,this.colorTexture):(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.frameBufferColorTexture),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.frameBufferDepthTexture));var e=this.currentShaderProgram.shaderUniforms;e.gauss_offsets&&(t.uniform1fv(e.gauss_offsets,[0/this.canvas.height,1/this.canvas.height,2/this.canvas.height,3/this.canvas.height,4/this.canvas.height]),t.uniform1fv(e.gauss_weights,[.227027027,.1945945946,.1216216216,.0540540541,.0162162162])),t.bindBuffer(t.ARRAY_BUFFER,this.vertBuffer),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),t.drawArrays(t.TRIANGLES,0,6)}},{key:"draw",value:function(t){var e=this.gl;if(!this.depthBuffer){var n=new Uint8Array(this.canvas.width*this.canvas.height*4);this.depthBuffer=n}this.stats.begin(),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer);var r=this.camera.tick(t),o=[];z.mat4.lookAt(o,r.cameraVec3,r.lookAtVec3,[0,0,1]);var i=[];z.mat4.lookAt(i,[-1873.050857362244,5083.140737452966,574.1095576120073],[-1872.9643854413891,5083.406870660209,573.1495077576213],[0,0,1]);var a=[];if(z.mat4.perspective(a,45,this.canvas.width/this.canvas.height,1,1e3),this.graphManager.checkCulling(a,o),this.perspectiveMatrix&&this.lookAtMat4,this.perspectiveMatrix=a,r.staticCamera?this.lookAtMat4=i:this.lookAtMat4=o,this.isShadersLoaded){this.glClearScreen(e),e.activeTexture(e.TEXTURE0),this.graphManager.setCameraPos(z.vec4.fromValues(r.cameraVec3[0],r.cameraVec3[1],r.cameraVec3[2],1)),this.graphManager.setLookAtMat(o);var s=this.graphManager.update(t);return e.depthMask(!0),this.graphManager.draw(),e.bindFramebuffer(e.FRAMEBUFFER,null),this.glClearScreen(e),this.activateReadDepthBuffer(),e.disable(e.DEPTH_TEST),this.activateRenderFrameShader(),this.drawFrameBuffer(),this.activateRenderDepthShader(),this.drawTexturedQuad(e,this.frameBufferDepthTexture,.75*this.canvas.width,0,.25*this.canvas.width,.25*this.canvas.height,this.canvas.width,this.canvas.height),e.enable(e.DEPTH_TEST),this.stats.end(),{cameraVecs:r,updateResult:s}}}},{key:"loadM2File",value:function(t){this.sceneApi.objects.loadAdtM2Obj(t)}},{key:"loadWMOFile",value:function(t){this.sceneApi.objects.loadAdtWmo(t)}},{key:"loadMap",value:function(t,e,n){var r=this,o="world/maps/"+t+"/"+t+".wdt";(0,T["default"])(o).then(function(o){if(r.currentWdt=o,o.isWMOMap)r.sceneApi.objects.loadAdtWmo(o.modfChunk);else{var i="world/maps/"+t+"/"+t+"_"+e+"_"+n+".adt";r.graphManager.addADTObject(i)}},function(){})}},{key:"setCameraPos",value:function(t,e,n){this.camera.setCameraPos(t,e,n)}}]),t}();e["default"]=G},function(t,e,n){var r=function(){function t(t,e,n){var r=document.createElement(t);return r.id=e,r.style.cssText=n,r}function e(e,n,r){var o=t("div",e,"padding:0 0 3px 3px;text-align:left;background:"+r),i=t("div",e+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+n);i.innerHTML=e.toUpperCase(),o.appendChild(i);var a=t("div",e+"Graph","width:74px;height:30px;background:"+n);o.appendChild(a);for(var s=0;74>s;s++)a.appendChild(t("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+r));return o}function n(t){for(var e=u.children,n=0;n<e.length;n++)e[n].style.display=n===t?"block":"none";l=t}function r(t,e){var n=t.appendChild(t.firstChild);n.style.height=Math.min(30,30-30*e)+"px"}var o=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,i=o(),a=i,s=0,l=0,u=t("div","stats","width:80px;opacity:0.9;cursor:pointer");u.addEventListener("mousedown",function(t){t.preventDefault(),n(++l%u.children.length)},!1);var c=0,f=1/0,d=0,p=e("fps","#0ff","#002"),h=p.children[0],m=p.children[1];u.appendChild(p);var b=0,g=1/0,v=0,y=e("ms","#0f0","#020"),x=y.children[0],w=y.children[1];if(u.appendChild(y),self.performance&&self.performance.memory){var _=0,k=1/0,E=0,$=e("mb","#f08","#201"),M=$.children[0],A=$.children[1];u.appendChild($)}return n(l),{REVISION:14,domElement:u,setMode:n,begin:function(){i=o()},end:function(){var t=o();if(b=t-i,g=Math.min(g,b),v=Math.max(v,b),x.textContent=(0|b)+" MS ("+(0|g)+"-"+(0|v)+")",r(w,b/200),s++,t>a+1e3&&(c=Math.round(1e3*s/(t-a)),f=Math.min(f,c),d=Math.max(d,c),h.textContent=c+" FPS ("+f+"-"+d+")",r(m,c/100),a=t,s=0,void 0!==_)){var e=performance.memory.usedJSHeapSize,n=performance.memory.jsHeapSizeLimit;_=Math.round(9.54e-7*e),k=Math.min(k,_),E=Math.max(E,_),M.textContent=_+" MB ("+k+"-"+E+")",r(A,e/n)}return t},update:function(){i=this.end()}}};t.exports=r},function(t,e,n){t.exports=n(26)},function(t,e,n){"use strict";function r(t){this.defaults=i.merge({},t),this.interceptors={request:new s,response:new s}}var o=n(27),i=n(28),a=n(29),s=n(38),l=n(39),u=n(40),c=n(41),f=n(34);r.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),t=i.merge(o,this.defaults,{method:"get"},t),t.baseURL&&!l(t.url)&&(t.url=u(t.baseURL,t.url)),t.withCredentials=t.withCredentials||this.defaults.withCredentials,t.data=f(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n};var d=new r(o),p=t.exports=c(r.prototype.request,d);p.create=function(t){return new r(t)},p.defaults=d.defaults,p.all=function(t){return Promise.all(t)},p.spread=n(42),p.interceptors=d.interceptors,i.forEach(["delete","get","head"],function(t){r.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))},p[t]=c(r.prototype[t],d)}),i.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))},p[t]=c(r.prototype[t],d)})},function(t,e,n){"use strict";var r=n(28),o=/^\)\]\}',?\n/,i={"Content-Type":"application/x-www-form-urlencoded"};t.exports={transformRequest:[function(t,e){return r.isFormData(t)?t:r.isArrayBuffer(t)?t:r.isArrayBufferView(t)?t.buffer:!r.isObject(t)||r.isFile(t)||r.isBlob(t)?t:(r.isUndefined(e)||(r.forEach(e,function(t,n){"content-type"===n.toLowerCase()&&(e["Content-Type"]=t)}),r.isUndefined(e["Content-Type"])&&(e["Content-Type"]="application/json;charset=utf-8")),JSON.stringify(t))}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(o,"");try{t=JSON.parse(t)}catch(e){}}return t}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:r.merge(i),post:r.merge(i),put:r.merge(i)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"}},function(t,e){"use strict";function n(t){return"[object Array]"===g.call(t)}function r(t){return"[object ArrayBuffer]"===g.call(t)}function o(t){return"[object FormData]"===g.call(t)}function i(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function s(t){return"number"==typeof t}function l(t){return"undefined"==typeof t}function u(t){return null!==t&&"object"==typeof t}function c(t){return"[object Date]"===g.call(t)}function f(t){return"[object File]"===g.call(t)}function d(t){return"[object Blob]"===g.call(t)}function p(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function h(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function m(t,e){if(null!==t&&"undefined"!=typeof t)if("object"==typeof t||n(t)||(t=[t]),n(t))for(var r=0,o=t.length;o>r;r++)e.call(null,t[r],r,t);else for(var i in t)t.hasOwnProperty(i)&&e.call(null,t[i],i,t)}function b(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=b(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;r>n;n++)m(arguments[n],t);return e}var g=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:r,isFormData:o,isArrayBufferView:i,isString:a,isNumber:s,isObject:u,isUndefined:l,isDate:c,isFile:f,isBlob:d,isStandardBrowserEnv:h,forEach:m,merge:b,trim:p}},function(t,e,n){(function(e){"use strict";t.exports=function(t){return new Promise(function(r,o){try{var i;"function"==typeof t.adapter?i=t.adapter:"undefined"!=typeof XMLHttpRequest?i=n(31):"undefined"!=typeof e&&(i=n(31)),"function"==typeof i&&i(r,o,t)}catch(a){o(a)}})}}).call(e,n(30))},function(t,e){function n(){u=!1,a.length?l=a.concat(l):c=-1,l.length&&r()}function r(){if(!u){var t=setTimeout(n);u=!0;for(var e=l.length;e;){for(a=l,l=[];++c<e;)a&&a[c].run();c=-1,e=l.length}a=null,u=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var a,s=t.exports={},l=[],u=!1,c=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new o(t,e)),1!==l.length||u||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(28),o=n(32),i=n(33),a=n(34),s=n(35),l="undefined"!=typeof window&&window.btoa||n(36);t.exports=function(t,e,u){var c=u.data,f=u.headers;r.isFormData(c)&&delete f["Content-Type"];var d=new XMLHttpRequest;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||s(u.url)||(d=new window.XDomainRequest),u.auth){var p=u.auth.username||"",h=u.auth.password||"";f.Authorization="Basic "+l(p+":"+h)}if(d.open(u.method.toUpperCase(),o(u.url,u.params,u.paramsSerializer),!0),d.timeout=u.timeout,d.onload=function(){if(d){var n="getAllResponseHeaders"in d?i(d.getAllResponseHeaders()):null,r=-1!==["text",""].indexOf(u.responseType||"")?d.responseText:d.response,o={data:a(r,n,u.transformResponse),status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:u};(o.status>=200&&o.status<300||!("status"in d)&&o.responseText?t:e)(o),d=null}},d.onerror=function(){e(new Error("Network Error")),d=null},r.isStandardBrowserEnv()){var m=n(37),b=u.withCredentials||s(u.url)?m.read(u.xsrfCookieName):void 0;b&&(f[u.xsrfHeaderName]=b)}if("setRequestHeader"in d&&r.forEach(f,function(t,e){"undefined"==typeof c&&"content-type"===e.toLowerCase()?delete f[e]:d.setRequestHeader(e,t)}),u.withCredentials&&(d.withCredentials=!0),u.responseType)try{d.responseType=u.responseType}catch(g){if("json"!==d.responseType)throw g}r.isArrayBuffer(c)&&(c=new DataView(c)),d.send(c)}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(28);t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else{var a=[];o.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(o.isArray(t)&&(e+="[]"),o.isArray(t)||(t=[t]),o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),i=a.join("&")}return i&&(t+=(-1===t.indexOf("?")?"?":"&")+i),t}},function(t,e,n){"use strict";var r=n(28);t.exports=function(t){var e,n,o,i={};return t?(r.forEach(t.split("\n"),function(t){o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e&&(i[e]=i[e]?i[e]+", "+n:n)}),i):i}},function(t,e,n){"use strict";var r=n(28);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";var r=n(28);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return e=t(window.location.href),function(n){var o=r.isString(n)?t(n):n;return o.protocol===e.protocol&&o.host===e.host}}():function(){return function(){return!0}}()},function(t,e){"use strict";function n(t){this.message=t}function r(t){for(var e,r,i=String(t),a="",s=0,l=o;i.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&e>>8-s%1*8)){if(r=i.charCodeAt(s+=.75),r>255)throw new n("INVALID_CHARACTER_ERR: DOM Exception 5");e=e<<8|r}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";var r=n(28);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var o=n(28);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e){"use strict";t.exports=function(t,e){return t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")}},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e){t.exports="//Taken from http://media.tojicode.com/webgl-samples/depth-texture.html\n\n#ifdef COMPILING_VS\nattribute vec2 position;\nattribute vec2 texture;\nvarying vec2 texCoord;\n\nuniform float uWidth;\nuniform float uHeight;\nuniform float uX;\nuniform float uY;\n\n\nvoid main(void) {\n    texCoord = texture;\n\n    //gl_Position = vec4(position, 0.0, 1.0);\n          gl_Position = vec4(\n                (((position.x + 1.0)/2.0) * uWidth + uX)*2.0 - 1.0,\n                (((position.y + 1.0)/2.0) * uHeight + uY)*2.0 - 1.0,\n                0.0,\n                1.0)  ;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision mediump float;\nuniform sampler2D diffuse;\nvarying vec2 texCoord;\n\nvoid main(void) {\n\n    float f = 1000.0; //far plane\n    float n = 1.0; //near plane\n    float z = (2.0 * n) / (f + n - texture2D( diffuse, texCoord ).x * (f - n));\n\n\n    //vec4 color = texture2D(diffuse, texCoord);\n    gl_FragColor = vec4(z,z,z, 255);\n}\n\n#endif //COMPILING_FS"},function(t,e){t.exports="#ifdef ENABLE_DEFERRED\n    #extension OES_texture_float_linear : enable\n#endif\n\n#ifdef COMPILING_VS\nattribute vec4 a_position;\nvarying vec2 v_texcoord;\n\nvoid main() {\n      gl_Position = a_position;\n      v_texcoord = a_position.xy * 0.5 + 0.5;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_sampler;\nuniform sampler2D u_depth;\n\nuniform float gauss_offsets[5];\nuniform float gauss_weights[5];\n\nvoid main() {\n   /*\n    vec4 fragmentColor = texture2D(u_sampler, v_texcoord);\n    float sourceDepth = texture2D(u_depth, v_texcoord).x;\n    vec4 final = (fragmentColor * gauss_weights[0]);\n    for (int i = 1; i < 5; i++) {\n\n        float sampleDepth = texture2D(u_depth, (v_texcoord + vec2(0.0, gauss_offsets[i]))).x;\n        float filterDepth = (((sourceDepth - sampleDepth) > 0.0700000003) ? 1.0 : 0.0);\n        //float filterDepth = 1.0;\n        vec4 t = vec4(filterDepth);\n        final = (final + (gauss_weights[i] * mix(texture2D(u_sampler, (v_texcoord + vec2(0.0, gauss_offsets[i]))), fragmentColor, t)));\n    }\n\n    final.a = 1.0;\n    gl_FragColor = final;   */\n\n\n    gl_FragColor = vec4(texture2D(u_sampler, v_texcoord).rgb, 0);\n}\n\n#endif //COMPILING_FS\n\n\n#ifdef deffered_light\nprecision highp float;\n\n#define DISPLAY_DEPTH 0\n#define DISPLAY_NORMAL 1\n#define DISPLAY_POSITION 2\n#define DISPLAY_COLOR 3\n#define DISPLAY_TOTAL 4\n#define DISPLAY_LIGHTS 5\n#define DISPLAY_NONTILE_LIGHTS 6\n#define DISPLAY_INK 7\n#define DISPLAY_DEBUGTILE 8\n#define MAXLIGHTNUM 1000\n\nuniform sampler2D u_Depthtex;\nuniform sampler2D u_Normaltex;\nuniform sampler2D u_Positiontex;\nuniform sampler2D u_Colortex;\n//for light\nuniform sampler2D u_LightGridtex;\nuniform sampler2D u_LightIndextex;\nuniform sampler2D u_LightPositiontex;\nuniform sampler2D u_LightColorRadiustex;\nuniform int u_LightNum;\nuniform int u_DisplayType;\n//uniform float u_Far;\n//uniform float u_Near;\n//uniform float u_Width;\n//uniform float u_Height;\nuniform int u_MaxTileLightNum;\nuniform int u_TileSize;\n//uniform Light u_Lights[LIGHTNUM];\nuniform int u_LightIndexImageSize;\nuniform float u_FloatLightIndexSize;\nuniform float u_WidthTile;\nuniform float u_HeightTile;\nvarying vec2 fs_Texcoord;\nfloat linearizeDepth(float exp_depth, float near, float far) {\n    return  (2.0 * near) / (far + near -  exp_depth * (far - near));\n}\nvoid main(void)\n{\n    vec3 normal = texture2D(u_Normaltex, fs_Texcoord).xyz;\n    vec3 position = texture2D(u_Positiontex, fs_Texcoord).xyz;\n    vec3 color = texture2D(u_Colortex, fs_Texcoord).xyz;\n    //vec3 depth = texture2D(u_Depthtex, fs_Texcoord).xyz;\n    //float exp_depth = texture2D(u_Depthtex, fs_Texcoord).r;\n    //float lin_depth = linearizeDepth(exp_depth,u_Near,u_Far);\n    //get the grid data index\n    vec2 gridIndex = vec2(((fs_Texcoord.x*u_Width) / float(u_TileSize)) / (u_WidthTile), ((fs_Texcoord.y*u_Height) / float(u_TileSize)) / (u_HeightTile));\n    //x for offset, y for count\n    vec3 gridInfo = texture2D(u_LightGridtex, gridIndex).xyz;\n    int offset = int(gridInfo.x);\n    int count = int(gridInfo.y);\n    int offset2 = int(gridInfo.z);\n    vec3 lightColor = vec3(0.0);\n    int lightCount = 0;\n    if(count > 0){\n        for(int i = 0; i < MAXLIGHTNUM; i++){\n            if(i < count){\n                int lightId;\n                //float temp = (mod(float(offset+i), u_FloatLightIndexSize));\n                float temp = float(offset + i);\n                int addNext = 0;\n\n                if(temp >= u_FloatLightIndexSize){\n                    temp -= u_FloatLightIndexSize;\n                    addNext++;\n                }\n\n                //precision problem\n                if(temp == u_FloatLightIndexSize)\n                   temp = 0.0;\n                float lightSize =  u_FloatLightIndexSize-1.0;\n                vec2 dataIndex = vec2(\n                    temp / lightSize,\n                    //floor(float((offset2+i) / (u_LightIndexImageSize))) / (lightSize)\n                    float(offset2 + addNext) / lightSize\n                    );\n\n                //vec2 dataIndex = vec2(float(offset+i) / float(u_LightIndexImageSize-1), 1.0);\n                lightId = int((texture2D(u_LightIndextex, dataIndex).x));\n                vec3 lightPos = texture2D(u_LightPositiontex, vec2(float(lightId)/float(u_LightNum-1))).xyz;\n                vec4 lightColorRadius = texture2D(u_LightColorRadiustex, vec2(float(lightId)/float(u_LightNum-1))).xyzw;\n                if(distance(lightPos, position) < lightColorRadius.w){\n                    //float distoL = distance(lightPos, position);\n                    //distoL = max(lightColorRadius.w - distoL, 0.0);\n                    float diffuse = abs(dot(normal, normalize(lightPos - position)));\n                    //max(dot(normal, normalize(lightPos - position)),0.0);\n                    // if(diffuse == 0.0)\n                    //     diffuse = dot(-normal, normalize(lightPos - position));\n                    float dist = distance(lightPos, position);\n                    float lightR = lightColorRadius.w;\n                    float attenuation = dist/(1.0 - (dist/lightR) * (dist/lightR));\n                    attenuation = attenuation / lightR + 1.0;\n                    attenuation = 1.0 / (attenuation * attenuation);\n\n                    lightColor += diffuse * lightColorRadius.xyz * attenuation* color;// * ((lightColorRadius.w - distance(lightPos, position)) /     lightColorRadius.w);\n\n                    //lightColor += lightColorRadius.xyz;\n                    //if(distoL > 0.0)\n                    lightCount ++;\n                }\n            }\n            else\n                break;\n        }\n        lightColor = mix(vec3(0.0), vec3(1.0), lightColor);\n        lightColor = clamp(lightColor, vec3(0.0), vec3(1.0));\n    }\n    //gl_FragData[0] = vec4(vec3(float(count) / float(LIGHTNUM)),1.0);\n    gl_FragColor = vec4(lightColor * 0.7, 1.0) + vec4(color * 0.3,1.0);\n}\n#endif"},function(t,e){t.exports="#ifdef COMPILING_VS\nattribute vec2 position;\nattribute vec2 texture;\nvarying vec2 v_texcoord;\n\nvoid main() {\n    v_texcoord = texture;\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_sampler;\n\nvoid main() {\n    float depth = texture2D(u_sampler, v_texcoord).x;\n    float depth65535 = depth * 65535.0;\n    float depth_high = floor(depth65535/256.0) / 255.0;\n    float depth_low = mod(depth65535, 256.0) / 255.0;\n\n    vec4 color = vec4(depth_high, depth_low, 0 ,0);\n\n    gl_FragColor = color;\n}\n\n#endif //COMPILING_FS"},function(t,e){t.exports="//https://www.khronos.org/registry/webgl/extensions/WEBGL_draw_buffers/\n//For drawbuffers in glsl of webgl you need to use GL_EXT_draw_buffers instead of WEBGL_draw_buffers\n\n#ifdef ENABLE_DEFERRED\n#ifdef GL_EXT_draw_buffers\n    #extension GL_EXT_draw_buffers: require\n    #extension OES_texture_float_linear : enable\n    #define drawBuffersIsSupported 1\n#endif\n#endif\n\n#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec2 aTexCoord2;\nattribute vec4 aColor;\nattribute vec4 aColor2;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\n\n#ifdef INSTANCED\nattribute mat4 uPlacementMat;\n#else\nuniform mat4 uPlacementMat;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec4 vColor;\nvarying vec4 vColor2;\n\n#ifdef drawBuffersIsSupported\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying float fs_Depth;\n#endif\n\nvoid main() {\n    vec4 worldPoint = uPlacementMat * vec4(aPosition, 1);\n\n    vec4 cameraPoint = uLookAtMat * worldPoint;\n\n    vTexCoord = aTexCoord;\n    vTexCoord2 = aTexCoord2;\n    vColor = aColor;\n    vColor2 = aColor2;\n\n#ifndef drawBuffersIsSupported\n    gl_Position = uPMatrix * cameraPoint;\n#else\n    gl_Position = uPMatrix * cameraPoint;\n    fs_Depth = gl_Position.z / gl_Position.w;\n\n    vNormal = normalize((uPlacementMat * vec4(aNormal, 0)).xyz);\n    vPosition = cameraPoint.xyz;\n#endif //drawBuffersIsSupported\n\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision lowp float;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec4 vColor;\nvarying vec4 vColor2;\nvarying vec3 vPosition;\n\n//uniform vec4  uGlobalLighting;\nuniform float uAlphaTest;\nuniform vec4 uMeshColor1;\nuniform vec4 uMeshColor2;\nuniform sampler2D uTexture;\nuniform sampler2D uTexture2;\n\n#ifdef drawBuffersIsSupported\nvarying float fs_Depth;\n#endif\n\nvoid main() {\n    vec4 tex = texture2D(uTexture, vTexCoord).rgba * uMeshColor1;\n    vec4 tex2 = texture2D(uTexture2, vTexCoord2).rgba;\n\n    vec4 finalColor = vec4(\n        (tex.r * vColor.b) ,\n        (tex.g * vColor.g),\n        (tex.b * vColor.r),\n        tex.a );\n\n    if(finalColor.a < uAlphaTest)\n        discard;\n\n    //Apply global lighting\n/*\n    finalColor = vec4(\n        (finalColor.r + uGlobalLighting.r) ,\n        (finalColor.g + uGlobalLighting.g) ,\n        (finalColor.b + uGlobalLighting.b) ,\n        finalColor.a);\n  */\n    finalColor.a = 1.0; //do I really need it now?\n\n#ifndef drawBuffersIsSupported\n    //Forward rendering without lights\n    gl_FragColor = finalColor;\n#else\n    //Deferred rendering\n    //gl_FragColor = finalColor;\n    gl_FragData[0] = vec4(vec3(fs_Depth), 1.0);\n    gl_FragData[1] = vec4(vPosition.xyz,0);\n    gl_FragData[2] = vec4(vNormal.xyz,0);\n    gl_FragData[3] = finalColor;\n#endif //drawBuffersIsSupported\n}\n\n#endif //COMPILING_FS\n";
},function(t,e){t.exports="//https://www.khronos.org/registry/webgl/extensions/WEBGL_draw_buffers/\n//For drawbuffers in glsl of webgl you need to use GL_EXT_draw_buffers instead of WEBGL_draw_buffers\n\n#ifdef ENABLE_DEFERRED\n#ifdef GL_EXT_draw_buffers\n    #extension GL_EXT_draw_buffers: require\n    #extension OES_texture_float_linear : enable\n    #define drawBuffersIsSupported 1\n#endif\n#endif\n\n#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec4 bones;\nattribute vec4 boneWeights;\nattribute vec2 aTexCoord;\nattribute vec2 aTexCoord2;\n\nattribute vec4 aColor;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\nuniform int isBillboard;\nuniform mat4 uBoneMatrixes[59]; //Max 59 for ANGLE implementation and max 120? bones in Wotlk client\n\nuniform int isEnviroment;\n#ifdef INSTANCED\nattribute mat4 uPlacementMat;\n#else\nuniform mat4 uPlacementMat;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec4 vColor;\nvarying vec3 vNormal;\n\n#ifdef drawBuffersIsSupported\nvarying vec3 vPosition;\nvarying float fs_Depth;\n#endif\n\n\n// constructors are column major\nmat2 transpose(mat2 m) {\n  return mat2(  m[0][0], m[1][0],   // new col 0\n                m[0][1], m[1][1]    // new col 1\n             );\n  }\n\nmat3 transpose(mat3 m) {\n  return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\n                m[0][1], m[1][1], m[2][1],  // new col 1\n                m[0][2], m[1][2], m[2][2]   // new col 1\n             );\n  }\n\nmat4 transpose(mat4 m) {\n  return mat4(  m[0][0], m[1][0], m[2][0], m[3][0],   // new col 0\n                m[0][1], m[1][1], m[2][1], m[3][1],    // new col 1\n                m[0][2], m[1][2], m[2][2], m[3][2],    // new col 1\n                m[0][3], m[1][3], m[2][3], m[3][3]\n             );\n  }\n\nfloat determinant(mat2 m) {\n  return m[0][0]*m[1][1] - m[1][0]*m[0][1] ;\n  }\n\nfloat determinant(mat3 m) {\n  return   m[0][0]*( m[1][1]*m[2][2] - m[2][1]*m[1][2])\n         - m[1][0]*( m[0][1]*m[2][2] - m[2][1]*m[0][2])\n         + m[2][0]*( m[0][1]*m[1][2] - m[1][1]*m[0][2]) ;\n  }\n\n// 4x4 determinate inplemented by blocks ..\n//     | A B |\n// det | C D | = det (A) * det(D - CA'B)\n//\n\nfloat determinant(mat4 m) {\n  mat2 a = mat2(m);\n  mat2 b = mat2(m[2].xy,m[3].xy);\n  mat2 c = mat2(m[0].zw,m[1].zw);\n  mat2 d = mat2(m[2].zw,m[3].zw);\n  float s = determinant(a);\n  return s*determinant(d-(1.0/s)*c*mat2(a[1][1],-a[0][1],-a[1][0],a[0][0])*b);\n  }\n\nmat2 inverse(mat2 m) {\n  float d = 1.0 / determinant(m) ;\n  return d * mat2( m[1][1], -m[0][1], -m[1][0], m[0][0]) ;\n  }\n\nmat3 inverse(mat3 m) {\n  float d = 1.0 / determinant(m) ;\n  return d * mat3( m[2][2]*m[1][1] - m[1][2]*m[2][1],\n                    m[1][2]*m[2][0] - m[2][2]*m[1][0],\n                     m[2][1]*m[1][0] - m[1][1]*m[2][0] ,\n\n                   m[0][2]*m[2][1] - m[2][2]*m[0][1],\n                    m[2][2]*m[0][0] - m[0][2]*m[2][0],\n                     m[0][1]*m[2][0] - m[2][1]*m[0][0],\n\n                   m[1][2]*m[0][1] - m[0][2]*m[1][1],\n                    m[0][2]*m[1][0] - m[1][2]*m[0][0],\n                     m[1][1]*m[0][0] - m[0][1]*m[1][0]\n                 );\n  }\n\n// This implements block wise inverse\n// | e f |   | A B |'    | A'+A'B(D-CA'B)'CA'    -A'B(D-CA'B)'  |\n// | g h | = | C D |   = |  -(D-CA'B)'CA'         (D-CA'B)'     |\n//\n// with\n// a inverted immediately\n// and sub expressions t = CA'\n// noting that h and f are subexpression also\n//\nmat4 inverse(mat4 m) {\n  mat2 a = inverse(mat2(m));\n  mat2 b = mat2(m[2].xy,m[3].xy);\n  mat2 c = mat2(m[0].zw,m[1].zw);\n  mat2 d = mat2(m[2].zw,m[3].zw);\n\n  mat2 t = c*a;\n  mat2 h = inverse(d - t*b);\n  mat2 g = - h*t;\n  mat2 f = - a*b*h;\n  mat2 e = a - f*t;\n\n  return mat4( vec4(e[0],g[0]), vec4(e[1],g[1]),\n                  vec4(f[0],h[0]), vec4(f[1],f[1]) );\n  }\n\nvoid main() {\n    vec4 modelPoint = vec4(0,0,0,0);\n\n    vec4 aPositionVec4 = vec4(aPosition, 1);\n    mat4 boneTransformMat = mat4(0.0);\n\n    boneTransformMat += (boneWeights.x ) * uBoneMatrixes[int(bones.x)];\n    boneTransformMat += (boneWeights.y ) * uBoneMatrixes[int(bones.y)];\n    boneTransformMat += (boneWeights.z ) * uBoneMatrixes[int(bones.z)];\n    boneTransformMat += (boneWeights.w ) * uBoneMatrixes[int(bones.w)];\n\n    mat4 cameraMatrix = uLookAtMat * uPlacementMat * boneTransformMat;\n    vec4 cameraPoint = cameraMatrix * aPositionVec4;\n\n    mat3 invWorldMat = mat3(\n        uPlacementMat[0].xyz,\n        uPlacementMat[1].xyz,\n        uPlacementMat[2].xyz);\n    vec3 worldNormal = normalize((aNormal * invWorldMat));\n\n    mat3 invCameraMat = mat3(\n      uLookAtMat[0].xyz,\n      uLookAtMat[1].xyz,\n      uLookAtMat[2].xyz);\n\n    vec3 normal = normalize((worldNormal * invCameraMat));\n\n    if (isEnviroment == 1) {\n        vec3 normPos = -(normalize(cameraPoint.xyz));\n        vec3 temp = (normPos - (normal * (2.0 * dot(normPos, normal))));\n        temp.z = (temp.z + 1.0);\n\n        vTexCoord = ((normalize(temp).xy * 0.5) + vec2(0.5));\n    }else {\n        vTexCoord = aTexCoord;\n    }\n    vTexCoord2 = aTexCoord2;\n    vColor = aColor;\n\n#ifndef drawBuffersIsSupported\n    gl_Position = uPMatrix * cameraPoint;\n    vNormal = normal;\n#else\n    gl_Position = uPMatrix * cameraPoint;\n    fs_Depth = gl_Position.z / gl_Position.w;\n\n    vNormal = normalize((uPlacementMat * vec4(aNormal, 0)).xyz);\n    vPosition = cameraPoint.xyz;\n#endif //drawBuffersIsSupported\n\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision lowp float;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec4 vColor;\nvarying vec3 vPosition;\n\n//uniform vec4  uGlobalLighting;\nuniform float uAlphaTest;\nuniform sampler2D uTexture;\nuniform sampler2D uTexture2;\n\nuniform mat4 uTextMat1;\nuniform mat4 uTextMat2;\n\n#ifdef drawBuffersIsSupported\nvarying float fs_Depth;\n#endif\n\nvoid main() {\n    /* Animation support */\n    vec2 texCoord =  (uTextMat1 * vec4(vTexCoord, 0, 1)).xy;\n    vec2 texCoord2 = (uTextMat2 * vec4(vTexCoord2, 0, 1)).xy;\n\n    /* Get color from texture */\n    vec4 tex = texture2D(uTexture, texCoord).rgba;\n    vec4 tex2 = texture2D(uTexture2, texCoord2).rgba;\n\n    vec4 finalColor = vec4(\n        (tex.r * vColor.b) ,\n        (tex.g * vColor.g) ,\n        (tex.b * vColor.r) ,\n        tex.a * vColor.a);\n\n    finalColor = finalColor * tex2;\n\n    if(finalColor.a < uAlphaTest)\n        discard;\n\n    //Apply global lighting\n/*\n    finalColor = vec4(\n        (finalColor.r + uGlobalLighting.r) ,\n        (finalColor.g + uGlobalLighting.g) ,\n        (finalColor.b + uGlobalLighting.b) ,\n        finalColor.a);\n  */\n    //finalColor.a = 1.0; //do I really need it now?\n\n#ifndef drawBuffersIsSupported\n    //Forward rendering without lights\n    gl_FragColor = finalColor;\n#else\n    //Deferred rendering\n    //gl_FragColor = finalColor;\n    gl_FragData[0] = vec4(vec3(fs_Depth), 1.0);\n    gl_FragData[1] = vec4(vPosition.xyz,0);\n    gl_FragData[2] = vec4(vNormal.xyz,0);\n    gl_FragData[3] = finalColor;\n#endif //drawBuffersIsSupported\n}\n\n#endif //COMPILING_FS\n\n"},function(t,e){t.exports="#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\n\nuniform vec3 uBBScale;\nuniform vec3 uBBCenter;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\nuniform mat4 uPlacementMat;\n\nvoid main() {\n    vec4 worldPoint = vec4(\n        aPosition.x*uBBScale.x + uBBCenter.x,\n        aPosition.y*uBBScale.y + uBBCenter.y,\n        aPosition.z*uBBScale.z + uBBCenter.z,\n    1);\n\n    gl_Position = uPMatrix * uLookAtMat * uPlacementMat * worldPoint;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision lowp float;\n\nuniform vec3 uColor;\n\nvoid main() {\n    vec4 finalColor = vec4(uColor, 1.0);\n\n    finalColor.a = 1.0; //do I really need it now?\n    gl_FragColor = finalColor;\n}\n\n#endif //COMPILING_FS\n"},function(t,e){t.exports='#ifdef COMPILING_VS\n/* vertex shader code */\nattribute float aHeight;\nattribute float aNormal;\nattribute float aIndex;\n\nuniform vec3 uPos;\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\n\nvarying vec2 vChunkCoords;\n\nconst float UNITSIZE =  533.3433333 / 16.0 / 8.0;\n\nvoid main() {\n\n/*\n     Y\n  X  0    1    2    3    4    5    6    7    8\n        9   10   11   12   13   14   15   16\n*/\n    float iX = mod(aIndex, 17.0);\n    float iY = floor(aIndex/17.0);\n\n    vec4 worldPoint = vec4(\n        uPos.x - iY * UNITSIZE,\n        uPos.y - iX * UNITSIZE,\n        uPos.z + aHeight,\n        1);\n\n    vChunkCoords = vec2(iX, iY);\n\n    //On Intel Graphics ">" is equal to ">="\n    if (iX > 8.1) {\n        worldPoint.x = uPos.x - (iX - 8.5) * UNITSIZE;\n        worldPoint.y = uPos.x - (iY + 0.5) * UNITSIZE;\n        vChunkCoords.x = (iY-8.5);\n    }\n\n    gl_Position = uPMatrix * uLookAtMat * worldPoint;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision lowp float;\n\nvarying vec2 vChunkCoords;\n\nuniform int uNewFormula;\n\nuniform sampler2D uLayer0;\nuniform sampler2D uLayer1;\nuniform sampler2D uLayer2;\nuniform sampler2D uLayer3;\nuniform sampler2D uAlphaTexture;\n\n/* Bicubic interpolation implementation */\n/* Taken from http://www.codeproject.com/Articles/236394/Bi-Cubic-and-Bi-Linear-Interpolation-with-GLSL#Triangular */\n\nfloat Triangular( float f )\n{\n	f = f / 2.0;\n	if( f < 0.0 )\n	{\n		return ( f + 1.0 );\n	}\n	else\n	{\n		return ( 1.0 - f );\n	}\n	return 0.0;\n}\n\nfloat CatMullRom( float x )\n{\n    const float B = 0.0;\n    const float C = 0.5;\n    float f = x;\n    if( f < 0.0 )\n    {\n        f = -f;\n    }\n    if( f < 1.0 )\n    {\n        return ( ( 12.0 - 9.0 * B - 6.0 * C ) * ( f * f * f ) +\n            ( -18.0 + 12.0 * B + 6.0 * C ) * ( f * f ) +\n            ( 6.0 - 2.0 * B ) ) / 6.0;\n    }\n    else if( f >= 1.0 && f < 2.0 )\n    {\n        return ( ( -B - 6.0 * C ) * ( f * f * f )\n            + ( 6.0 * B + 30.0 * C ) * ( f *f ) +\n            ( - ( 12.0 * B ) - 48.0 * C  ) * f +\n            8.0 * B + 24.0 * C)/ 6.0;\n    }\n    else\n    {\n        return 0.0;\n    }\n}\nvec4 BiCubic( sampler2D textureSampler, vec2 TexCoord, float widthMinClamp, float widthMaxClamp)\n{\n    float fWidth = 256.0;\n    float fHeight = 64.0;\n\n    float texelSizeX = 1.0 / fWidth; //size of one texel\n    float texelSizeY = 1.0 / fHeight; //size of one texel\n    vec4 nSum = vec4( 0.0, 0.0, 0.0, 0.0 );\n    vec4 nDenom = vec4( 0.0, 0.0, 0.0, 0.0 );\n    float a = fract( TexCoord.x * fWidth ); // get the decimal part\n    float b = fract( TexCoord.y * fHeight ); // get the decimal part\n    for( int m = -1; m <=2; m++ )\n    {\n        for( int n =-1; n<= 2; n++)\n        {\n            vec2 coords = TexCoord + vec2( texelSizeX * float( m ), texelSizeY * float( n ));\n\n            float xCoord = coords.x;\n            xCoord = max(widthMinClamp, xCoord);\n            xCoord = min(widthMaxClamp, xCoord);\n            coords.x = xCoord;\n\n            vec4 vecData = texture2D( textureSampler, coords);\n            float f  = Triangular( float( m ) - a );\n            vec4 vecCooef1 = vec4( f,f,f,f );\n            float f1 = Triangular ( -( float( n ) - b ) );\n            vec4 vecCoeef2 = vec4( f1, f1, f1, f1 );\n            nSum = nSum + ( vecData * vecCoeef2 * vecCooef1  );\n            nDenom = nDenom + (( vecCoeef2 * vecCooef1 ));\n        }\n    }\n    return nSum / nDenom;\n}\n/********************************/\n\nfloat filterFunc(float x) {\n  //x = ceil(x * 16.0)/16.0;\n\n  /*const float multiplier = 1.0;\n  const float additive =  0.0;\n  const float maxThreshold = 0.0;\n  const float minThreshold = 1.0;\n\n\n  x = x * multiplier + additive;\n  x = max(x, maxThreshold);\n  x = min(x, minThreshold);\n  return x;*/\n    return x;\n}\n\nvec3 mixTextures(vec3 tex0, vec3 tex1, float alpha) {\n    return  (alpha*(tex1.rgb-tex0.rgb)+tex0.rgb);\n}\n\nvoid main() {\n    vec2 vTexCoord = vChunkCoords;\n    const float threshold = 1.5;\n\n    vec2 a4Coords = vec2(3.0/4.0+ ((vChunkCoords.x/8.0) ) /4.0, vChunkCoords.y/8.0 );\n    vec2 a3Coords = vec2(2.0/4.0+ ((vChunkCoords.x/8.0) ) /4.0, vChunkCoords.y/8.0 );\n    vec2 a2Coords = vec2(1.0/4.0+ ((vChunkCoords.x/8.0) ) /4.0, vChunkCoords.y/8.0 );\n\n    vec3 tex4 = texture2D(uLayer3, vTexCoord).rgb;\n    float a4 = BiCubic(uAlphaTexture, a4Coords, 3.0/4.0, 3.999/4.0).a;\n    a4 = filterFunc(a4);\n\n    vec3 tex3 = texture2D(uLayer2, vTexCoord).rgb;\n    float a3 = BiCubic(uAlphaTexture, a3Coords, 2.0/4.0, 2.999/4.0).a;\n    a3 = filterFunc(a3);\n\n    vec3 tex2 = texture2D(uLayer1, vTexCoord).rgb;\n    float a2 = BiCubic(uAlphaTexture, a2Coords, 1.0/4.0, 1.999/4.0).a;\n    a2 = filterFunc(a2);\n\n    vec3 tex1 = texture2D(uLayer0, vTexCoord).rgb;\n    //vec4 a1 = texture2D(uTexture, vTexCoord).rgba;\n\n    //Mix formula for 4 texture mixing\n    vec4 finalColor;\n    if (uNewFormula >= 1) {\n        finalColor = vec4(tex1 * (1.0 - (a2 + a3 + a4)) + tex2 * a2 + tex3 * a3 + tex4* a4, 1);\n    } else {\n        finalColor = vec4(mixTextures(mixTextures(mixTextures(tex1,tex2,a2),tex3, a3), tex4, a4), 1);\n        //finalColor = vec4(a4 * tex4 - (a4  - 1.0) * ( (a3 - 1.0)*( tex1 * (a2 - 1.0) - a2*tex2) + a3*tex3), 1);\n    }\n\n    finalColor.a = 1.0;\n    gl_FragColor = finalColor;\n}\n\n#endif //COMPILING_FS'},function(t,e){t.exports="#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\nuniform mat4 uPlacementMat;\n\nvoid main() {\n    vec4 worldPoint = vec4(aPosition.xyz, 1);\n\n    gl_Position = uPMatrix * uLookAtMat * uPlacementMat * worldPoint;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision lowp float;\n\nuniform vec4 uColor;\n\nvoid main() {\n    vec4 finalColor = uColor ;\n\n    gl_FragColor = finalColor;\n}\n\n#endif //COMPILING_FS\n"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(52),s=r(a),l=n(53),u=r(l),c=n(68),f=r(c),d=n(69),p=r(d),h=n(57),m=r(h),b=n(21),g=r(b),v=n(58),y=function(){function t(e){o(this,t),this.sceneApi=e,this.mdxObjectList=[],this.sceneObjNumMap={},this.lastUpdatedNumber=0}return i(t,[{key:"addMDXObject",value:function(t){this.sceneObjNumMap[t.sceneNumber]||(this.sceneObjNumMap[t.sceneNumber]=t,this.mdxObjectList.push(t))}},{key:"updatePlacementVBO",value:function(){var t=this.sceneApi.getGlContext(),e=this.permanentBuffer;e&&e.length==16*this.mdxObjectList.length||(e=new Float32Array(16*this.mdxObjectList.length),this.permanentBuffer=e);var n=this.placementVBO;n||(n=t.createBuffer());for(var r=0;r<this.mdxObjectList.length;r++){var o=this.mdxObjectList[r],i=o.placementMatrix;e.set(i,16*r)}t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),this.placementVBO=n,this.lastUpdatedNumber=this.mdxObjectList.length}},{key:"drawInstancedNonTransparentMeshes",value:function(){this.mdxObjectList[0]&&this.mdxObjectList[0].drawInstancedNonTransparentMeshes(this.lastUpdatedNumber,this.placementVBO,this.dinamycParams)}},{key:"drawInstancedTransparentMeshes",value:function(){this.mdxObjectList[0]&&this.mdxObjectList[0].drawInstancedTransparentMeshes(this.lastUpdatedNumber,this.placementVBO,this.dinamycParams)}}]),t}(),x=function(){function t(e){o(this,t),this.sceneApi=e,this.m2Objects=[],this.instanceList={},this.wmoObjects=[],this.adtObjects=[],this.skyDom=null,this.currentTime=0,this.lastTimeSort=0,this.globalM2Counter=0}return i(t,[{key:"addAdtM2Object",value:function(t){var e=new u["default"](this.sceneApi);return e.load(t,!1),e.sceneNumber=this.globalM2Counter++,this.m2Objects.push(e),e}},{key:"addWmoM2Object",value:function(t,e,n){var r=new f["default"](this.sceneApi),o=r.load(t,e,n);return r.sceneNumber=this.globalM2Counter++,this.m2Objects.push(r),o.then(function(){return r},function(){})}},{key:"addWmoObject",value:function(t){var e=new p["default"](this.sceneApi);return e.load(t),this.wmoObjects.push(e),e}},{key:"addADTObject",value:function(t){var e=new s["default"](this.sceneApi);e.load(t),this.adtObjects.push(e)}},{key:"addM2ObjectToInstanceManager",value:function(t,e){var n=t.getFileNameIdent(),r=this.instanceList[n];r||(r=new y(this.sceneApi),this.instanceList[n]=r),r.addMDXObject(t,e),t.instanceManager=r}},{key:"setCameraPos",value:function(t){this.position=t}},{key:"setLookAtMat",value:function(t){this.lookAtMat=t}},{key:"collectMeshes",value:function(){for(var t=[],e=0;e<this.m2Objects.length;e++){var n=this.m2Objects[e].getMeshesToRender();t=t.concat(n)}var r=t.filter(function(t){return t&&!t.isTransparent}),o=t.filter(function(t){return t&&t.isTransparent});r.sort(function(t,e){return t.m2Object==e.m2Object?0:1}),r.sort(function(t,e){return t.m2Object==e.m2Object&&t.skin==e.skin?0:1}),r.sort(function(t,e){return t.m2Object==e.m2Object&&t.skin==e.skin&&t.meshIndex==e.meshIndex?0:e.meshIndex-t.meshIndex}),o.sort(function(t,e){}),this.nonTransparentM=r,this.transparentM=o}},{key:"checkCulling",value:function(t,e){for(var n=0;n<this.m2Objects.length;n++)this.m2Objects[n].setIsRendered(!0);if(this.currentInteriorGroup>=0&&g["default"].getUsePortalCulling()){for(var n=0;n<this.m2Objects.length;n++)this.m2Objects[n].setIsRendered(!0);for(var r=0;r<this.wmoObjects.length;r++)this.wmoObjects[r].resetDrawnForAllGroups(!0);this.checkNormalFrustumCulling(t,e);var o=v.mat4.create();v.mat4.multiply(o,t,e);var i=m["default"].getFrustumClipsFromMatrix(o);this.currentWMO.transverseInteriorWMO(this.currentInteriorGroup,this.position,t,e,i),this.currentWMO.transverseExteriorWMO(t,e)}else this.checkNormalFrustumCulling(t,e)}},{key:"checkNormalFrustumCulling",value:function(t,e){var n=v.mat4.create();v.mat4.multiply(n,t,e);for(var r=m["default"].getFrustumClipsFromMatrix(n),o=0;o<this.wmoObjects.length;o++)this.wmoObjects[o].resetDrawnForAllGroups(!0),this.wmoObjects[o].checkFrustumCulling(this.position,t,e,r),this.wmoObjects[o].setIsRenderedForDoodads();for(var i=0;i<this.m2Objects.length;i++)this.m2Objects[i].getIsRendered()&&this.m2Objects[i].checkFrustumCullingAndSet(this.position,r);for(var i=0;i<this.m2Objects.length;i++){var a=this.m2Objects[i];a.getIsRendered()&&a.setIsRendered(100*a.getDiameter()>a.getCurrentDistance())}}},{key:"checkAgainstDepthBuffer",value:function(t,e,n,r,o){function i(t,e){var o=e*r+t,i=1-n[o];return i}function a(t,e){var n=t*l+e,r=c[n];return r}function s(t,e,n,r,o){if(0>o)return!1;t=(t+1)/2,e=(e+1)/2,n=(n+1)/2,r=(r+1)/2,t=Math.floor(t*l),e=Math.floor(e*l),n=Math.floor(n*u),r=Math.floor(r*u);for(var i=!1,s=t;e>=s;s++)for(var c=n;r>=c;c++)if(a(s,c)<o)return i=!0,!0;return!1}for(var l=Math.floor(r/8),u=Math.floor(o/8),c=new Float32Array(l*u),f=0;l>f;f++)for(var d=8*f,p=Math.min(8*(f+1),r),h=0;u>h;h++){for(var m=1,b=8*h,g=Math.min(8*(h+1),o),v=d;p>v;v++)for(var y=b;g>y;y++)m=Math.min(i(v,y),m);c[f*l+h]=m}for(var x=0;x<this.m2Objects.length;x++)this.m2Objects[x].getIsRendered()&&this.m2Objects[x].checkAgainstDepthBuffer(t,e,s)}},{key:"update",value:function(t){var e;if(g["default"].getRenderM2())for(e=0;e<this.m2Objects.length;e++)this.m2Objects[e].update(t,this.position);for(e=0;e<this.wmoObjects.length;e++)this.wmoObjects[e].update(t);if(this.currentTime+t-this.lastTimeSort>500){for(var n=this,r=0;r<this.m2Objects.length;r++)this.m2Objects[r].calcDistance(n.position);this.m2Objects.sort(function(t,e){return e.getCurrentDistance()-t.getCurrentDistance()>0?1:-1})}if(this.currentTime+t-this.lastTimeSort>1e3)for(var o in this.instanceList){var i=this.instanceList[o];i.updatePlacementVBO()}this.currentInteriorGroup=-1,this.currentWMO=null;for(var a=-1,s=-1,e=0;e<this.wmoObjects.length;e++){var l=this.wmoObjects[e].isInsideInterior(this.position);if(s=l.groupId,s>=0){this.currentWMO=this.wmoObjects[e],this.currentInteriorGroup=s,a=l.nodeId;break}}return this.currentTime=this.currentTime+t,{interiorGroupNum:s,nodeId:a}}},{key:"draw",value:function(){this.sceneApi.shaders.activateAdtShader();for(var t=0;t<this.adtObjects.length;t++)this.adtObjects[t].draw();if(g["default"].getRenderBSP()){this.sceneApi.shaders.activateDrawPortalShader();for(var t=0;t<this.wmoObjects.length;t++)this.wmoObjects[t].drawBspVerticles()}this.sceneApi.shaders.activateWMOShader();for(var t=0;t<this.wmoObjects.length;t++)this.wmoObjects[t].draw();if(this.sceneApi.shaders.deactivateWMOShader(),this.skyDom&&this.skyDom.draw(),g["default"].getRenderM2()){this.sceneApi.shaders.activateM2Shader();for(var t=0;t<this.m2Objects.length;t++)this.m2Objects[t].instanceManager||this.m2Objects[t].getIsRendered()&&this.m2Objects[t].aabb&&this.m2Objects[t].drawNonTransparentMeshes();this.sceneApi.shaders.deactivateM2Shader()}if(g["default"].getRenderPortals()){this.sceneApi.shaders.activateDrawPortalShader();for(var t=0;t<this.wmoObjects.length;t++)this.wmoObjects[t].drawPortals()}if(g["default"].getRenderM2()){this.sceneApi.shaders.activateM2Shader();for(var t=0;t<this.m2Objects.length;t++)this.m2Objects[t].instanceManager||this.m2Objects[t].getIsRendered()&&this.m2Objects[t].aabb&&this.m2Objects[t].drawTransparentMeshes();this.sceneApi.shaders.deactivateM2Shader()}if(this.sceneApi.shaders.activateBoundingBoxShader(),g["default"].getDrawM2BB())for(var t=0;t<this.m2Objects.length;t++)this.m2Objects[t].getIsRendered()&&this.m2Objects[t].drawBB();if(g["default"].getDrawWmoBB())for(var t=0;t<this.wmoObjects.length;t++)this.wmoObjects[t].drawBB()}}]),t}();e["default"]=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(53),s=r(a),l=function(){function t(e,n){o(this,t),this.sceneApi=e,this.m2Array=[]}return i(t,[{key:"loadM2s",value:function(){var t=this.adtGeom.adtFile.mddf;if(t){this.m2Array=[];for(var e=0;e<t.length;e++){var n=t[e];this.sceneApi.objects.loadAdtM2Obj(n)}}}},{key:"loadM2",value:function(t,e){var n=this;n.m2Array[t]=new s["default"](n.sceneApi),n.m2Array[t].load(e,!1)}},{key:"loadWmos",value:function(){var t=this,e=this.adtGeom.adtFile.wmoObjs;e&&(this.wmoArray=[],e.forEach(function(e){t.sceneApi.objects.loadAdtWmo(e)}))}},{key:"load",value:function(t){var e=this,n=this.sceneApi.resources.loadAdtGeom(t);n.then(function(t){e.adtGeom=t,e.loadM2s(),e.loadWmos()})}},{key:"draw",value:function(t){this.adtGeom&&this.adtGeom.draw()}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function m(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:m(o,e,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(54),c=r(u),f=n(57),d=r(f),p=n(58),h=function(t){function e(t){o(this,e);var n=i(this,Object.getPrototypeOf(e).call(this,t)),r=n;return r.sceneApi=t,r.currentDistance=0,r.isRendered=!0,n}return a(e,t),s(e,[{key:"getFileNameIdent",value:function(){return l(Object.getPrototypeOf(e.prototype),"fileIdent",this)}},{key:"getMeshesToRender",value:function(){return l(Object.getPrototypeOf(e.prototype),"getMeshesToRender",this).call(this)}},{key:"drawBB",value:function(){var t=this.sceneApi.getGlContext(),n=this.sceneApi.shaders.getShaderUniforms(),r=l(Object.getPrototypeOf(e.prototype),"getBoundingBox",this).call(this);if(r){var o=r.ab,i=r.cd,a=[(o.x+i.x)/2,(o.y+i.y)/2,(o.z+i.z)/2],s=[i.x-a[0],i.y-a[1],i.z-a[2]];t.uniform3fv(n.uBBScale,new Float32Array(s)),t.uniform3fv(n.uBBCenter,new Float32Array(a)),t.uniform3fv(n.uColor,new Float32Array([.819607843,.058,.058])),t.uniformMatrix4fv(n.uPlacementMat,!1,this.placementMatrix),t.drawElements(t.LINES,48,t.UNSIGNED_SHORT,0)}}},{key:"drawTransparentMeshes",value:function(){l(Object.getPrototypeOf(e.prototype),"drawTransparentMeshes",this).call(this,this.placementMatrix,4294967295)}},{key:"drawNonTransparentMeshes",value:function(){l(Object.getPrototypeOf(e.prototype),"drawNonTransparentMeshes",this).call(this,this.placementMatrix,4294967295)}},{key:"draw",value:function(){l(Object.getPrototypeOf(e.prototype),"draw",this).call(this,this.placementMatrix,4294967295)}},{key:"drawInstancedNonTransparentMeshes",value:function(t,n){l(Object.getPrototypeOf(e.prototype),"drawInstancedNonTransparentMeshes",this).call(this,t,n,4294967295)}},{key:"drawInstancedTransparentMeshes",value:function(t,n){l(Object.getPrototypeOf(e.prototype),"drawInstancedTransparentMeshes",this).call(this,t,n,4294967295)}},{key:"checkFrustumCullingAndSet",value:function(t,e){var n=this.checkFrustumCulling(t,e);this.setIsRendered(this.getIsRendered()&&n)}},{key:"checkFrustumCulling",value:function(t,n){var r=this.aabb&&l(Object.getPrototypeOf(e.prototype),"checkFrustumCulling",this).call(this,t,n,this.aabb);return r}},{key:"checkAgainstDepthBuffer",value:function(t,n,r){this.setIsRendered(this.getIsRendered()&&l(Object.getPrototypeOf(e.prototype),"checkAgainstDepthBuffer",this).call(this,t,n,this.placementMatrix,r))}},{key:"update",value:function(t,n){if(!this.aabb){var r=l(Object.getPrototypeOf(e.prototype),"getBoundingBox",this).call(this);if(r){var o=p.vec4.fromValues(r.ab.x,r.ab.y,r.ab.z,1),i=p.vec4.fromValues(r.cd.x,r.cd.y,r.cd.z,1),a=d["default"].transformAABBWithMat4(this.placementMatrix,[o,i]);this.diameter=p.vec3.distance(a[0],a[1]),this.aabb=a}}this.getIsRendered()&&l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t,n,this.placementInvertMatrix)}},{key:"createPlacementMatrix",value:function(t){var e=533.333333333,n=32*e-t.pos.x,r=t.pos.y,o=32*e-t.pos.z,i=p.mat4.create();p.mat4.identity(i),p.mat4.rotateX(i,i,p.glMatrix.toRadian(90)),p.mat4.rotateY(i,i,p.glMatrix.toRadian(90)),p.mat4.translate(i,i,[n,r,o]),p.mat4.rotateY(i,i,p.glMatrix.toRadian(t.rotation.y-270)),p.mat4.rotateZ(i,i,p.glMatrix.toRadian(-t.rotation.x)),p.mat4.rotateX(i,i,p.glMatrix.toRadian(t.rotation.z-90)),p.mat4.scale(i,i,[t.scale/1024,t.scale/1024,t.scale/1024]);var a=p.mat4.create();p.mat4.invert(a,i),this.placementInvertMatrix=a,this.placementMatrix=i}},{key:"calcOwnPosition",value:function(){var t=p.vec4.fromValues(0,0,0,1);p.vec4.transformMat4(t,t,this.placementMatrix),this.position=t}},{key:"calcDistance",value:function(t){function e(t,e){var n=Math.max(t[0][0]-e[0],0,e[0]-t[1][0]),r=Math.max(t[0][1]-e[1],0,e[1]-t[1][1]),o=Math.max(t[0][2]-e[2],0,e[2]-t[1][2]);return Math.sqrt(n*n+r*r+o*o)}this.aabb&&(this.currentDistance=e(this.aabb,t))}},{key:"getCurrentDistance",value:function(){return this.currentDistance}},{key:"getDiameter",value:function(){return this.diameter}},{key:"setIsRendered",value:function(t){this.isRendered=t}},{key:"getIsRendered",value:function(){return this.isRendered}},{key:"load",value:function(t){var n=this;return n.mddf=t,n.createPlacementMatrix(t),n.calcOwnPosition(),l(Object.getPrototypeOf(e.prototype),"load",this).call(this,t.fileName,0)}}]),e}(c["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(55),s=r(a),l=n(57),u=r(l),c=n(58),f=function(){function t(e){o(this,t),this.sceneApi=e,this.currentAnimationStart=0,this.currentAnimation=0,this.currentTime=0,this.isAnimated=!1,this.subMeshColors}return i(t,[{key:"load",value:function(t,e,n){var r=this,o=t.split(".")[0],i=o+".m2",a=o+"00.skin",l=this.sceneApi.resources.loadM2Geom(i),u=this.sceneApi.resources.loadSkinGeom(a);return this.fileIdent=i+" "+a,s["default"].all([l,u]).then(function(e){var o=e[0],i=e[1];if(r.m2Geom=o,r.skinGeom=i,o){r.sceneApi.getGlContext();r.makeTextureArray(o,i,n)}else $log.log("m2 file failed to load : "+t);return!0})}},{key:"makeTextureArray",value:function(t,e,n){for(var r=this,o=new Array(e.skinFile.header.texs.length),i=0;i<o.length;i++)o[i]={isRendered:!1,isTransparent:!1,isEnviromentMapping:!1,meshIndex:-1,textureTexUnit1:null,textureTexUnit2:null,textureTexUnit3:null};for(var i=0;i<e.skinFile.header.texs.length;i++){var a=e.skinFile.header.texs[i],s=t.m2File.texLookup[a.textureIndex],l=a.op_count,u=a.renderFlagIndex,c=t.m2File.renderFlags[u].blend>=2,f=o[i];f.layer=a.layer,f.isRendered=!0,f.isTransparent=c,f.meshIndex=a.submeshIndex;var d;if(a.textureUnitNum<=t.m2File.textUnitLookup.length&&(d=t.m2File.textUnitLookup[a.textureUnitNum],-1==d&&(f.isEnviromentMapping=!0)),l>0){var s=t.m2File.texLookup[a.textureIndex],p=t.m2File.textureDefinition[s];f.texUnit1TexIndex=i,f.textureUnit1TexName=p.textureName}if(l>1){var h=t.m2File.texLookup[a.textureIndex+1],m=t.m2File.textureDefinition[h];f.texUnit2TexIndex=i,f.textureUnit2TexName=m.textureName}if(l>2){var b=t.m2File.texLookup[a.textureIndex+2],g=t.m2File.textureDefinition[b];f.texUnit3TexIndex=i,f.textureUnit3TexName=g.textureName}}for(var i=0;i<o.length;i++){var f=o[i];f.textureUnit1TexName&&!function(t){r.sceneApi.resources.loadTexture(t.textureUnit1TexName).then(function(e){t.texUnit1Texture=e},function(){})}(f),f.textureUnit2TexName&&!function(t){r.sceneApi.resources.loadTexture(t.textureUnit2TexName).then(function(e){t.texUnit2Texture=e},function(){})}(f),f.textureUnit3TexName&&!function(t){r.sceneApi.resources.loadTexture(t.textureUnit3TexName).then(function(e){t.texUnit3Texture=e},function(){})}(f)}o.sort(function(t,e){return t.layer-e.layer}),this.materialArray=o}},{key:"checkFrustumCulling",value:function(t,e,n){if(t[0]>n[0][0]&&t[0]<n[1][0]&&t[1]>n[0][1]&&t[1]<n[1][1]&&t[2]>n[0][2]&&t[2]<n[1][2])return!0;var r=u["default"].checkFrustum(e,n);return r}},{key:"checkAgainstDepthBuffer",value:function(t,e,n,r){var o=this.getBoundingBox();if(!o)return!1;var i=c.mat4.create();c.mat4.multiply(i,t,e),c.mat4.multiply(i,i,n);var a=o.ab,s=o.cd,l=c.vec4.fromValues(a.x,a.y,a.z,1),u=c.vec4.fromValues(s.x,s.y,s.z,1);c.vec4.transformMat4(l,l,i),c.vec4.transformMat4(u,u,i),c.vec4.scale(l,l,1/l[3]),c.vec4.scale(u,u,1/u[3]);var f=Math.max(0,Math.min(l[2],u[2])),d=Math.min(l[0],u[0]);d=Math.max(d,-1);var p=Math.max(l[0],u[0]);p=Math.min(p,1);var h=Math.min(l[1],u[1]);h=Math.max(h,-1);var m=Math.max(l[1],u[1]);return m=Math.min(m,1),r(d,p,h,m,f)}},{key:"createVAO",value:function(t,e,n){
var r=t.getExtension("OES_vertex_array_object");if(r){var o=r.createVertexArrayOES();r.bindVertexArrayOES(o),e.setupAttributes(t,n),r.bindVertexArrayOES(null)}return{vao:o,ext:r}}},{key:"getSubMeshColor",value:function(t,e){var n=this.m2Geom.m2File.colors,r=this.m2Geom.m2File.animations[t];if(n.length>0){var o=this.subMeshColors;o||(o=new Array(n.length));for(var i=0;i<n.length;i++){var a=this.getTimedValue(0,e,r.length,t,n[i].color),s=this.getTimedValue(2,e,r.length,t,n[i].alpha);a?o[i]=[a[0],a[1],a[2],1]:o[i]=[1,1,1,1],s&&(o[i][3]=s[0])}return o}return null}},{key:"getTransperencies",value:function(t,e){var n=this.m2Geom.m2File.transparencies,r=this.m2Geom.m2File.animations[t];if(n.length>0){var o=this.transperencies;o||(o=new Array(n.length));for(var i=0;i<n.length;i++){var a=this.getTimedValue(2,e,r.length,t,n[i].values);o[i]=a[0]}return o}return null}},{key:"getMeshesToRender",value:function(){var t=[];if(this.materialArray)for(var e=0;e<this.materialArray.length;e++)if(this.materialArray[e].isRendered&&void 0!==this.materialArray[e].texUnit1TexIndex){var n=this.skinGeom.skinFile.header.texs[this.materialArray[e].texUnit1TexIndex].colorIndex,r=this.skinGeom.skinFile.header.texs[this.materialArray[e].texUnit1TexIndex].renderFlagIndex,o=this.m2Geom.m2File.renderFlags[r].blend>0,i=n>-1&&this.subMeshColors?this.subMeshColors[n]:null,a={m2Object:this,skin:this.skinGeom,meshIndex:e,color:i,transparency:0,isTransparent:o,animationMatrix:null};t.push(a)}return t}},{key:"getBoundingBox",value:function(){return this.m2Geom?{ab:this.m2Geom.m2File.BoundingCorner1,cd:this.m2Geom.m2File.BoundingCorner2}:null}},{key:"update",value:function(t,e,n){if(this.m2Geom){var r=this.currentAnimation;r=this.checkCurrentAnimation(r,this.currentTime+t);var o=this.getSubMeshColor(r,this.currentTime+t);this.subMeshColors=o;var i=this.getTransperencies(r,this.currentTime+t);this.transperencies=i,this.calcBones(r,this.currentTime+t,e,n),this.calcAnimMatrixes(r,this.currentTime+t),this.currentTime+=t}}},{key:"checkCurrentAnimation",value:function(t,e){var n=this.m2Geom.m2File.animations[t];if(e>this.currentAnimationStart+n.length){var r=n.next_animation;if(this.currentAnimationStart=e,r>=0)return this.currentAnimation=r,r}return this.currentAnimation}},{key:"interpolateValues",value:function(t,e,n,r,o,i){if(0==e)return o;if(e>=1){var a=c.vec4.create();c.vec4.subtract(a,i,o),c.vec4.scale(a,a,(t-n)/(r-n));var s=c.vec4.create();return c.vec4.add(s,o,a),s}}},{key:"getTimedValue",value:function(t,e,n,r,o){function i(t){return(0>t?t+32768:t-32767)/32767}function a(t,e){return 0==e?[t.x,t.y,t.z,0]:1==e?[i(t[0]),i(t[1]),i(t[2]),i(t[3])]:2==e?[t/32767,t/32767,t/32767,t/32767]:void 0}var s=o.global_sequence,l=o.interpolation_type,u=o.timestampsPerAnimation[r],f=o.valuesPerAnimation[r];if(void 0==u&&(r=0,u=o.timestampsPerAnimation[r],f=o.valuesPerAnimation[r]),0!=u.length){s>=0&&(n=this.m2Geom.m2File.globalSequences[s]);var d,p=u.length;if(p>1){var h=e%n;if(h>u[p-1]&&n>=h)d=a(f[0],t);else{d=a(u[p-1],t);for(var m=0;p>m;m++)if(u[m]>h){var b=f[m-1],g=f[m],v=u[m-1],y=u[m];b=a(b,t),g=a(g,t),d=this.interpolateValues(h,l,v,y,b,g),1==t&&c.vec4.normalize(d,d);break}}}else d=a(f[0],t);return d}}},{key:"calcAnimMatrixes",value:function(t,e){if(!this.textAnimMatrix){for(var n=new Array(this.m2Geom.m2File.texAnims.length),r=0;r<n.length;r++)n[r]=c.mat4.create();this.textAnimMatrix=n}for(var o=this.m2Geom.m2File.animations[t],r=0;r<this.m2Geom.m2File.texAnims.length;r++){var i=this.m2Geom.m2File.texAnims[r],a=c.mat4.identity(this.textAnimMatrix[r]);if(i.translation.valuesPerAnimation.length>0){var s=this.getTimedValue(0,e,o.length,t,i.translation);s&&(s=c.mat4.translate(a,a,[s[0],s[1],s[2],0]))}if(i.rotation.valuesPerAnimation.length>0){var l=this.getTimedValue(1,e,o.length,t,i.rotation);if(l){var u=c.mat4.create();c.mat4.fromQuat(u,l),c.mat4.multiply(a,a,u)}}if(i.scale.valuesPerAnimation.length>0){var f=this.getTimedValue(0,e,o.length,t,i.scale);f&&c.mat4.scale(a,a,[f[0],f[1],f[2]])}this.textAnimMatrix[r]=a}}},{key:"calcBoneMatrix",value:function(t,e,n,r,o,i){if(!e.isCalculated){var a=this.m2Geom.m2File.bones[t],s=a.parent_bone,l=this.m2Geom.m2File.animations[n],u=c.mat4.create();if(u=c.mat4.identity(u),s>=0&&(this.calcBoneMatrix(s,this.bones[s],n,r,o,i),c.mat4.multiply(u,u,this.bones[s].tranformMat)),c.mat4.translate(u,u,[a.pivot.x,a.pivot.y,a.pivot.z,0]),a.translation.valuesPerAnimation.length>0){var f=this.getTimedValue(0,r,l.length,n,a.translation);f&&(f=c.mat4.translate(u,u,[f[0],f[1],f[2],0]),this.isAnimated=!0)}if((8&a.flags)>0||(64&a.flags)>0){var d=c.vec3.create(),p=c.vec4.create();if(c.vec4.copy(p,o),c.vec4.transformMat4(p,p,i),s>=0&&c.vec4.transformMat4(p,p,this.bones[s].inverTransforMat),c.vec4.subtract(p,p,[a.pivot.x,a.pivot.y,a.pivot.z,0]),c.vec3.normalize(d,p),(64&a.flags)>0){var h=c.vec3.fromValues(0,0,1),m=c.vec3.create();c.vec3.cross(m,h,d),c.vec3.normalize(m,m),c.vec3.cross(d,m,h),c.vec3.normalize(d,d),c.vec3.cross(m,h,d),c.vec3.normalize(m,m)}else{var m=c.vec3.create();c.vec3.cross(m,[0,0,1],d),c.vec3.normalize(m,m);var h=c.vec3.create();c.vec3.cross(h,d,m),c.vec3.normalize(h,h)}c.mat4.multiply(u,u,[d[0],d[1],d[2],0,m[0],m[1],m[2],0,h[0],h[1],h[2],0,0,0,0,1]),this.isAnimated=!0}else if(a.rotation.valuesPerAnimation.length>0){var b=this.getTimedValue(1,r,l.length,n,a.rotation);if(b){var g=c.mat4.create();c.mat4.fromQuat(g,b),c.mat4.multiply(u,u,g),this.isAnimated=!0}}if(a.scale.valuesPerAnimation.length>0){var v=this.getTimedValue(0,r,l.length,n,a.scale);v&&c.mat4.scale(u,u,[v[0],v[1],v[2]]),this.isAnimated=!0}c.mat4.translate(u,u,[-a.pivot.x,-a.pivot.y,-a.pivot.z,0]);var y=c.mat4.create();c.mat4.invert(y,u),e.tranformMat=u,e.inverTransforMat=y}}},{key:"combineBoneMatrixes",value:function(){for(var t=new Float32Array(16*this.bones.length),e=0;e<this.bones.length;e++)t.set(this.bones[e].tranformMat,16*e);return t}},{key:"calcBones",value:function(t,e,n,r){if(!this.m2Geom)return null;var o=this.m2Geom.m2File;if(!this.bones){this.bones=new Array(o.nBones);for(var i=0;i<o.nBones;i++)this.bones[i]||(this.bones[i]={}),this.bones[i].isCalculated=!1}if(!this.boneMatrix||this.isAnimated)for(var i=0;i<o.nBones;i++)this.calcBoneMatrix(i,this.bones[i],t,e,n,r);this.boneMatrix=this.combineBoneMatrixes()}},{key:"drawInstancedNonTransparentMeshes",value:function(t,e,n){if(this.m2Geom){this.m2Geom.setupAttributes(this.skinGeom);var r=this.boneMatrix;this.m2Geom.setupUniforms(null,r),this.m2Geom.setupPlacementAttribute(e);var o=[255&n,n>>8&255,n>>16&255,n>>24&255];o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255;for(var i=0;i<this.submeshArray.length;i++){var a=this.submeshArray[i];a.isTransparent||this.m2Geom.drawMesh(i,a,this.skinGeom,this.subMeshColors,o,this.transperencies,textureMatrix,t)}}}},{key:"drawInstancedTransparentMeshes",value:function(t,e,n){if(this.m2Geom){var r=c.mat4.create();c.mat4.identity(r),this.m2Geom.setupAttributes(this.skinGeom);var o=this.boneMatrix;this.m2Geom.setupUniforms(null,o),this.m2Geom.setupPlacementAttribute(e);var i=[255&n,n>>8&255,n>>16&255,n>>24&255];i[0]/=255,i[1]/=255,i[2]/=255,i[3]/=255;for(var a=0;a<this.materialArray.length;a++){var s=this.materialArray[a];if(s.isTransparent){var l,u=this.skinGeom.skinFile.header;if(s.texUnit1TexIndex>=0&&u.texs[s.texUnit1TexIndex]){var f=u.texs[s.texUnit1TexIndex].textureAnim,d=this.m2Geom.m2File.texAnimLookup[f];l=d>=0?this.textAnimMatrix[d]:r}this.m2Geom.drawMesh(a,s,this.skinGeom,this.subMeshColors,i,this.transperencies,l,t)}}}}},{key:"drawNonTransparentMeshes",value:function(t,e){if(this.m2Geom&&this.skinGeom){var n=c.mat4.create();c.mat4.identity(n),this.m2Geom.setupAttributes(this.skinGeom);var r=this.boneMatrix;this.m2Geom.setupUniforms(t,r);var o=[255&e,e>>8&255,e>>16&255,e>>24&255];o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255;for(var i=0;i<this.materialArray.length;i++){var a=this.materialArray[i];if(!a.isTransparent){var s=n,l=n,u=this.skinGeom.skinFile.header;if(a.texUnit1TexIndex>=0&&u.texs[a.texUnit1TexIndex]){var f=u.texs[a.texUnit1TexIndex].textureAnim,d=this.m2Geom.m2File.texAnimLookup[f];if(void 0!==d&&d>=0&&d<this.textAnimMatrix.length&&(s=this.textAnimMatrix[d]),a.texUnit2TexIndex>=0){var d=this.m2Geom.m2File.texAnimLookup[f+1];void 0!==d&&d>=0&&d<this.textAnimMatrix.length&&(l=this.textAnimMatrix[d])}}this.m2Geom.drawMesh(i,a,this.skinGeom,this.subMeshColors,o,this.transperencies,s,l)}}}}},{key:"drawTransparentMeshes",value:function(t,e){if(this.m2Geom&&this.skinGeom){var n=c.mat4.create();c.mat4.identity(n),this.m2Geom.setupAttributes(this.skinGeom);var r=this.boneMatrix;this.m2Geom.setupUniforms(t,r);var o=[255&e,e>>8&255,e>>16&255,e>>24&255];o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255;for(var i=0;i<this.materialArray.length;i++){var a=this.materialArray[i];if(a.isTransparent){var s=n,l=n,u=this.skinGeom.skinFile.header;if(a.texUnit1TexIndex>=0&&u.texs[a.texUnit1TexIndex]){var f=u.texs[a.texUnit1TexIndex].textureAnim,d=this.m2Geom.m2File.texAnimLookup[f];if(void 0!==d&&d>=0&&this.textAnimMatrix&&(s=this.textAnimMatrix[d]),a.texUnit2TexIndex>=0){var d=this.m2Geom.m2File.texAnimLookup[f+1];void 0!==d&&d>=0&&this.textAnimMatrix&&(l=this.textAnimMatrix[d])}}this.m2Geom.drawMesh(i,a,this.skinGeom,this.subMeshColors,o,this.transperencies,s,l)}}}}},{key:"draw",value:function(t,e){var n=[255&e,e>>8&255,e>>16&255,e>>24&255];n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255,this.m2Geom&&this.skinGeom&&this.m2Geom.draw(this.skinGeom,this.materialArray,t,n,this.subMeshColors,this.transperencies,this.vao,this.vaoExt)}}]),t}();e["default"]=f},function(t,e,n){var r,o;(function(i,a){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(i){"function"==typeof bootstrap?bootstrap("promise",i):"object"===s(e)?t.exports=i():(r=i,o="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==o&&(t.exports=o)))}(function(){function t(t){return function(){return Z.apply(t,arguments)}}function e(t){return t===Object(t)}function n(t){return"[object StopIteration]"===ot(t)||t instanceof W}function r(t,e){if(z&&e.stack&&"object"===("undefined"==typeof t?"undefined":s(t))&&null!==t&&t.stack&&-1===t.stack.indexOf(it)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+it+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];c(o)||l(o)||!o||n.push(o)}return n.join("\n")}function l(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var e=u(t);if(!e)return!1;var n=e[0],r=e[1];return n===q&&r>=H&&ut>=r}function f(){if(z)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=u(n);if(!r)return;return q=r[0],r[1]}}function d(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return x(t)?t:w(t)?C(t):S(t)}function h(){function t(t){e=t,i.source=t,Q(n,function(e,n){Y(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],o=et(h.prototype),i=et(g.prototype);if(i.promiseDispatch=function(t,o,i){var a=K(arguments);n?(n.push(a),"when"===o&&i[1]&&r.push(i[1])):Y(function(){e.promiseDispatch.apply(e,a)})},i.valueOf=function(){if(n)return i;var t=y(e);return x(t)&&(e=t),t},i.inspect=function(){return e?e.inspect():{state:"pending"}},p.longStackSupport&&z)try{throw new Error}catch(a){i.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){e||t(p(n))},o.fulfill=function(n){e||t(S(n))},o.reject=function(n){e||t(T(n))},o.notify=function(t){e||Q(r,function(e,n){Y(function(){n(t)})},void 0)},o}function m(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=h();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function b(t){return m(function(e,n){for(var r=0,o=t.length;o>r;r++)p(t[r]).then(e,n)})}function g(t,e,n){void 0===e&&(e=function(t){return T(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=et(g.prototype);if(r.promiseDispatch=function(n,o,i){var a;try{a=t[o]?t[o].apply(r,i):e.call(r,o,i)}catch(s){a=T(s)}n&&n(a)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function v(t,e,n,r){return p(t).then(e,n,r)}function y(t){if(x(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function x(t){return e(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function w(t){return e(t)&&"function"==typeof t.then}function _(t){return x(t)&&"pending"===t.inspect().state}function k(t){return!x(t)||"fulfilled"===t.inspect().state}function E(t){return x(t)&&"rejected"===t.inspect().state}function $(){at.length=0,st.length=0,lt||(lt=!0)}function M(t,e){lt&&(st.push(t),e&&"undefined"!=typeof e.stack?at.push(e.stack):at.push("(no stack) "+e))}function A(t){if(lt){var e=J(st,t);-1!==e&&(st.splice(e,1),at.splice(e,1))}}function T(t){var e=g({when:function(e){return e&&A(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return M(e,t),e}function S(t){return g({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return rt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function C(t){var e=h();return Y(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function F(t){return g({isDef:function(){}},function(e,n){return j(t,e,n)},function(){return p(t).inspect()})}function I(t,e,n){return p(t).spread(e,n)}function D(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=r[t](e)}catch(s){return T(s)}return a.done?a.value:v(a.value,o,i)}try{a=r[t](e)}catch(s){return n(s)?s.value:T(s)}return v(a,o,i)}var r=t.apply(this,arguments),o=e.bind(e,"next"),i=e.bind(e,"throw");return o()}}function R(t){p.done(p.async(t)())}function O(t){throw new W(t)}function P(t){return function(){return I([this,L(arguments)],function(e,n){return t.apply(e,n)})}}function j(t,e,n){return p(t).dispatch(e,n)}function L(t){return v(t,function(t){var e=0,n=h();return Q(t,function(r,o,i){var a;x(o)&&"fulfilled"===(a=o.inspect()).state?t[i]=a.value:(++e,v(o,function(r){t[i]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:i,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function N(t){return v(t,function(t){return t=tt(t,p),v(L(tt(t,function(t){return v(t,X,X)})),function(){return t})})}function U(t){return p(t).allSettled()}function B(t,e){return p(t).then(void 0,void 0,e)}function V(t,e){return p(t).nodeify(e)}var z=!1;try{throw new Error}catch(G){z=!!G.stack}var q,W,H=f(),X=function(){},Y=function(){function t(){for(;e.next;){e=e.next;var n=e.task;e.task=void 0;var o=e.domain;o&&(e.domain=void 0,o.enter());try{n()}catch(i){if(s)throw o&&o.exit(),setTimeout(t,0),o&&o.enter(),i;setTimeout(function(){throw i},0)}o&&o.exit()}r=!1}var e={task:void 0,next:null},n=e,r=!1,o=void 0,s=!1;if(Y=function(t){n=n.next={task:t,domain:s&&i.domain,next:null},r||(r=!0,o())},"undefined"!=typeof i&&i.nextTick)s=!0,o=function(){i.nextTick(t)};else if("function"==typeof a)o="undefined"!=typeof window?a.bind(window,t):function(){a(t)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=function(){o=u,l.port1.onmessage=t,t()};var u=function(){l.port2.postMessage(0)};o=function(){setTimeout(t,0),u()}}else o=function(){setTimeout(t,0)};return Y}(),Z=Function.call,K=t(Array.prototype.slice),Q=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),J=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),tt=t(Array.prototype.map||function(t,e){var n=this,r=[];return Q(n,function(o,i,a){r.push(t.call(e,i,a,n))},void 0),r}),et=Object.create||function(t){function e(){}return e.prototype=t,new e},nt=t(Object.prototype.hasOwnProperty),rt=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},ot=t(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var it="From previous event:";p.resolve=p,p.nextTick=Y,p.longStackSupport=!1,p.defer=h,h.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(K(arguments,1)):t.resolve(n)}},p.Promise=m,p.promise=m,m.race=b,m.all=L,m.reject=T,m.resolve=p,p.passByCopy=function(t){return t},g.prototype.passByCopy=function(){return this},p.join=function(t,e){return p(t).join(e)},g.prototype.join=function(t){return p([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},p.race=b,g.prototype.race=function(){return this.then(p.race)},p.makePromise=g,g.prototype.toString=function(){return"[object Promise]"},g.prototype.then=function(t,e,n){function o(e){try{return"function"==typeof t?t(e):e}catch(n){return T(n)}}function i(t){if("function"==typeof e){r(t,s);try{return e(t)}catch(n){return T(n)}}return T(t)}function a(t){return"function"==typeof n?n(t):t}var s=this,l=h(),u=!1;return Y(function(){s.promiseDispatch(function(t){u||(u=!0,l.resolve(o(t)))},"when",[function(t){u||(u=!0,l.resolve(i(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(r){if(n=!0,!p.onerror)throw r;p.onerror(r)}n||l.notify(e)}]),l.promise},p.when=v,g.prototype.thenResolve=function(t){return this.then(function(){return t})},p.thenResolve=function(t,e){return p(t).thenResolve(e)},g.prototype.thenReject=function(t){return this.then(function(){throw t})},p.thenReject=function(t,e){return p(t).thenReject(e)},p.nearer=y,p.isPromise=x,p.isPromiseAlike=w,p.isPending=_,g.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=k,g.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=E,g.prototype.isRejected=function(){return"rejected"===this.inspect().state};var at=[],st=[],lt=!0;p.resetUnhandledRejections=$,p.getUnhandledReasons=function(){return at.slice()},p.stopUnhandledRejectionTracking=function(){$(),lt=!1},$(),p.reject=T,p.fulfill=S,p.master=F,p.spread=I,g.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},p.async=D,p.spawn=R,p["return"]=O,p.promised=P,p.dispatch=j,g.prototype.dispatch=function(t,e){var n=this,r=h();return Y(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},p.get=function(t,e){return p(t).dispatch("get",[e])},g.prototype.get=function(t){return this.dispatch("get",[t])},p.set=function(t,e,n){return p(t).dispatch("set",[e,n])},g.prototype.set=function(t,e){return this.dispatch("set",[t,e])},p.del=p["delete"]=function(t,e){return p(t).dispatch("delete",[e])},g.prototype.del=g.prototype["delete"]=function(t){return this.dispatch("delete",[t])},p.mapply=p.post=function(t,e,n){return p(t).dispatch("post",[e,n])},g.prototype.mapply=g.prototype.post=function(t,e){return this.dispatch("post",[t,e])},p.send=p.mcall=p.invoke=function(t,e){return p(t).dispatch("post",[e,K(arguments,2)])},g.prototype.send=g.prototype.mcall=g.prototype.invoke=function(t){return this.dispatch("post",[t,K(arguments,1)])},p.fapply=function(t,e){return p(t).dispatch("apply",[void 0,e])},g.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},p["try"]=p.fcall=function(t){return p(t).dispatch("apply",[void 0,K(arguments,1)])},g.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},p.fbind=function(t){var e=p(t),n=K(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(K(arguments))])}},g.prototype.fbind=function(){var t=this,e=K(arguments);return function(){return t.dispatch("apply",[this,e.concat(K(arguments))])}},p.keys=function(t){return p(t).dispatch("keys",[])},g.prototype.keys=function(){return this.dispatch("keys",[])},p.all=L,g.prototype.all=function(){return L(this)},p.allResolved=d(N,"allResolved","allSettled"),g.prototype.allResolved=function(){return N(this)},p.allSettled=U,g.prototype.allSettled=function(){return this.then(function(t){return L(tt(t,function(t){function e(){return t.inspect()}return t=p(t),t.then(e,e)}))})},p.fail=p["catch"]=function(t,e){return p(t).then(void 0,e)},g.prototype.fail=g.prototype["catch"]=function(t){return this.then(void 0,t)},p.progress=B,g.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.fin=p["finally"]=function(t,e){return p(t)["finally"](e)},g.prototype.fin=g.prototype["finally"]=function(t){return t=p(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},p.done=function(t,e,n,r){return p(t).done(e,n,r)},g.prototype.done=function(t,e,n){var o=function(t){Y(function(){if(r(t,a),!p.onerror)throw t;p.onerror(t)})},a=t||e||n?this.then(t,e,n):this;"object"===("undefined"==typeof i?"undefined":s(i))&&i&&i.domain&&(o=i.domain.bind(o)),a.then(void 0,o)},p.timeout=function(t,e,n){return p(t).timeout(e,n)},g.prototype.timeout=function(t,e){var n=h(),r=setTimeout(function(){n.reject(new Error(e||"Timed out after "+t+" ms"))},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},p.delay=function(t,e){return void 0===e&&(e=t,t=void 0),p(t).delay(e)},g.prototype.delay=function(t){return this.then(function(e){var n=h();return setTimeout(function(){n.resolve(e)},t),n.promise})},p.nfapply=function(t,e){return p(t).nfapply(e)},g.prototype.nfapply=function(t){var e=h(),n=K(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},p.nfcall=function(t){var e=K(arguments,1);return p(t).nfapply(e)},g.prototype.nfcall=function(){var t=K(arguments),e=h();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},p.nfbind=p.denodeify=function(t){var e=K(arguments,1);return function(){var n=e.concat(K(arguments)),r=h();return n.push(r.makeNodeResolver()),p(t).fapply(n).fail(r.reject),r.promise}},g.prototype.nfbind=g.prototype.denodeify=function(){var t=K(arguments);return t.unshift(this),p.denodeify.apply(void 0,t)},p.nbind=function(t,e){var n=K(arguments,2);return function(){function r(){return t.apply(e,arguments)}var o=n.concat(K(arguments)),i=h();return o.push(i.makeNodeResolver()),p(r).fapply(o).fail(i.reject),i.promise}},g.prototype.nbind=function(){var t=K(arguments,0);return t.unshift(this),p.nbind.apply(void 0,t)},p.nmapply=p.npost=function(t,e,n){return p(t).npost(e,n)},g.prototype.nmapply=g.prototype.npost=function(t,e){var n=K(e||[]),r=h();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(t,e){var n=K(arguments,2),r=h();return n.push(r.makeNodeResolver()),p(t).dispatch("post",[e,n]).fail(r.reject),r.promise},g.prototype.nsend=g.prototype.nmcall=g.prototype.ninvoke=function(t){var e=K(arguments,1),n=h();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},p.nodeify=V,g.prototype.nodeify=function(t){return t?void this.then(function(e){Y(function(){t(null,e)})},function(e){Y(function(){t(e)})}):this};var ut=f();return p})}).call(e,n(30),n(56).setImmediate)},function(t,e,n){(function(t,r){function o(t,e){this._id=t,this._clearFn=e}var i=n(30).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,l={},u=0;e.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=u++,r=arguments.length<2?!1:s.call(arguments,1);return l[n]=!0,i(function(){l[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete l[t]}}).call(e,n(56).setImmediate,n(56).clearImmediate)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(58),a=function(){function t(){r(this,t)}return o(t,null,[{key:"getFrustumClipsFromMatrix",value:function(t){var e=new Array(6);e[0]=i.vec4.fromValues(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),e[1]=i.vec4.fromValues(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),e[2]=i.vec4.fromValues(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),e[3]=i.vec4.fromValues(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),e[4]=i.vec4.fromValues(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14]),e[5]=i.vec4.fromValues(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]);for(var n=0;6>n;n++){var r=1/i.vec3.length(e[n]);i.vec4.scale(e[n],e[n],r)}return e}},{key:"createPlaneFromEyeAndVertexes",value:function(t,e,n){var r=i.vec4.create();i.vec4.subtract(r,e,n),i.vec4.normalize(r);var o=i.vec4.create();i.vec4.add(o,e,n),i.vec4.scale(o,o,.5),i.vec4.subtract(o,o,t),i.vec4.normalize(o,o);var a=i.vec4.create();i.vec4.cross(a,o,r),i.vec4.normalize(a,a);var s=i.vec4.dot(a,e);return a[3]=s,s}},{key:"checkPortalFrustum",value:function(t,e){}},{key:"checkFrustum",value:function(t,e){for(var n=0;6>n;n++){var r=0;if(r+=i.vec4.dot(t[n],i.vec4.fromValues(e[0][0],e[0][1],e[0][2],1))<0?1:0,r+=i.vec4.dot(t[n],i.vec4.fromValues(e[1][0],e[0][1],e[0][2],1))<0?1:0,r+=i.vec4.dot(t[n],i.vec4.fromValues(e[0][0],e[1][1],e[0][2],1))<0?1:0,r+=i.vec4.dot(t[n],i.vec4.fromValues(e[1][0],e[1][1],e[0][2],1))<0?1:0,r+=i.vec4.dot(t[n],i.vec4.fromValues(e[0][0],e[0][1],e[1][2],1))<0?1:0,r+=i.vec4.dot(t[n],i.vec4.fromValues(e[1][0],e[0][1],e[1][2],1))<0?1:0,r+=i.vec4.dot(t[n],i.vec4.fromValues(e[0][0],e[1][1],e[1][2],1))<0?1:0,r+=i.vec4.dot(t[n],i.vec4.fromValues(e[1][0],e[1][1],e[1][2],1))<0?1:0,8==r)return!1}return!0}},{key:"transformAABBWithMat4",value:function(t,e){var n=i.vec4.create(),r=i.vec4.create();i.vec4.scale(n,i.vec4.fromValues(t[0],t[1],t[2],t[3]),e[0][0]),i.vec4.scale(r,i.vec4.fromValues(t[0],t[1],t[2],t[3]),e[1][0]);var o=i.vec4.create(),a=i.vec4.create();i.vec4.scale(o,i.vec4.fromValues(t[4],t[5],t[6],t[7]),e[0][1]),i.vec4.scale(a,i.vec4.fromValues(t[4],t[5],t[6],t[7]),e[1][1]);var s=i.vec4.create(),l=i.vec4.create();i.vec4.scale(s,i.vec4.fromValues(t[8],t[9],t[10],t[11]),e[0][2]),i.vec4.scale(l,i.vec4.fromValues(t[8],t[9],t[10],t[11]),e[1][2]);var u=i.vec4.create(),c=i.vec4.create(),f=i.vec4.create(),d=i.vec4.create(),p=i.vec4.create(),h=i.vec4.create();i.vec3.min(u,n,r),i.vec3.max(d,n,r),i.vec3.min(c,o,a),i.vec3.max(p,o,a),i.vec3.min(f,s,l),i.vec3.max(h,s,l);var m=i.vec4.fromValues(t[12],t[13],t[14],0),b=i.vec4.create(),g=i.vec4.create();return i.vec4.add(b,u,c),i.vec4.add(b,b,f),i.vec4.add(b,b,m),i.vec4.add(g,d,p),i.vec4.add(g,g,h),i.vec4.add(g,g,m),[b,g]}}]),t}();e["default"]=a},function(t,e,n){e.glMatrix=n(59),e.mat2=n(60),e.mat2d=n(61),e.mat3=n(62),e.mat4=n(63),e.quat=n(64),e.vec2=n(67),e.vec3=n(65),e.vec4=n(66)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var r=Math.PI/180;n.toRadian=function(t){return t*r},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){var r=n(59),o={};o.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.fromValues=function(t,e,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=o,i},o.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},o.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},o.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*i-o*r;return a?(a=1/a,t[0]=i*a,t[1]=-r*a,t[2]=-o*a,t[3]=n*a,t):null},o.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*s+i*l,t[1]=o*s+a*l,t[2]=r*u+i*c,t[3]=o*u+a*c,t},o.mul=o.multiply,o.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*s,t[1]=o*l+a*s,t[2]=r*-s+i*l,t[3]=o*-s+a*l,t},o.scale=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],l=n[1];return t[0]=r*s,t[1]=o*s,t[2]=i*l,t[3]=a*l,t},o.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],a=t[3],s=e[0],l=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},t.exports=o},function(t,e,n){var r=n(59),o={};o.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.fromValues=function(t,e,n,o,i,a){var s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=o,s[4]=i,s[5]=a,s},o.set=function(t,e,n,r,o,i,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t},o.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=n*i-r*o;return l?(l=1/l,t[0]=i*l,t[1]=-r*l,t[2]=-o*l,t[3]=n*l,t[4]=(o*s-i*a)*l,t[5]=(r*a-n*s)*l,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1],f=n[2],d=n[3],p=n[4],h=n[5];return t[0]=r*u+i*c,t[1]=o*u+a*c,t[2]=r*f+i*d,t[3]=o*f+a*d,t[4]=r*p+i*h+s,t[5]=o*p+a*h+l,t},o.mul=o.multiply,o.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*u,t[1]=o*c+a*u,t[2]=r*-u+i*c,t[3]=o*-u+a*c,t[4]=s,t[5]=l,t},o.scale=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1];return t[0]=r*u,t[1]=o*u,t[2]=i*c,t[3]=a*c,t[4]=s,t[5]=l,t},o.translate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=n[0],c=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=r*u+i*c+s,t[5]=o*u+a*c+l,t},o.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=e[0],c=e[1],f=e[2],d=e[3],p=e[4],h=e[5];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-h)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(h))},t.exports=o},function(t,e,n){var r=n(59),o={};o.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},o.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromValues=function(t,e,n,o,i,a,s,l,u){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=o,c[4]=i,c[5]=a,c[6]=s,c[7]=l,c[8]=u,c},o.set=function(t,e,n,r,o,i,a,s,l,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},o.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*a-s*u,d=-c*i+s*l,p=u*i-a*l,h=n*f+r*d+o*p;return h?(h=1/h,t[0]=f*h,t[1]=(-c*r+o*u)*h,t[2]=(s*r-o*a)*h,t[3]=d*h,t[4]=(c*n-o*l)*h,t[5]=(-s*n+o*i)*h,t[6]=p*h,t[7]=(-u*n+r*l)*h,t[8]=(a*n-r*i)*h,t):null},o.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=o*u-r*c,t[2]=r*s-o*a,t[3]=s*l-i*c,t[4]=n*c-o*l,t[5]=o*i-n*s,t[6]=i*u-a*l,t[7]=r*l-n*u,t[8]=n*a-r*i,t},o.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*i-a*l)+n*(-u*o+a*s)+r*(l*o-i*s)},o.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=n[0],p=n[1],h=n[2],m=n[3],b=n[4],g=n[5],v=n[6],y=n[7],x=n[8];return t[0]=d*r+p*a+h*u,t[1]=d*o+p*s+h*c,t[2]=d*i+p*l+h*f,t[3]=m*r+b*a+g*u,t[4]=m*o+b*s+g*c,t[5]=m*i+b*l+g*f,t[6]=v*r+y*a+x*u,t[7]=v*o+y*s+x*c,t[8]=v*i+y*l+x*f,t},o.mul=o.multiply,o.translate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=n[0],p=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=l,t[6]=d*r+p*a+u,t[7]=d*o+p*s+c,t[8]=d*i+p*l+f,t},o.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=Math.sin(n),p=Math.cos(n);return t[0]=p*r+d*a,t[1]=p*o+d*s,t[2]=p*i+d*l,t[3]=p*a-d*r,t[4]=p*s-d*o,t[5]=p*l-d*i,t[6]=u,t[7]=c,t[8]=f,t},o.scale=function(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},o.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},o.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,f=r*s,d=o*a,p=o*s,h=o*l,m=i*a,b=i*s,g=i*l;return t[0]=1-f-h,t[3]=c-g,t[6]=d+b,t[1]=c+g,t[4]=1-u-h,t[7]=p-m,t[2]=d-b,t[5]=p+m,t[8]=1-u-f,t},o.normalFromMat4=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],p=e[11],h=e[12],m=e[13],b=e[14],g=e[15],v=n*s-r*a,y=n*l-o*a,x=n*u-i*a,w=r*l-o*s,_=r*u-i*s,k=o*u-i*l,E=c*m-f*h,$=c*b-d*h,M=c*g-p*h,A=f*b-d*m,T=f*g-p*m,S=d*g-p*b,C=v*S-y*T+x*A+w*M-_*$+k*E;return C?(C=1/C,t[0]=(s*S-l*T+u*A)*C,t[1]=(l*M-a*S-u*$)*C,t[2]=(a*T-s*M+u*E)*C,t[3]=(o*T-r*S-i*A)*C,t[4]=(n*S-o*M+i*$)*C,t[5]=(r*M-n*T-i*E)*C,t[6]=(m*k-b*_+g*w)*C,t[7]=(b*x-h*k-g*y)*C,t[8]=(h*_-m*x+g*v)*C,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=e[0],p=e[1],h=e[2],m=e[3],b=e[4],g=e[5],v=t[6],y=e[7],x=e[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-b)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-y)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-x)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))},t.exports=o},function(t,e,n){var r=n(59),o={scalar:{},SIMD:{}};o.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.fromValues=function(t,e,n,o,i,a,s,l,u,c,f,d,p,h,m,b){var g=new r.ARRAY_TYPE(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=o,g[4]=i,g[5]=a,g[6]=s,g[7]=l,g[8]=u,g[9]=c,g[10]=f,g[11]=d,g[12]=p,g[13]=h,g[14]=m,g[15]=b,g},o.set=function(t,e,n,r,o,i,a,s,l,u,c,f,d,p,h,m,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=f,t[11]=d,t[12]=p,t[13]=h,t[14]=m,t[15]=b,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.scalar.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],
t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},o.SIMD.transpose=function(t,e){var n,r,o,i,a,s,l,u,c,f;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,i,0,1,4,5),l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),u=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,u),a=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(o,i,2,3,6,7),c=SIMD.Float32x4.shuffle(a,s,0,2,4,6),f=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,f),t},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],p=e[11],h=e[12],m=e[13],b=e[14],g=e[15],v=n*s-r*a,y=n*l-o*a,x=n*u-i*a,w=r*l-o*s,_=r*u-i*s,k=o*u-i*l,E=c*m-f*h,$=c*b-d*h,M=c*g-p*h,A=f*b-d*m,T=f*g-p*m,S=d*g-p*b,C=v*S-y*T+x*A+w*M-_*$+k*E;return C?(C=1/C,t[0]=(s*S-l*T+u*A)*C,t[1]=(o*T-r*S-i*A)*C,t[2]=(m*k-b*_+g*w)*C,t[3]=(d*_-f*k-p*w)*C,t[4]=(l*M-a*S-u*$)*C,t[5]=(n*S-o*M+i*$)*C,t[6]=(b*x-h*k-g*y)*C,t[7]=(c*k-d*x+p*y)*C,t[8]=(a*T-s*M+u*E)*C,t[9]=(r*M-n*T-i*E)*C,t[10]=(h*_-m*x+g*v)*C,t[11]=(f*x-c*_-p*v)*C,t[12]=(s*$-a*A-l*E)*C,t[13]=(n*A-r*$+o*E)*C,t[14]=(m*y-h*w-b*v)*C,t[15]=(c*w-f*y+d*v)*C,t):null},o.SIMD.invert=function(t,e){var n,r,o,i,a,s,l,u,c,f,d=SIMD.Float32x4.load(e,0),p=SIMD.Float32x4.load(e,4),h=SIMD.Float32x4.load(e,8),m=SIMD.Float32x4.load(e,12);return a=SIMD.Float32x4.shuffle(d,p,0,1,4,5),r=SIMD.Float32x4.shuffle(h,m,0,1,4,5),n=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.shuffle(d,p,2,3,6,7),i=SIMD.Float32x4.shuffle(h,m,2,3,6,7),o=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.mul(o,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(r,a),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),u=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),c),f=SIMD.Float32x4.mul(n,s),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),a=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(f,c)),t):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],p=e[11],h=e[12],m=e[13],b=e[14],g=e[15];return t[0]=s*(d*g-p*b)-f*(l*g-u*b)+m*(l*p-u*d),t[1]=-(r*(d*g-p*b)-f*(o*g-i*b)+m*(o*p-i*d)),t[2]=r*(l*g-u*b)-s*(o*g-i*b)+m*(o*u-i*l),t[3]=-(r*(l*p-u*d)-s*(o*p-i*d)+f*(o*u-i*l)),t[4]=-(a*(d*g-p*b)-c*(l*g-u*b)+h*(l*p-u*d)),t[5]=n*(d*g-p*b)-c*(o*g-i*b)+h*(o*p-i*d),t[6]=-(n*(l*g-u*b)-a*(o*g-i*b)+h*(o*u-i*l)),t[7]=n*(l*p-u*d)-a*(o*p-i*d)+c*(o*u-i*l),t[8]=a*(f*g-p*m)-c*(s*g-u*m)+h*(s*p-u*f),t[9]=-(n*(f*g-p*m)-c*(r*g-i*m)+h*(r*p-i*f)),t[10]=n*(s*g-u*m)-a*(r*g-i*m)+h*(r*u-i*s),t[11]=-(n*(s*p-u*f)-a*(r*p-i*f)+c*(r*u-i*s)),t[12]=-(a*(f*b-d*m)-c*(s*b-l*m)+h*(s*d-l*f)),t[13]=n*(f*b-d*m)-c*(r*b-o*m)+h*(r*d-o*f),t[14]=-(n*(s*b-l*m)-a*(r*b-o*m)+h*(r*l-o*s)),t[15]=n*(s*d-l*f)-a*(r*d-o*f)+c*(r*l-o*s),t},o.SIMD.adjoint=function(t,e){var n,r,o,i,a,s,l,u,c,f,d,p,h,n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,i,0,1,4,5),a=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,i,2,3,6,7),l=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.mul(l,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(s,c),d=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),p=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),c=SIMD.Float32x4.mul(a,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),p),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),h),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),p),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(a,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),p),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(a,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),SIMD.Float32x4.store(t,0,f),SIMD.Float32x4.store(t,4,d),SIMD.Float32x4.store(t,8,p),SIMD.Float32x4.store(t,12,h),t},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],h=t[13],m=t[14],b=t[15],g=e*a-n*i,v=e*s-r*i,y=e*l-o*i,x=n*s-r*a,w=n*l-o*a,_=r*l-o*s,k=u*h-c*p,E=u*m-f*p,$=u*b-d*p,M=c*m-f*h,A=c*b-d*h,T=f*b-d*m;return g*T-v*A+y*M+x*$-w*E+_*k},o.SIMD.multiply=function(t,e,n){var r=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(t,0,l);var u=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(t,4,c);var f=SIMD.Float32x4.load(n,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(t,8,d);var p=SIMD.Float32x4.load(n,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),a))));return SIMD.Float32x4.store(t,12,h),t},o.scalar.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],p=e[10],h=e[11],m=e[12],b=e[13],g=e[14],v=e[15],y=n[0],x=n[1],w=n[2],_=n[3];return t[0]=y*r+x*s+w*f+_*m,t[1]=y*o+x*l+w*d+_*b,t[2]=y*i+x*u+w*p+_*g,t[3]=y*a+x*c+w*h+_*v,y=n[4],x=n[5],w=n[6],_=n[7],t[4]=y*r+x*s+w*f+_*m,t[5]=y*o+x*l+w*d+_*b,t[6]=y*i+x*u+w*p+_*g,t[7]=y*a+x*c+w*h+_*v,y=n[8],x=n[9],w=n[10],_=n[11],t[8]=y*r+x*s+w*f+_*m,t[9]=y*o+x*l+w*d+_*b,t[10]=y*i+x*u+w*p+_*g,t[11]=y*a+x*c+w*h+_*v,y=n[12],x=n[13],w=n[14],_=n[15],t[12]=y*r+x*s+w*f+_*m,t[13]=y*o+x*l+w*d+_*b,t[14]=y*i+x*u+w*p+_*g,t[15]=y*a+x*c+w*h+_*v,t},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(t,e,n){var r,o,i,a,s,l,u,c,f,d,p,h,m=n[0],b=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*b+e[8]*g+e[12],t[13]=e[1]*m+e[5]*b+e[9]*g+e[13],t[14]=e[2]*m+e[6]*b+e[10]*g+e[14],t[15]=e[3]*m+e[7]*b+e[11]*g+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],p=e[10],h=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=f,t[9]=d,t[10]=p,t[11]=h,t[12]=r*m+s*b+f*g+e[12],t[13]=o*m+l*b+d*g+e[13],t[14]=i*m+u*b+p*g+e[14],t[15]=a*m+c*b+h*g+e[15]),t},o.SIMD.translate=function(t,e,n){var r=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(i,a)));return SIMD.Float32x4.store(t,12,l),t},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.SIMD.scale=function(t,e,n){var r,o,i,a=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,0,0,0,0))),o=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,1,1,1,1))),i=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(t,e,n,o){var i,a,s,l,u,c,f,d,p,h,m,b,g,v,y,x,w,_,k,E,$,M,A,T,S=o[0],C=o[1],F=o[2],I=Math.sqrt(S*S+C*C+F*F);return Math.abs(I)<r.EPSILON?null:(I=1/I,S*=I,C*=I,F*=I,i=Math.sin(n),a=Math.cos(n),s=1-a,l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],p=e[5],h=e[6],m=e[7],b=e[8],g=e[9],v=e[10],y=e[11],x=S*S*s+a,w=C*S*s+F*i,_=F*S*s-C*i,k=S*C*s-F*i,E=C*C*s+a,$=F*C*s+S*i,M=S*F*s+C*i,A=C*F*s-S*i,T=F*F*s+a,t[0]=l*x+d*w+b*_,t[1]=u*x+p*w+g*_,t[2]=c*x+h*w+v*_,t[3]=f*x+m*w+y*_,t[4]=l*k+d*E+b*$,t[5]=u*k+p*E+g*$,t[6]=c*k+h*E+v*$,t[7]=f*k+m*E+y*$,t[8]=l*M+d*A+b*T,t[9]=u*M+p*A+g*T,t[10]=c*M+h*A+v*T,t[11]=f*M+m*A+y*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},o.scalar.rotateX=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+u*r,t[5]=a*o+c*r,t[6]=s*o+f*r,t[7]=l*o+d*r,t[8]=u*o-i*r,t[9]=c*o-a*r,t[10]=f*o-s*r,t[11]=d*o-l*r,t},o.SIMD.rotateX=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),t},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-u*r,t[1]=a*o-c*r,t[2]=s*o-f*r,t[3]=l*o-d*r,t[8]=i*r+u*o,t[9]=a*r+c*o,t[10]=s*r+f*o,t[11]=l*r+d*o,t},o.SIMD.rotateY=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(a,o))),t},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+u*r,t[1]=a*o+c*r,t[2]=s*o+f*r,t[3]=l*o+d*r,t[4]=u*o-i*r,t[5]=c*o-a*r,t[6]=f*o-s*r,t[7]=d*o-l*r,t},o.SIMD.rotateZ=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),t},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,e,n){var o,i,a,s=n[0],l=n[1],u=n[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<r.EPSILON?null:(c=1/c,s*=c,l*=c,u*=c,o=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=s*s*a+i,t[1]=l*s*a+u*o,t[2]=u*s*a-l*o,t[3]=0,t[4]=s*l*a-u*o,t[5]=l*l*a+i,t[6]=u*l*a+s*o,t[7]=0,t[8]=s*u*a+l*o,t[9]=l*u*a-s*o,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=r+r,l=o+o,u=i+i,c=r*s,f=r*l,d=r*u,p=o*l,h=o*u,m=i*u,b=a*s,g=a*l,v=a*u;return t[0]=1-(p+m),t[1]=f+v,t[2]=d-g,t[3]=0,t[4]=f-v,t[5]=1-(c+m),t[6]=h+b,t[7]=0,t[8]=d+g,t[9]=h-b,t[10]=1-(c+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},o.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},o.fromRotationTranslationScale=function(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3],l=o+o,u=i+i,c=a+a,f=o*l,d=o*u,p=o*c,h=i*u,m=i*c,b=a*c,g=s*l,v=s*u,y=s*c,x=r[0],w=r[1],_=r[2];return t[0]=(1-(h+b))*x,t[1]=(d+y)*x,t[2]=(p-v)*x,t[3]=0,t[4]=(d-y)*w,t[5]=(1-(f+b))*w,t[6]=(m+g)*w,t[7]=0,t[8]=(p+v)*_,t[9]=(m-g)*_,t[10]=(1-(f+h))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,e,n,r,o){var i=e[0],a=e[1],s=e[2],l=e[3],u=i+i,c=a+a,f=s+s,d=i*u,p=i*c,h=i*f,m=a*c,b=a*f,g=s*f,v=l*u,y=l*c,x=l*f,w=r[0],_=r[1],k=r[2],E=o[0],$=o[1],M=o[2];return t[0]=(1-(m+g))*w,t[1]=(p+x)*w,t[2]=(h-y)*w,t[3]=0,t[4]=(p-x)*_,t[5]=(1-(d+g))*_,t[6]=(b+v)*_,t[7]=0,t[8]=(h+y)*k,t[9]=(b-v)*k,t[10]=(1-(d+m))*k,t[11]=0,t[12]=n[0]+E-(t[0]*E+t[4]*$+t[8]*M),t[13]=n[1]+$-(t[1]*E+t[5]*$+t[9]*M),t[14]=n[2]+M-(t[2]*E+t[6]*$+t[10]*M),t[15]=1,t},o.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,f=r*s,d=o*a,p=o*s,h=o*l,m=i*a,b=i*s,g=i*l;return t[0]=1-f-h,t[1]=c+g,t[2]=d-b,t[3]=0,t[4]=c-g,t[5]=1-u-h,t[6]=p+m,t[7]=0,t[8]=d+b,t[9]=p-m,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,e,n,r,o,i,a){var s=1/(n-e),l=1/(o-r),u=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*l,t[10]=(a+i)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*u,t[15]=0,t},o.perspective=function(t,e,n,r,o){var i=1/Math.tan(e/2),a=1/(r-o);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*a,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(o+i);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((a-s)*l*.5),t[9]=(o-i)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},o.ortho=function(t,e,n,r,o,i,a){var s=1/(e-n),l=1/(r-o),u=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*l,t[14]=(a+i)*u,t[15]=1,t},o.lookAt=function(t,e,n,i){var a,s,l,u,c,f,d,p,h,m,b=e[0],g=e[1],v=e[2],y=i[0],x=i[1],w=i[2],_=n[0],k=n[1],E=n[2];return Math.abs(b-_)<r.EPSILON&&Math.abs(g-k)<r.EPSILON&&Math.abs(v-E)<r.EPSILON?o.identity(t):(d=b-_,p=g-k,h=v-E,m=1/Math.sqrt(d*d+p*p+h*h),d*=m,p*=m,h*=m,a=x*h-w*p,s=w*d-y*h,l=y*p-x*d,m=Math.sqrt(a*a+s*s+l*l),m?(m=1/m,a*=m,s*=m,l*=m):(a=0,s=0,l=0),u=p*l-h*s,c=h*a-d*l,f=d*s-p*a,m=Math.sqrt(u*u+c*c+f*f),m?(m=1/m,u*=m,c*=m,f*=m):(u=0,c=0,f=0),t[0]=a,t[1]=u,t[2]=d,t[3]=0,t[4]=s,t[5]=c,t[6]=p,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=-(a*b+s*g+l*v),t[13]=-(u*b+c*g+f*v),t[14]=-(d*b+p*g+h*v),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],m=t[12],b=t[13],g=t[14],v=t[15],y=e[0],x=e[1],w=e[2],_=e[3],k=e[4],E=e[5],$=e[6],M=e[7],A=e[8],T=e[9],S=e[10],C=e[11],F=e[12],I=e[13],D=e[14],R=e[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-x)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-k)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(l-E)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(u-$)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs($))&&Math.abs(c-M)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(f-A)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-T)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-S)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(h-C)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(m-F)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(b-I)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(g-D)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(v-R)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))},t.exports=o},function(t,e,n){var r=n(59),o=n(62),i=n(65),a=n(66),s={};s.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=i.create(),e=i.fromValues(1,0,0),n=i.fromValues(0,1,0);return function(r,o,a){var l=i.dot(o,a);return-.999999>l?(i.cross(t,e,o),i.length(t)<1e-6&&i.cross(t,n,o),i.normalize(t,t),s.setAxisAngle(r,t,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.cross(t,o,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+l,s.normalize(r,r))}}(),s.setAxes=function(){var t=o.create();return function(e,n,r,o){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,n){n=.5*n;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},s.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},s.add=a.add,s.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+a*s+o*u-i*l,t[1]=o*c+a*l+i*s-r*u,t[2]=i*c+a*u+r*l-o*s,t[3]=a*c-r*s-o*l-i*u,t},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=o*l+i*s,t[2]=i*l-o*s,t[3]=a*l-r*s,t},s.rotateY=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l-i*s,t[1]=o*l+a*s,t[2]=i*l+r*s,t[3]=a*l-o*s,t},s.rotateZ=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*s,t[1]=o*l-r*s,t[2]=i*l+a*s,t[3]=a*l-i*s,t},s.calculateW=function(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(t,e,n,r){var o,i,a,s,l,u=e[0],c=e[1],f=e[2],d=e[3],p=n[0],h=n[1],m=n[2],b=n[3];return i=u*p+c*h+f*m+d*b,0>i&&(i=-i,p=-p,h=-h,m=-m,b=-b),1-i>1e-6?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,l=Math.sin(r*o)/a):(s=1-r,l=r),t[0]=s*u+l*p,t[1]=s*c+l*h,t[2]=s*f+l*m,t[3]=s*d+l*b,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(n,r,o,i,a,l){return s.slerp(t,r,a,l),s.slerp(e,o,i,l),s.slerp(n,t,e,2*l*(1-l)),n}}(),s.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=i*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=a.exactEquals,s.equals=a.equals,t.exports=s},function(t,e,n){var r=n(59),o={};o.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,n){var o=new r.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},o.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},o.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},o.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],l=n[2];return t[0]=o*l-i*s,t[1]=i*a-r*l,t[2]=r*s-o*a,t},o.lerp=function(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t},o.hermite=function(t,e,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,u=a*(i-1),c=a*(3-2*i);return t[0]=e[0]*s+n[0]*l+r[0]*u+o[0]*c,t[1]=e[1]*s+n[1]*l+r[1]*u+o[1]*c,t[2]=e[2]*s+n[2]*l+r[2]*u+o[2]*c,t},o.bezier=function(t,e,n,r,o,i){var a=1-i,s=a*a,l=i*i,u=s*a,c=3*i*s,f=3*l*a,d=l*i;return t[0]=e[0]*u+n[0]*c+r[0]*f+o[0]*d,t[1]=e[1]*u+n[1]*c+r[1]*f+o[1]*d,t[2]=e[2]*u+n[2]*c+r[2]*f+o[2]*d,t},o.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,i=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=o*e,t},o.transformMat4=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t},o.transformMat3=function(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t},o.transformQuat=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*o,f=u*o+l*r-a*i,d=u*i+a*o-s*r,p=-a*r-s*o-l*i;return t[0]=c*u+p*-a+f*-l-d*-s,t[1]=f*u+p*-s+d*-a-c*-l,t[2]=d*u+p*-l+c*-s-f*-a,t},o.rotateX=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},o.rotateY=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},o.rotateZ=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},o.forEach=function(){var t=o.create();return function(e,n,r,o,i,a){var s,l;for(n||(n=3),r||(r=0),l=o?Math.min(o*n+r,e.length):e.length,s=r;l>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],i(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),o.angle=function(t,e){var n=o.fromValues(t[0],t[1],t[2]),r=o.fromValues(e[0],e[1],e[2]);o.normalize(n,n),o.normalize(r,r);var i=o.dot(n,r);return i>1?0:Math.acos(i)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],a=e[0],s=e[1],l=e[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},t.exports=o},function(t,e,n){var r=n(59),o={};o.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(4);
return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.fromValues=function(t,e,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=o,i},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},o.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+i*i)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},o.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},o.lerp=function(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},o.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),o.normalize(t,t),o.scale(t,t,e),t},o.transformMat4=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t},o.transformQuat=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*o,f=u*o+l*r-a*i,d=u*i+a*o-s*r,p=-a*r-s*o-l*i;return t[0]=c*u+p*-a+f*-l-d*-s,t[1]=f*u+p*-s+d*-a-c*-l,t[2]=d*u+p*-l+c*-s-f*-a,t[3]=e[3],t},o.forEach=function(){var t=o.create();return function(e,n,r,o,i,a){var s,l;for(n||(n=4),r||(r=0),l=o?Math.min(o*n+r,e.length):e.length,s=r;l>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],a=t[3],s=e[0],l=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},t.exports=o},function(t,e,n){var r=n(59),o={};o.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,n){return t[0]=e,t[1]=n,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},o.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},o.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},o.normalize=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},o.lerp=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t},o.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},o.transformMat2=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},o.transformMat2d=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},o.transformMat3=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},o.transformMat4=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},o.forEach=function(){var t=o.create();return function(e,n,r,o,i,a){var s,l;for(n||(n=2),r||(r=0),l=o?Math.min(o*n+r,e.length):e.length,s=r;l>s;s+=n)t[0]=e[s],t[1]=e[s+1],i(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},o.equals=function(t,e){var n=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))},t.exports=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function m(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:m(o,e,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(54),c=r(u),f=n(57),d=r(f),p=n(58),h=function(t){function e(t){o(this,e);var n=i(this,Object.getPrototypeOf(e).call(this,t)),r=n;return r.sceneApi=t,r.currentDistance=0,r.isRendered=!0,r.useLocalLighting=!0,n}return a(e,t),s(e,[{key:"checkFrustumCullingAndSet",value:function(t,e){var n=this.checkFrustumCulling(t,e);this.setIsRendered(this.getIsRendered()&&n)}},{key:"checkFrustumCulling",value:function(t,n){var r=this.aabb&&l(Object.getPrototypeOf(e.prototype),"checkFrustumCulling",this).call(this,t,n,this.aabb);return r}},{key:"checkAgainstDepthBuffer",value:function(t,n,r){this.setIsRendered(this.getIsRendered()&&l(Object.getPrototypeOf(e.prototype),"checkAgainstDepthBuffer",this).call(this,t,n,this.placementMatrix,r))}},{key:"updateAABB",value:function(){var t=l(Object.getPrototypeOf(e.prototype),"getBoundingBox",this).call(this);if(t){var n=p.vec4.fromValues(t.ab.x,t.ab.y,t.ab.z,1),r=p.vec4.fromValues(t.cd.x,t.cd.y,t.cd.z,1),o=d["default"].transformAABBWithMat4(this.placementMatrix,[n,r]);this.diameter=p.vec3.distance(o[0],o[1]),this.aabb=o}}},{key:"update",value:function(t,n){this.getIsRendered()&&l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t,n,this.placementInvertMatrix)}},{key:"drawTransparentMeshes",value:function(){var t=this.useLocalLighting?this.diffuseColor:4294967295;l(Object.getPrototypeOf(e.prototype),"drawTransparentMeshes",this).call(this,this.placementMatrix,t)}},{key:"drawNonTransparentMeshes",value:function(){var t=this.useLocalLighting?this.diffuseColor:4294967295;l(Object.getPrototypeOf(e.prototype),"drawNonTransparentMeshes",this).call(this,this.placementMatrix,t)}},{key:"draw",value:function(){var t=this.useLocalLighting?this.diffuseColor:4294967295;l(Object.getPrototypeOf(e.prototype),"draw",this).call(this,this.placementMatrix,t)}},{key:"drawInstancedNonTransparentMeshes",value:function(t,n){var r=this.useLocalLighting?this.diffuseColor:4294967295;l(Object.getPrototypeOf(e.prototype),"drawInstancedNonTransparentMeshes",this).call(this,t,n,r)}},{key:"drawInstancedTransparentMeshes",value:function(t,n){var r=this.useLocalLighting?this.diffuseColor:4294967295;l(Object.getPrototypeOf(e.prototype),"drawInstancedTransparentMeshes",this).call(this,t,n,r)}},{key:"drawBB",value:function(){var t=this.sceneApi.getGlContext(),n=this.sceneApi.shaders.getShaderUniforms(),r=l(Object.getPrototypeOf(e.prototype),"getBoundingBox",this).call(this);if(r){var o=r.ab,i=r.cd,a=[(o.x+i.x)/2,(o.y+i.y)/2,(o.z+i.z)/2],s=[i.x-a[0],i.y-a[1],i.z-a[2]];t.uniform3fv(n.uBBScale,new Float32Array(s)),t.uniform3fv(n.uBBCenter,new Float32Array(a)),t.uniform3fv(n.uColor,new Float32Array([.819607843,.058,.058])),t.uniformMatrix4fv(n.uPlacementMat,!1,this.placementMatrix),t.drawElements(t.LINES,48,t.UNSIGNED_SHORT,0)}}},{key:"createPlacementMatrix",value:function(t,e){var n=p.mat4.create();p.mat4.identity(n),p.mat4.multiply(n,n,e),p.mat4.translate(n,n,[t.pos.x,t.pos.y,t.pos.z]);var r=p.mat4.create();p.mat4.fromQuat(r,[t.rotation.imag.x,t.rotation.imag.y,t.rotation.imag.z,t.rotation.real]),p.mat4.multiply(n,n,r),p.mat4.scale(n,n,[t.scale,t.scale,t.scale]);var o=p.mat4.create();p.mat4.invert(o,n),this.placementInvertMatrix=o,this.placementMatrix=n}},{key:"calcOwnPosition",value:function(){var t=p.vec4.fromValues(0,0,0,1);p.vec4.transformMat4(t,t,this.placementMatrix),this.position=t}},{key:"calcDistance",value:function(t){function e(t,e){var n=Math.max(t[0][0]-e[0],0,e[0]-t[1][0]),r=Math.max(t[0][1]-e[1],0,e[1]-t[1][1]),o=Math.max(t[0][2]-e[2],0,e[2]-t[1][2]);return Math.sqrt(n*n+r*r+o*o)}this.aabb&&(this.currentDistance=e(this.aabb,t))}},{key:"setUseLocalLighting",value:function(t){this.useLocalLighting=t}},{key:"getCurrentDistance",value:function(){return this.currentDistance}},{key:"getDiameter",value:function(){return this.diameter}},{key:"setIsRendered",value:function(t){this.isRendered=t}},{key:"getIsRendered",value:function(){return this.isRendered}},{key:"load",value:function(t,n,r){var o=this;return o.doodad=t,o.diffuseColor=t.color,o.createPlacementMatrix(t,n),o.calcOwnPosition(),l(Object.getPrototypeOf(e.prototype),"load",this).call(this,t.modelName,0).then(function(){o.updateAABB()},function(){})}}]),e}(c["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(55),s=r(a),l=n(58),u=n(57),c=r(u),f=n(21),d=r(f),p=function(){function t(e){o(this,t);var n=this;n.sceneApi=e,n.wmoGroupArray=[],n.doodadsArray=[],n.drawGroup=[],n.drawDoodads=[]}return i(t,[{key:"getFileNameIdent",value:function(){return this.fileName}},{key:"loadGeom",value:function(t,e){var n=this;return n.sceneApi.resources.loadWmoGeom(e).then(function(e){n.wmoGroupArray[t]=e,e.loadTextures(n.wmoObj.momt)},function(){})}},{key:"checkIfUseLocalLighting",value:function(t){for(var e=null,n=0;n<this.wmoObj.nGroups;n++){var r=this.wmoObj.groupInfos[n],o=r.bb1,i=r.bb2;o.x<=t.x&&t.x<=i.x&&o.y<=t.y&&t.y<=i.y&&o.z<=t.z&&t.z<=i.z&&(e=r)}return!!(e&&(8192&e.flags)>0)}},{key:"createWorldGroupBB",value:function(){for(var t=new Array(this.wmoGroupArray.length),e=new Array(this.wmoGroupArray.length),n=0;n<this.wmoGroupArray.length;n++){var r=this.wmoObj.groupInfos[n],o=r.bb1,i=r.bb2,a=l.vec4.fromValues(o.x,o.y,o.z,1),s=l.vec4.fromValues(i.x,i.y,i.z,1),u=c["default"].transformAABBWithMat4(this.placementMatrix,[a,s]);t[n]=u,e[n]=u.slice(0)}this.worldGroupBorders=t,this.volumeWorldGroupBorders=e}},{key:"updateWorldGroupBBWithM2",value:function(){var t=this.currentDoodadSet;if(t)for(var e=0;e<this.wmoGroupArray.length;e++)if(this.wmoGroupArray[e]){var n=this.wmoGroupArray[e].wmoGroupFile.doodadRefs,r=this.worldGroupBorders[e];if(n)for(var o=0;o<n.length;o++){var i=n[o];if(!(i-t.index<0||i>t.index+t.number-1)){var a=this.doodadsArray[i-t.index];(8&this.wmoObj.groupInfos[e].flags)>0&&a.setUseLocalLighting(!1),a.aabb&&(r[0]=l.vec3.fromValues(Math.min(a.aabb[0][0],r[0][0]),Math.min(a.aabb[0][1],r[0][1]),Math.min(a.aabb[0][2],r[0][2])),r[1]=l.vec3.fromValues(Math.max(a.aabb[1][0],r[1][0]),Math.max(a.aabb[1][1],r[1][1]),Math.max(a.aabb[1][2],r[1][2])))}}}}},{key:"createPlacementMatrix",value:function(t){var e=533.333333333,n=32*e-t.pos.x,r=t.pos.y,o=32*e-t.pos.z,i=l.mat4.create();l.mat4.identity(i),l.mat4.rotateX(i,i,l.glMatrix.toRadian(90)),l.mat4.rotateY(i,i,l.glMatrix.toRadian(90)),l.mat4.translate(i,i,[n,r,o]),l.mat4.rotateY(i,i,l.glMatrix.toRadian(t.rotation.y-270)),l.mat4.rotateZ(i,i,l.glMatrix.toRadian(-t.rotation.x)),l.mat4.rotateX(i,i,l.glMatrix.toRadian(t.rotation.z-90));var a=l.mat4.create();l.mat4.invert(a,i),this.placementInvertMatrix=a,this.placementMatrix=i}},{key:"loadDoodads",value:function(t){var e=this;if(e.wmoObj.modd){e.currentDoodadSet=e.wmoObj.mods[t];var n=e.wmoObj.mods[t],r=e.wmoObj.modd,o=new Array(n.number);this.doodadsArray=new Array(n.number);for(var i=0;i<n.number;i++){var a=r[n.index+i];o[i]=this.loadDoodad(i,a)}return s["default"].all(o).then(function(t){for(var n=0;n<e.doodadsArray.length;n++)e.doodadsArray[n]=t[n]},function(){})}}},{key:"loadDoodad",value:function(t,e){var n=this,r=n.sceneApi.objects.loadWmoM2Obj(e,n.placementMatrix,!1);return r}},{key:"load",value:function(t){var e=s["default"].defer(),n=this,r=t.fileName,o=t.doodadSet;this.fileName=r,n.createPlacementMatrix(t);var i=n.sceneApi.resources.loadWmoMain(r);return i.then(function(t){n.wmoObj=t,n.wmoGroupArray=new Array(t.nGroups),n.createPortalsVBO(),n.createWorldPortalVerticies();for(var i=new Array(t.nGroups),a=r.substr(0,r.lastIndexOf(".")),l=0;l<t.nGroups;l++){for(var u=l.toString();3!=u.length;)u="0"+u;i[l]=n.loadGeom(l,a+"_"+u+".wmo")}var c=n.loadDoodads(o);n.createWorldGroupBB(),s["default"].all(i.concat([c])).then(function(){n.updateWorldGroupBBWithM2()},function(){}),e.resolve(n)},function(){}),e.promise}},{key:"drawBB",value:function(){var t=this.sceneApi.getGlContext(),e=this.sceneApi.shaders.getShaderUniforms(),n=l.mat4.create();l.mat4.identity(n),t.uniformMatrix4fv(e.uPlacementMat,!1,new Float32Array(n));for(var r=0;r<this.wmoGroupArray.length;r++)if(this.wmoGroupArray[r]&&this.wmoGroupArray[r].wmoGroupFile&&(this.drawGroup[r]||void 0===this.drawGroup[r])){var o=this.volumeWorldGroupBorders[r][0],i=this.volumeWorldGroupBorders[r][1],a=[(o[0]+i[0])/2,(o[1]+i[1])/2,(o[2]+i[2])/2],s=[i[0]-a[0],i[1]-a[1],i[2]-a[2]];t.uniform3fv(e.uBBScale,new Float32Array(s)),t.uniform3fv(e.uBBCenter,new Float32Array(a)),t.uniform3fv(e.uColor,new Float32Array([.058,.058,.819607843])),t.drawElements(t.LINES,48,t.UNSIGNED_SHORT,0)}}},{key:"setDoodadGroupDrawing",value:function(t,e){var n=(this.wmoObj.groupInfos[t],this.currentDoodadSet);if(n&&this.wmoGroupArray[t]){var r=this.wmoGroupArray[t].wmoGroupFile.doodadRefs;if(r)for(var o=0;o<r.length;o++){var i=r[o];if(!(i-n.index<0||i>n.index+n.number-1)){var a=this.doodadsArray[i-n.index];a&&a.setIsRendered(e)}}}}},{key:"isInsideInterior",value:function(t){if(!this.wmoGroupArray||0==this.wmoGroupArray.length)return-1;var e=l.vec4.create();l.vec4.transformMat4(e,t,this.placementInvertMatrix);var n=e[0]>this.wmoObj.BoundBoxCorner1.x&&e[0]<this.wmoObj.BoundBoxCorner2.x&&e[1]>this.wmoObj.BoundBoxCorner1.y&&e[1]<this.wmoObj.BoundBoxCorner2.y&&e[2]>this.wmoObj.BoundBoxCorner1.z&&e[2]<this.wmoObj.BoundBoxCorner2.z;if(!n)return-1;for(var r=0,o=0,i=-1,a=0;a<this.wmoGroupArray.length;a++)if(this.wmoGroupArray[a]){var s=this.volumeWorldGroupBorders[a],u=this.wmoObj.groupInfos[a];if(0!=(8192&u.flags)){o++;var c=t[0]>s[0][0]&&t[0]<s[1][0]&&t[1]>s[0][1]&&t[1]<s[1][1]&&t[2]>s[0][2]&&t[2]<s[1][2];if(c){r++,i=a;for(var f=!0,d=this.wmoGroupArray[a].wmoGroupFile.mogp.moprIndex,p=this.wmoGroupArray[a].wmoGroupFile.mogp.numItems,h=d;d+p>h;h++){var m=this.wmoObj.portalRelations[h],b=this.wmoObj.portalInfos[m.portal_index],g=b.plane,v=l.vec4.dot(l.vec4.fromValues(g.x,g.y,g.z,g.w),e),y=m.side<0?0>v:v>0;f=f&&y}if(f){for(var x=0,w=this.wmoGroupArray[a].wmoGroupFile.nodes;x>=0&&0==(4&w[x].planeType);){0==w[x].planeType?x=e[0]<w[x].fDist?w[x].children1:w[x].children2:1==w[x].planeType?x=e[1]<w[x].fDist?w[x].children1:w[x].children2:2==w[x].planeType&&(x=e[2]<w[x].fDist?w[x].children1:w[x].children2)}return this.currentNodeId=x,this.currentGroupId=a,{groupId:a,nodeId:x}}}}}return 1==r&&o>1?i:(this.currentNodeId=-1,this.currentGroupId=-1,{groupId:-1,nodeId:-1})}},{key:"resetDrawnForAllGroups",value:function(t){for(var e=0;e<this.wmoGroupArray.length;e++){var n=this.wmoObj.groupInfos[e];0!=(8192&n.flags)&&t?this.drawGroup[e]=!0:this.drawGroup[e]=t}}},{key:"setIsRenderedForDoodads",value:function(){for(var t=0;t<this.wmoGroupArray.length;t++)this.drawDoodads[t]&&this.setDoodadGroupDrawing(t,this.drawDoodads[t])}},{key:"startTraversingFromInteriorWMO",value:function(t,e,n,r,o,i,a){for(var s=new Array(this.doodadsArray.length),l=0;l<s.length;l++)s[l]=!1;for(var u=new Array(this.wmoGroupArray.length),l=0;l<u.length;l++)u[l]=!1;this.traverseDoodadsVis=s,this.transverseVisitedGroups=u,this.transverseInteriorWMO(t,!0,e,n,r,o);for(var l=0;l<s.length;l++)this.doodadsArray[l].setIsRendered(!!s[l])}},{key:"startTraversingFromExteriorWMO",value:function(t,e,n,r,o){this.transverseExteriorWMO(t,!1,e,n,r,o)}},{key:"transverseInteriorWMO",value:function(t,e,n,r,o,i){this.drawGroup;if(this.transverseVisitedGroups[t]=!0,this.wmoGroupArray[t]){var a=this.wmoGroupArray[t].wmoGroupFile.doodadRefs,s=this.currentDoodadSet;if(a)for(var l=0;l<a.length;l++){var u=a[l];if(!(u-s.index<0||u>s.index+s.number-1)){var f=u-s.index,d=this.doodadsArray[f];if(d.getIsRendered()){var p=d.checkFrustumCulling(n,i),h=this.traverseDoodadsVis[f];this.traverseDoodadsVis[f]=h|p}}}}for(var m=this.wmoGroupArray[t].wmoGroupFile.mogp.moprIndex,b=this.wmoGroupArray[t].wmoGroupFile.mogp.numItems,g=this.worldPortalVerticles,l=m;m+b>l;l++){var v=this.wmoObj.portalRelations[l],y=this.wmoObj.portalInfos[v.portal_index],x=v.groupId,w=y.plane,_=y.base_index;if(!(y.index_count<4||this.transverseVisitedGroups[x])){c["default"].checkPortalFrustum();var k=c["default"].createPlaneFromEyeAndVertexes(n,g[_+0],g[_+1]),E=c["default"].createPlaneFromEyeAndVertexes(n,g[_+1],g[_+2]),$=c["default"].createPlaneFromEyeAndVertexes(n,g[_+2],g[_+3]),M=c["default"].createPlaneFromEyeAndVertexes(n,g[_+3],g[_+0]),A=i.slice(0,8);A[0]=$,A[1]=E,A[2]=M,A[3]=k,A[5]=w,this.wmoObj.groupInfos[x].flags&!0?this.transverseInteriorWMO(x,n,r,o,A):this.transverseExteriorWMO()}}}},{key:"transverseExteriorWMO",value:function(t,e,n,r,o,i){}},{key:"checkFrustumCulling",value:function(t,e,n,r){if(this.worldGroupBorders){for(var o=0;o<this.doodadsArray.length;o++)this.doodadsArray[o]&&this.doodadsArray[o].setIsRendered(!1);for(var o=0;o<this.wmoGroupArray.length;o++)if(this.drawGroup[o]){var i=this.worldGroupBorders[o],a=t[0]>i[0][0]&&t[0]<i[1][0]&&t[1]>i[0][1]&&t[1]<i[1][1]&&t[2]>i[0][2]&&t[2]<i[1][2],s=a||c["default"].checkFrustum(r,i),i=this.volumeWorldGroupBorders[o],a=t[0]>i[0][0]&&t[0]<i[1][0]&&t[1]>i[0][1]&&t[1]<i[1][1]&&t[2]>i[0][2]&&t[2]<i[1][2],l=a||c["default"].checkFrustum(r,i);this.drawGroup[o]=l,this.drawDoodads[o]=s}}}},{key:"update",value:function(){}},{key:"draw",value:function(){var t=this.sceneApi.getGlContext(),e=this.sceneApi.shaders.getShaderUniforms();if(this.wmoObj){this.placementMatrix&&t.uniformMatrix4fv(e.uPlacementMat,!1,this.placementMatrix);var n=[255&this.wmoObj.ambColor,this.wmoObj.ambColor>>8&255,this.wmoObj.ambColor>>16&255,this.wmoObj.ambColor>>24&255];n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255;for(var r=0;r<this.wmoGroupArray.length;r++)if(this.wmoGroupArray[r]){if(!this.drawGroup[r]&&void 0!==this.drawGroup[r])continue;var o=null;d["default"].getRenderBSP()&&(o=this.currentGroupId==r?this.wmoGroupArray[r].wmoGroupFile.nodes[this.currentNodeId]:null),this.wmoGroupArray[r].draw(n,o)}}}},{key:"createPortalsVBO",value:function(){var t=this.sceneApi.getGlContext();if(0!=this.wmoObj.nPortals){this.vertexVBO=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexVBO),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.wmoObj.portalVerticles),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null);for(var e=[],n=0;n<this.wmoObj.portalInfos.length;n++)for(var r=this.wmoObj.portalInfos[n],o=r.base_index,i=0;i<r.index_count-2;i++)e.push(o+0),e.push(o+i+1),e.push(o+i+2);this.indexVBO=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexVBO),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}}},{key:"createWorldPortalVerticies",value:function(){var t=this.wmoObj.portalVerticles;if(t){for(var e=new Array(t.length),n=0;n<e.length/3;n++){var r=l.vec4.fromValues(t[3*n+0],t[3*n+1],t[3*n+2],0);l.vec4.transformMat4(r,r,this.placementMatrix),e[3*n+0]=r[0],e[3*n+1]=r[1],e[3*n+2]=r[2]}this.worldPortalVerticles=e}else var e=new Array(0)}},{key:"drawPortals",value:function(){if(this.wmoObj&&0!=this.wmoObj.nPortals){var t=this.sceneApi.getGlContext(),e=this.sceneApi.shaders.getShaderUniforms(),n=this.sceneApi.shaders.getShaderAttributes();t.bindBuffer(t.ARRAY_BUFFER,this.vertexVBO),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexVBO),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.vertexAttribPointer(n.aPosition,3,t.FLOAT,!1,0,0),this.placementMatrix&&t.uniformMatrix4fv(e.uPlacementMat,!1,this.placementMatrix),t.disable(t.CULL_FACE),t.depthMask(!1);for(var r=0,o=0;o<this.wmoObj.portalInfos.length;o++){var i=this.wmoObj.portalInfos[o];i.isFalse?t.uniform4fv(e.uColor,new Float32Array([.819607843,.058,.058,.3])):t.uniform4fv(e.uColor,new Float32Array([.058,.058,.819607843,.3])),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,2*r),r+=3*(i.index_count-2)}t.depthMask(!0),t.disable(t.BLEND)}}},{key:"drawBspVerticles",value:function(){if(this.wmoObj){var t=this.sceneApi.getGlContext(),e=this.sceneApi.shaders.getShaderUniforms(),n=this.sceneApi.shaders.getShaderAttributes();if(t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.disable(t.BLEND),t.depthMask(!0),t.disable(t.CULL_FACE),t.disable(t.BLEND),this.currentGroupId>=0&&this.wmoGroupArray[this.currentGroupId]){var r=this.wmoGroupArray[this.currentGroupId].wmoGroupFile.nodes[this.currentNodeId];t.bindBuffer(t.ARRAY_BUFFER,this.wmoGroupArray[this.currentGroupId].combinedVBO),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.wmoGroupArray[this.currentGroupId].mobrVBO),t.vertexAttribPointer(n.aPosition,3,t.FLOAT,!1,0,0),t.uniform4fv(e.uColor,new Float32Array([.819607843,.819607843,.058,0])),r&&t.drawElements(t.TRIANGLES,3*r.numFaces,t.UNSIGNED_SHORT,3*r.firstFace*2)}t.depthMask(!0),t.disable(t.BLEND)}}}]),t}();e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=i["default"].defer(),n=(0,s["default"])(t);return n.then(function(n){var r=n.loadChunkAtOffset(0);if("MVER"!==r.chunkIdent)throw"Got bad WDT file "+t;r=n.loadChunkAtOffset(r.nextChunkOffset);for(var o={};""!=r.chunkIdent;){switch(r.chunkIdent){case"MAIN":for(var i={offs:0},a={},s=0;64>s;s++){for(var l={},u=0;64>u;u++)l[u]=r.readInt32(i),i.offs+=4;a[s]=l}o.tileTable=l;break;case"MPHD":var c={offs:0};o.flags=r.readUint8(c),o.isWMOMap=o.flags&!0;break;case"MWMO":var c={offs:0},f=null;r.chunkLen>0&&(f=r.readUint8Array(c,r.chunkLen)),o.mwmo=f;break;case"MODF":var c={offs:0},d={},p=fileReadHelper(o.mwmo.buffer);d.nameId=r.readInt32(c),d.uniqueId=r.readInt32(c),d.pos=r.readVector3f(c),d.rotation=r.readVector3f(c),d.unkVector1=r.readVector3f(c),d.unkVector2=r.readVector3f(c),d.doodadSet=r.readUint16(c),d.nameSet=r.readUint16(c),d.flags=r.readInt32(c);var h=d.nameId;d.fileName=p.readString({offs:h},p.getLength()-h),o.modfChunk=d;break;default:$log.info("Unknown Chunk. Ident = "+r.chunkIdent+", file = "+t)}r=n.loadChunkAtOffset(r.nextChunkOffset)}e.resolve(o)},function(){e.reject()}),e.promise};var o=n(55),i=r(o),a=n(71),s=r(a)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){function n(t){var e=(0,i["default"])(t),n=null,r={getFileSize:function(){return e.getLength()},setSectionReaders:function(t){n=t},processChunkAtOffsWithSize:function(t,e,n){var r=this.loadChunkAtOffset(t,e);this.processChunk(r,n)},processChunkAtOffs:function(t,e){var n=this.loadChunkAtOffset(t);this.processChunk(n,e)},processChunk:function(t,e){var r=n.getHandler(t.chunkIdent);if(r&&0!==t.chunkLen)if("function"==typeof r)r(e,t,this);else for(var o=r[t.chunkIdent](e,t),i=this.loadChunkAtOffset(t.chunkOffset+o.offs);""!=i.chunkIdent;){var a=r.subChunks[i.chunkIdent];a&&a(e,i,this),i=this.loadChunkAtOffset(i.nextChunkOffset)}},processFile:function(t){for(var e=this.loadChunkAtOffset(0);""!=e.chunkIdent;)this.processChunk(e,t,n),e=this.loadChunkAtOffset(e.nextChunkOffset)},loadChunkAtOffset:function(n,r){var o={offs:n},a="",s=0,l=-1;o.offs+8<e.getLength()&&(a=e.reverseStr(e.readString(o,4)),s=e.readInt32(o),void 0!=r&&(s=r),l=o.offs);var u=null;s>0&&(u=(0,i["default"])(t,o.offs,s));var c=Object.create(u,{chunkIdent:{value:a},chunkLen:{value:s},chunkOffset:{value:n},chunkDataOffset:{value:l},nextChunkOffset:{value:n+8+s,writable:!0}});return c}};return r}return e?n(e):(0,s["default"])(t).then(function(t){return n(t)},function(t){return t})};var o=n(72),i=r(o),a=n(73),s=r(a)},function(t,e){"use strict";function n(t){var e,n="";for(e=t.length-1;e>=0;e--)n+=t.charAt(e);return n}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,i){var a;a=e&&i?new DataView(t,e,i):new DataView(t);var s;return s=e&&i?new Uint8Array(t,e,i):new Uint8Array(t),{getArrayBuffer:function(){return t},sliceArrayBuffer:function(e,n){return t.slice(e,n)},getLength:function(){return s.length},readInt8:function(t){var e=a.getInt8(t.offs);return t.offs+=1,e},readInt16:function(t){var e=a.getInt16(t.offs,r);return t.offs+=2,e},readInt32:function(t){var e=a.getInt32(t.offs,r);return t.offs+=4,e},readUint8:function(t){var e=a.getUint8(t.offs);return t.offs+=1,e},readUint16:function(t){var e=a.getUint16(t.offs,r);return t.offs+=2,e},readUint32:function(t){var e=a.getUint32(t.offs,r);return t.offs+=4,e},readFloat32:function(t){try{var e=a.getFloat32(t.offs,r);t.offs+=4}catch(n){}return e},readFloat64:function(t){var e=a.getFloat64(t.offs,r);return t.offs+=8,e},readVector4f:function(t){var e={};return e.x=this.readFloat32(t),e.y=this.readFloat32(t),e.z=this.readFloat32(t),e.w=this.readFloat32(t),e},readVector3f:function(t){var e={};return e.x=this.readFloat32(t),e.y=this.readFloat32(t),e.z=this.readFloat32(t),e},readVector2f:function(t){var e={};return e.x=this.readFloat32(t),e.y=this.readFloat32(t),e},readQuaternion:function(t){var e={};return e.imag=this.readVector3f(t),e.real=this.readFloat32(t),e},readUint8Array:function(t,e){var n=this.sliceArrayBuffer(a.byteOffset+t.offs,a.byteOffset+t.offs+e),r=new Uint8Array(n);return t.offs+=e,r},readInt8Array:function(t,e){for(var n=new Int8Array(e),r=0;e>r;r++)n[r]=this.readInt8(t);return n},readUint16Array:function(t,e){for(var n=[],r=0;e>r;r++)n[r]=this.readUint16(t);return n},readInt16Array:function(t,e){for(var n=[],r=0;e>r;r++)n[r]=this.readInt16(t);return n},readInt32Array:function(t,e){for(var n=[],r=0;e>r;r++)n[r]=this.readInt32(t);return n},readFloat32Array:function(t,e){for(var n=[],r=0;e>r;r++)n[r]=this.readFloat32(t);return n},readString:function(t,e){function n(t,e,n,r){for(var o=n;r>o;o++)if(t[o]==e)return o;return r}var r=t.offs,i=n(s,0,r,r+e),a=o.decode(s.subarray(r,i));return t.offs=i,a},readNZTString:function(t,e){var n=t.offs,r=n+e,i=o.decode(s.subarray(n,r));return t.offs=r,i},reverseStr:function(t){return n(t)}}};var r=!0,o=new TextDecoder("utf-8")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){h||(p.postMessage({opcode:"init",message:{archiveFile:i["default"].getArchiveFile(),fileReadMethod:i["default"].getFileReadMethod(),urlToLoadWoWFile:i["default"].getUrlToLoadWoWFile()}}),h=!0);var e=c["default"].defer();return p.postMessage({opcode:"loadFile",messageId:f,message:t}),d[f]={defer:e,fileName:t},f++,e.promise};var o=n(21),i=r(o),a=n(72),s=(r(a),n(74)),l=r(s),u=n(55),c=r(u),f=0,d={},p=new l["default"];p.onmessage=function(t){var e=t.data.opcode,n=t.data.message,r=t.data.messageId;if("fileLoaded"==e){var o=d[r].defer;d[r].fileName;n&&o.resolve(n.buffer),delete d[r]}};var h=!1},function(t,e,n){t.exports=function(){return n(75)('!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(1),o=r(i),a=n(23),s=r(a);s["default"].setScheduler(function(t){t()}),self.addEventListener("message",function(t){var e=t.data.opcode,n=t.data.message,r=t.data.messageId;if("init"==e){var i={getArchiveFile:function(){return n.archiveFile},getFileReadMethod:function(){return n.fileReadMethod},getUrlToLoadWoWFile:function(){return n.urlToLoadWoWFile}};self.fileLoader=(0,o["default"])(i,s["default"])}else if("loadFile"==e){var a=n;!function(t,e){var n=t.fileLoader(a);n.then(function(n){t.postMessage({opcode:"fileLoaded",messageId:e,message:n})},function(){})}(self,r)}},!1)},function(t,n,r){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){function e(e){r.size=t.byteLength,e()}function n(e,n,r,i){var o=t.slice(e,e+n),a=new Uint8Array(o);r(a)}var r=this;r.size=0,r.init=e,r.readUint8Array=n}function a(t,e){var n=new t.constructor(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function s(t){function e(t){i=new Uint8Array(0),t()}function n(t,e){i=a(i,t),e()}function r(t){t(i)}var i,o=this;o.init=e,o.writeUint8Array=n,o.getData=r}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(n,r){function i(){var e=r.pending();f.push(e);var i=n.getArchiveFile();return f.length<=1&&t.zip.createReader(new o(i),function(t){t.getEntries(function(t){for(var e={},n=0;n<t.length;n++){var r=t[n].filename.trim().replace(/\\\\/g,"/").toLowerCase(),i=t[n];e[r]=i}for(var o=f.length,n=0;o>n;n++)f[n].resolve(e);f=[]})},function(t){for(var e=f.length,n=0;e>n;n++)f[n].reject(t);f=[]}),e.promise}function a(t){var e=r.defer();t=t.replace(/\\u0000/g,""),t=t.toLowerCase(),t=t.replace(/\\\\/g,"/").toLowerCase();var n=null;return n=l[t],n?n.getData(new s,function(t){e.resolve(t)}):e.reject(null),e.promise}function c(t){if(t[t.length-1]==String.fromCharCode(0)&&(t=t.substr(0,t.length-1)),t&&(t=t.toLowerCase()),"http"==n.getFileReadMethod()){var r=n.getUrlToLoadWoWFile()+t;return u["default"].get(r,{responseType:"arraybuffer"}).then(function(t){return new Uint8Array(t.data)},function(t){console.log("axios error"+e)})}return"zip"==n.getFileReadMethod()?(t&&(t=t.replace(/\\\\/g,"/")),l?a(t).then(function(t){return t},function(t){return t}):i().then(function(e){return l=e,a(t)},function(t,e,n){}).then(function(t){return t},function(t){return t})):void 0}var l,f=[];return c},r(2),r(3),r(4);var c=r(5),u=i(c);t.zip.useWebWorkers=!1,o.prototype=new t.zip.Reader,o.prototype.constructor=o,s.prototype=new t.zip.Writer,s.prototype.constructor=s}).call(n,function(){return this}())},function(t,e){(function(t){(function(){!function(t){"use strict";function e(){this.crc=-1}function n(){}function r(t,e,n){if(0>e||0>n||e+n>t.size)throw new RangeError("offset:"+e+", length:"+n+", size:"+t.size);return t.slice?t.slice(e,e+n):t.webkitSlice?t.webkitSlice(e,e+n):t.mozSlice?t.mozSlice(e,e+n):t.msSlice?t.msSlice(e,e+n):void 0}function i(t,e){var n,r;return n=new ArrayBuffer(t),r=new Uint8Array(n),e&&r.set(e,0),{buffer:n,array:r,view:new DataView(n)}}function o(){}function a(t){function e(e,n){var o=new Blob([t],{type:B});r=new c(o),r.init(function(){i.size=r.size,e()},n)}function n(t,e,n,i){r.readUint8Array(t,e,n,i)}var r,i=this;i.size=0,i.init=e,i.readUint8Array=n}function s(e){function n(t){for(var n=e.length;"="==e.charAt(n-1);)n--;o=e.indexOf(",")+1,a.size=Math.floor(.75*(n-o)),t()}function r(n,r,a){var s,c=i(r),u=4*Math.floor(n/3),l=4*Math.ceil((n+r)/3),f=t.atob(e.substring(u+o,l+o)),p=n-3*Math.floor(u/4);for(s=p;p+r>s;s++)c.array[s-p]=f.charCodeAt(s);a(c.array)}var o,a=this;a.size=0,a.init=n,a.readUint8Array=r}function c(t){function e(e){i.size=t.size,e()}function n(e,n,i,o){var a=new FileReader;a.onload=function(t){i(new Uint8Array(t.target.result))},a.onerror=o;try{a.readAsArrayBuffer(r(t,e,n))}catch(s){o(s)}}var i=this;i.size=0,i.init=e,i.readUint8Array=n}function u(){}function l(t){function e(t){i=new Blob([],{type:B}),t()}function n(t,e){i=new Blob([i,R?t:t.buffer],{type:B}),e()}function r(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=n,r.readAsText(i,t)}var i,o=this;o.init=e,o.writeUint8Array=n,o.getData=r}function f(e){function n(t){a+="data:"+(e||"")+";base64,",t()}function r(e,n){var r,i=s.length,o=s;for(s="",r=0;r<3*Math.floor((i+e.length)/3)-i;r++)o+=String.fromCharCode(e[r]);for(;r<e.length;r++)s+=String.fromCharCode(e[r]);o.length>2?a+=t.btoa(o):s=o,n()}function i(e){e(a+t.btoa(s))}var o=this,a="",s="";o.init=n,o.writeUint8Array=r,o.getData=i}function p(t){function e(e){i=new Blob([],{type:t}),e()}function n(e,n){i=new Blob([i,R?e:e.buffer],{type:t}),n()}function r(t){t(i)}var i,o=this;o.init=e,o.writeUint8Array=n,o.getData=r}function h(t,e,n,r,i,o,a,s,c,u){function l(){t.removeEventListener("message",f,!1),s(d,_)}function f(e){var n=e.data,i=n.data,s=n.error;if(s)return s.toString=function(){return"Error: "+this.message},void c(s);if(n.sn===y)switch("number"==typeof n.codecTime&&(t.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(t.crcTime+=n.crcTime),n.type){case"append":i?(d+=i.length,r.writeUint8Array(i,function(){p()},u)):p();break;case"flush":_=n.crc,i?(d+=i.length,r.writeUint8Array(i,function(){l()},u)):l();break;case"progress":a&&a(h+n.loaded,o);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function p(){h=v*V,o>=h?n.readUint8Array(i+h,Math.min(V,o-h),function(n){a&&a(h,o);var r=0===h?e:{sn:y};r.type="append",r.data=n;try{t.postMessage(r,[n.buffer])}catch(i){t.postMessage(r)}v++},c):t.postMessage({sn:y,type:"flush"})}var h,d,_,v=0,y=e.sn;d=0,t.addEventListener("message",f,!1),p()}function d(t,n,r,i,o,a,s,c,u,l){function f(){var e;if(p=h*V,o>p)n.readUint8Array(i+p,Math.min(V,o-p),function(e){var n;try{n=t.append(e,function(t){s&&s(p+t,o)})}catch(i){return void u(i)}n?(d+=n.length,r.writeUint8Array(n,function(){h++,setTimeout(f,1)},l),v&&y.append(n)):(h++,setTimeout(f,1)),_&&y.append(e),s&&s(p,o)},u);else{try{e=t.flush()}catch(a){return void u(a)}e?(v&&y.append(e),d+=e.length,r.writeUint8Array(e,function(){c(d,y.get())},l)):c(d,y.get())}}var p,h=0,d=0,_="input"===a,v="output"===a,y=new e;f()}function _(e,n,r,i,o,a,s,c,u,l,f){var p=s?"output":"none";if(t.zip.useWebWorkers){var _={sn:n,codecClass:"Inflater",crcType:p};h(e,_,r,i,o,a,u,c,l,f)}else d(new t.zip.Inflater,r,i,o,a,p,u,c,l,f)}function v(e,n,r,i,o,a,s,c,u){var l="input";if(t.zip.useWebWorkers){var f={sn:n,options:{level:o},codecClass:"Deflater",crcType:l};h(e,f,r,i,0,r.size,s,a,c,u)}else d(new t.zip.Deflater,r,i,0,r.size,l,s,a,c,u)}function y(e,r,i,o,a,s,c,u,l,f,p){var _="input";if(t.zip.useWebWorkers&&c){var v={sn:r,codecClass:"NOOP",crcType:_};h(e,v,i,o,a,s,l,u,f,p)}else d(new n,i,o,a,s,_,l,u,f,p)}function m(t){var e,n,r="",i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","_","_","","","","","","","","","+","+","","","+","+","-","-","+","-","+","","","+","+","-","-","","-","+","","","","","","","i","","","","+","+","_","_","","","_","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","_"," "];for(e=0;e<t.length;e++)n=255&t.charCodeAt(e),r+=n>127?i[n-128]:String.fromCharCode(n);return r}function g(t){return decodeURIComponent(escape(t))}function b(t){var e,n="";for(e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n}function w(t){var e=(4294901760&t)>>16,n=65535&t;try{return new Date(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(r){}}function x(t,e,n,r,i){return t.version=e.view.getUint16(n,!0),t.bitFlag=e.view.getUint16(n+2,!0),t.compressionMethod=e.view.getUint16(n+4,!0),t.lastModDateRaw=e.view.getUint32(n+6,!0),t.lastModDate=w(t.lastModDateRaw),1===(1&t.bitFlag)?void i(P):((r||8!=(8&t.bitFlag))&&(t.crc32=e.view.getUint32(n+10,!0),t.compressedSize=e.view.getUint32(n+14,!0),t.uncompressedSize=e.view.getUint32(n+18,!0)),4294967295===t.compressedSize||4294967295===t.uncompressedSize?void i(U):(t.filenameLength=e.view.getUint16(n+22,!0),void(t.extraFieldLength=e.view.getUint16(n+24,!0))))}function k(e,n,r){function o(){}function a(t){function n(n,o){e.readUint8Array(e.size-n,n,function(e){for(var n=e.length-i;n>=0;n--)if(80===e[n]&&75===e[n+1]&&5===e[n+2]&&6===e[n+3])return void t(new DataView(e.buffer,n,i));o()},function(){r(D)})}var i=22;if(e.size<i)return void r(S);var o=65536,a=i+o;n(i,function(){n(Math.min(a,e.size),function(){r(S)})})}var s=0;o.prototype.getData=function(t,n,o,a){function c(t){var e=i(4);return e.view.setUint32(0,t),p.crc32==e.view.getUint32(0)}function u(e,i){a&&!c(i)?r(O):t.getData(function(t){n(t)})}function l(t){r(t||z)}function f(t){r(t||I)}var p=this;e.readUint8Array(p.offset,30,function(n){var c,h=i(n.length,n);return 1347093252!=h.view.getUint32(0)?void r(S):(x(p,h,4,!1,r),c=p.offset+30+p.filenameLength+p.extraFieldLength,void t.init(function(){0===p.compressionMethod?y(p._worker,s++,e,t,c,p.compressedSize,a,u,o,l,f):_(p._worker,s++,e,t,c,p.compressedSize,a,u,o,l,f)},f))},l)};var c={getEntries:function(t){var n=this._worker;a(function(a){var s,c;return s=a.getUint32(16,!0),c=a.getUint16(8,!0),0>s||s>=e.size?void r(S):void e.readUint8Array(s,e.size-s,function(e){var a,s,u,l,f=0,p=[],h=i(e.length,e);for(a=0;c>a;a++){if(s=new o,s._worker=n,1347092738!=h.view.getUint32(f))return void r(S);x(s,h,f+6,!0,r),s.commentLength=h.view.getUint16(f+32,!0),s.directory=16==(16&h.view.getUint8(f+38)),s.offset=h.view.getUint32(f+42,!0),u=b(h.array.subarray(f+46,f+46+s.filenameLength)),s.filename=2048===(2048&s.bitFlag)?g(u):m(u),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),l=b(h.array.subarray(f+46+s.filenameLength+s.extraFieldLength,f+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048===(2048&s.bitFlag)?g(l):m(l),p.push(s),f+=46+s.filenameLength+s.extraFieldLength+s.commentLength}t(p)},function(){r(D)})})},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null),t&&t()},_worker:null};t.zip.useWebWorkers?T("inflater",function(t){c._worker=t,n(c)},function(t){r(t)}):n(c)}function C(t){return unescape(encodeURIComponent(t))}function j(t){var e,n=[];for(e=0;e<t.length;e++)n.push(t.charCodeAt(e));return n}function E(e,n,r,o){function a(t){r(t||L)}function s(t){r(t||z)}var c={},u=[],l=0,f=0,p={add:function(t,n,p,h,d){function _(n){var r;x=d.lastModDate||new Date,b=i(26),c[t]={headerArray:b.array,directory:d.directory,filename:w,offset:l,comment:j(C(d.comment||""))},b.view.setUint32(0,335546376),d.version&&b.view.setUint8(0,d.version),o||0===d.level||d.directory||b.view.setUint16(4,2048),b.view.setUint16(6,(x.getHours()<<6|x.getMinutes())<<5|x.getSeconds()/2,!0),b.view.setUint16(8,(x.getFullYear()-1980<<4|x.getMonth()+1)<<5|x.getDate(),!0),b.view.setUint16(22,w.length,!0),r=i(30+w.length),r.view.setUint32(0,1347093252),r.array.set(b.array,4),r.array.set(w,30),l+=r.array.length,e.writeUint8Array(r.array,n,a)}function m(t,r){var o=i(16);l+=t||0,o.view.setUint32(0,1347094280),"undefined"!=typeof r&&(b.view.setUint32(10,r,!0),o.view.setUint32(4,r,!0)),n&&(o.view.setUint32(8,t,!0),b.view.setUint32(14,t,!0),o.view.setUint32(12,n.size,!0),b.view.setUint32(18,n.size,!0)),e.writeUint8Array(o.array,function(){l+=16,p()},a)}function g(){return d=d||{},t=t.trim(),d.directory&&"/"!=t.charAt(t.length-1)&&(t+="/"),c.hasOwnProperty(t)?void r(M):(w=j(C(t)),u.push(t),void _(function(){n?o||0===d.level?y(k,f++,n,e,0,n.size,!0,m,h,s,a):v(k,f++,n,e,d.level,m,h,s,a):m()},a))}var b,w,x,k=this._worker;n?n.init(g,s):g()},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null);var n,r,o,s=0,f=0;for(r=0;r<u.length;r++)o=c[u[r]],s+=46+o.filename.length+o.comment.length;for(n=i(s+22),r=0;r<u.length;r++)o=c[u[r]],n.view.setUint32(f,1347092738),n.view.setUint16(f+4,5120),n.array.set(o.headerArray,f+6),n.view.setUint16(f+32,o.comment.length,!0),o.directory&&n.view.setUint8(f+38,16),n.view.setUint32(f+42,o.offset,!0),n.array.set(o.filename,f+46),n.array.set(o.comment,f+46+o.filename.length),f+=46+o.filename.length+o.comment.length;n.view.setUint32(f,1347093766),n.view.setUint16(f+8,u.length,!0),n.view.setUint16(f+10,u.length,!0),n.view.setUint32(f+12,s,!0),n.view.setUint32(f+16,l,!0),e.writeUint8Array(n.array,function(){e.getData(t)},a)},_worker:null};t.zip.useWebWorkers?T("deflater",function(t){p._worker=t,n(p)},function(t){r(t)}):n(p)}function F(t){var e=document.createElement("a");return t.map(function(t){return e.href=t,e.href})}function T(e,n,r){function i(t){var e=t.data;return e.error?(s.terminate(),void r(e.error)):void("importScripts"===e.type&&(s.removeEventListener("message",i),s.removeEventListener("error",o),n(s)))}function o(t){s.terminate(),r(t)}if(null!==t.zip.workerScripts&&null!==t.zip.workerScriptsPath)return void r(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));var a;if(t.zip.workerScripts){if(a=t.zip.workerScripts[e],!Array.isArray(a))return void r(new Error("zip.workerScripts."+e+" is not an array!"));a=F(a)}else a=H[e].slice(0),a[0]=(t.zip.workerScriptsPath||"")+a[0];var s=new Worker(a[0]);s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:a.slice(1)}),s.addEventListener("message",i),s.addEventListener("error",o)}function A(t){console.error(t)}var R,S="File format is not recognized.",O="CRC failed.",P="File contains encrypted entry.",U="File is using Zip64 (4gb+ file size).",D="Error while reading zip file.",L="Error while writing zip file.",I="Error while writing file data.",z="Error while reading file data.",M="File already exists.",V=524288,B="text/plain";try{R=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(N){}e.prototype.append=function(t){for(var e=0|this.crc,n=this.table,r=0,i=0|t.length;i>r;r++)e=e>>>8^n[255&(e^t[r])];this.crc=e},e.prototype.get=function(){return~this.crc},e.prototype.table=function(){var t,e,n,r=[];for(t=0;256>t;t++){for(n=t,e=0;8>e;e++)1&n?n=n>>>1^3988292384:n>>>=1;r[t]=n}return r}(),n.prototype.append=function(t,e){return t},n.prototype.flush=function(){},a.prototype=new o,a.prototype.constructor=a,s.prototype=new o,s.prototype.constructor=s,c.prototype=new o,c.prototype.constructor=c,u.prototype.getData=function(t){t(this.data)},l.prototype=new u,l.prototype.constructor=l,f.prototype=new u,f.prototype.constructor=f,p.prototype=new u,p.prototype.constructor=p;var H={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};t.zip={Reader:o,Writer:u,BlobReader:c,Data64URIReader:s,TextReader:a,BlobWriter:p,Data64URIWriter:f,TextWriter:l,createReader:function(t,e,n){n=n||A,t.init(function(){k(t,e,n)},n)},createWriter:function(t,e,n,r){n=n||A,r=!!r,t.init(function(){E(t,e,n,r)},n)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}(this)}).call(t)}).call(e,function(){return this}())},function(t,e){(function(t){(function(){!function(t){"use strict";function e(){function t(t,e,n,r,u,l,f,h,_,y,m){var g,b,w,x,k,C,j,E,T,A,R,S,O,P,U;A=0,k=n;do i[t[e+A]]++,A++,k--;while(0!==k);if(i[0]==n)return f[0]=-1,h[0]=0,c;for(E=h[0],C=1;F>=C&&0===i[C];C++);for(j=C,C>E&&(E=C),k=F;0!==k&&0===i[k];k--);for(w=k,E>k&&(E=k),h[0]=E,P=1<<C;k>C;C++,P<<=1)if((P-=i[C])<0)return p;if((P-=i[k])<0)return p;for(i[k]+=P,s[1]=C=0,A=1,O=2;0!==--k;)s[O]=C+=i[A],O++,A++;k=0,A=0;do 0!==(C=t[e+A])&&(m[s[C]++]=k),A++;while(++k<n);for(n=s[w],s[0]=k=0,A=0,x=-1,S=-E,a[0]=0,R=0,U=0;w>=j;j++)for(g=i[j];0!==g--;){for(;j>S+E;){if(x++,S+=E,U=w-S,U=U>E?E:U,(b=1<<(C=j-S))>g+1&&(b-=g+1,O=j,U>C))for(;++C<U&&!((b<<=1)<=i[++O]);)b-=i[O];if(U=1<<C,y[0]+U>v)return p;a[x]=R=y[0],y[0]+=U,0!==x?(s[x]=k,o[0]=C,o[1]=E,C=k>>>S-E,o[2]=R-a[x-1]-C,_.set(o,3*(a[x-1]+C))):f[0]=R}for(o[1]=j-S,A>=n?o[0]=192:m[A]<r?(o[0]=m[A]<256?0:96,o[2]=m[A++]):(o[0]=l[m[A]-r]+16+64,o[2]=u[m[A++]-r]),b=1<<j-S,C=k>>>S;U>C;C+=b)_.set(o,3*(R+C));for(C=1<<j-1;0!==(k&C);C>>>=1)k^=C;for(k^=C,T=(1<<S)-1;(k&T)!=s[x];)x--,S-=E,T=(1<<S)-1}return 0!==P&&1!=w?d:c}function e(t){var e;for(n||(n=[],r=[],i=new Int32Array(F+1),o=[],a=new Int32Array(F),s=new Int32Array(F+1)),r.length<t&&(r=[]),e=0;t>e;e++)r[e]=0;for(e=0;F+1>e;e++)i[e]=0;for(e=0;3>e;e++)o[e]=0;a.set(i.subarray(0,F),0),s.set(i.subarray(0,F+1),0)}var n,r,i,o,a,s,u=this;u.inflate_trees_bits=function(i,o,a,s,c){var u;return e(19),n[0]=0,u=t(i,0,19,19,null,null,a,o,s,n,r),u==p?c.msg="oversubscribed dynamic bit lengths tree":u!=d&&0!==o[0]||(c.msg="incomplete dynamic bit lengths tree",u=p),u},u.inflate_trees_dynamic=function(i,o,a,s,u,l,f,_,v){var y;return e(288),n[0]=0,y=t(a,0,i,257,k,C,l,s,_,n,r),y!=c||0===s[0]?(y==p?v.msg="oversubscribed literal/length tree":y!=h&&(v.msg="incomplete literal/length tree",y=p),y):(e(288),y=t(a,i,o,0,j,E,f,u,_,n,r),y!=c||0===u[0]&&i>257?(y==p?v.msg="oversubscribed distance tree":y==d?(v.msg="incomplete distance tree",y=p):y!=h&&(v.msg="empty distance tree with lengths",y=p),y):c)}}function n(){function t(t,e,n,r,i,o,a,s){var l,f,h,d,v,y,m,g,b,w,x,k,C,j,E,F;m=s.next_in_index,g=s.avail_in,v=a.bitb,y=a.bitk,b=a.write,w=b<a.read?a.read-b-1:a.end-b,x=_[t],k=_[e];do{for(;20>y;)g--,v|=(255&s.read_byte(m++))<<y,y+=8;if(l=v&x,f=n,h=r,F=3*(h+l),0!==(d=f[F]))for(;;){if(v>>=f[F+1],y-=f[F+1],0!==(16&d)){for(d&=15,C=f[F+2]+(v&_[d]),v>>=d,y-=d;15>y;)g--,v|=(255&s.read_byte(m++))<<y,y+=8;for(l=v&k,f=i,h=o,F=3*(h+l),d=f[F];;){if(v>>=f[F+1],y-=f[F+1],0!==(16&d)){for(d&=15;d>y;)g--,v|=(255&s.read_byte(m++))<<y,y+=8;if(j=f[F+2]+(v&_[d]),v>>=d,y-=d,w-=C,b>=j)E=b-j,b-E>0&&2>b-E?(a.window[b++]=a.window[E++],a.window[b++]=a.window[E++],C-=2):(a.window.set(a.window.subarray(E,E+2),b),b+=2,E+=2,C-=2);else{E=b-j;do E+=a.end;while(0>E);if(d=a.end-E,C>d){if(C-=d,b-E>0&&d>b-E){do a.window[b++]=a.window[E++];while(0!==--d)}else a.window.set(a.window.subarray(E,E+d),b),b+=d,E+=d,d=0;E=0}}if(b-E>0&&C>b-E){do a.window[b++]=a.window[E++];while(0!==--C)}else a.window.set(a.window.subarray(E,E+C),b),b+=C,E+=C,C=0;break}if(0!==(64&d))return s.msg="invalid distance code",C=s.avail_in-g,C=C>y>>3?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,p;l+=f[F+2],l+=v&_[d],F=3*(h+l),d=f[F]}break}if(0!==(64&d))return 0!==(32&d)?(C=s.avail_in-g,C=C>y>>3?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,u):(s.msg="invalid literal/length code",C=s.avail_in-g,C=C>y>>3?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,p);if(l+=f[F+2],l+=v&_[d],F=3*(h+l),0===(d=f[F])){v>>=f[F+1],y-=f[F+1],a.window[b++]=f[F+2],w--;break}}else v>>=f[F+1],y-=f[F+1],a.window[b++]=f[F+2],w--}while(w>=258&&g>=10);return C=s.avail_in-g,C=C>y>>3?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,c}var e,n,r,i,o=this,a=0,s=0,l=0,h=0,d=0,v=0,y=0,m=0,g=0,b=0;o.init=function(t,o,a,s,c,u){e=T,y=t,m=o,r=a,g=s,i=c,b=u,n=null},o.proc=function(o,w,x){var k,C,j,E,F,z,M,V=0,B=0,N=0;for(N=w.next_in_index,E=w.avail_in,V=o.bitb,B=o.bitk,F=o.write,z=F<o.read?o.read-F-1:o.end-F;;)switch(e){case T:if(z>=258&&E>=10&&(o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,x=t(y,m,r,g,i,b,o,w),N=w.next_in_index,E=w.avail_in,V=o.bitb,B=o.bitk,F=o.write,z=F<o.read?o.read-F-1:o.end-F,x!=c)){e=x==u?D:I;break}l=y,n=r,s=g,e=A;case A:for(k=l;k>B;){if(0===E)return o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,E--,V|=(255&w.read_byte(N++))<<B,B+=8}if(C=3*(s+(V&_[k])),V>>>=n[C+1],B-=n[C+1],j=n[C],0===j){h=n[C+2],e=U;break}if(0!==(16&j)){d=15&j,a=n[C+2],e=R;break}if(0===(64&j)){l=j,s=C/3+n[C+2];break}if(0!==(32&j)){e=D;break}return e=I,w.msg="invalid literal/length code",x=p,o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);case R:for(k=d;k>B;){if(0===E)return o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,E--,V|=(255&w.read_byte(N++))<<B,B+=8}a+=V&_[k],V>>=k,B-=k,l=m,n=i,s=b,e=S;case S:for(k=l;k>B;){if(0===E)return o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,E--,V|=(255&w.read_byte(N++))<<B,B+=8}if(C=3*(s+(V&_[k])),V>>=n[C+1],B-=n[C+1],j=n[C],0!==(16&j)){d=15&j,v=n[C+2],e=O;break}if(0===(64&j)){l=j,s=C/3+n[C+2];break}return e=I,w.msg="invalid distance code",x=p,o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);case O:for(k=d;k>B;){if(0===E)return o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,E--,V|=(255&w.read_byte(N++))<<B,B+=8}v+=V&_[k],V>>=k,B-=k,e=P;case P:for(M=F-v;0>M;)M+=o.end;for(;0!==a;){if(0===z&&(F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z&&(o.write=F,x=o.inflate_flush(w,x),F=o.write,z=F<o.read?o.read-F-1:o.end-F,F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z)))return o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);o.window[F++]=o.window[M++],z--,M==o.end&&(M=0),a--}e=T;break;case U:if(0===z&&(F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z&&(o.write=F,x=o.inflate_flush(w,x),F=o.write,z=F<o.read?o.read-F-1:o.end-F,F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z)))return o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,o.window[F++]=h,z--,e=T;break;case D:if(B>7&&(B-=8,E++,N--),o.write=F,x=o.inflate_flush(w,x),F=o.write,z=F<o.read?o.read-F-1:o.end-F,o.read!=o.write)return o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);e=L;case L:return x=u,o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);case I:return x=p,o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);default:return x=f,o.bitb=V,o.bitk=B,w.avail_in=E,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x)}},o.free=function(){}}function r(t,r){var i,o=this,a=M,s=0,l=0,h=0,y=[0],m=[0],g=new n,b=0,w=new Int32Array(3*v),x=0,k=new e;o.bitk=0,o.bitb=0,o.window=new Uint8Array(r),o.end=r,o.read=0,o.write=0,o.reset=function(t,e){e&&(e[0]=x),a==W&&g.free(t),a=M,o.bitk=0,o.bitb=0,o.read=o.write=0},o.reset(t,null),o.inflate_flush=function(t,e){var n,r,i;return r=t.next_out_index,i=o.read,n=(i<=o.write?o.write:o.end)-i,n>t.avail_out&&(n=t.avail_out),0!==n&&e==d&&(e=c),t.avail_out-=n,t.total_out+=n,t.next_out.set(o.window.subarray(i,i+n),r),r+=n,i+=n,i==o.end&&(i=0,o.write==o.end&&(o.write=0),n=o.write-i,n>t.avail_out&&(n=t.avail_out),0!==n&&e==d&&(e=c),t.avail_out-=n,t.total_out+=n,t.next_out.set(o.window.subarray(i,i+n),r),r+=n,i+=n),t.next_out_index=r,o.read=i,e},o.proc=function(t,n){var r,d,v,x,C,j,E,F;for(x=t.next_in_index,C=t.avail_in,d=o.bitb,v=o.bitk,j=o.write,E=j<o.read?o.read-j-1:o.end-j;;)switch(a){case M:for(;3>v;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}switch(r=7&d,b=1&r,r>>>1){case 0:d>>>=3,v-=3,r=7&v,d>>>=r,v-=r,a=V;break;case 1:var T=[],A=[],R=[[]],S=[[]];e.inflate_trees_fixed(T,A,R,S),g.init(T[0],A[0],R[0],0,S[0],0),d>>>=3,v-=3,a=W;break;case 2:d>>>=3,v-=3,a=N;break;case 3:return d>>>=3,v-=3,a=X,t.msg="invalid block type",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n)}break;case V:for(;32>v;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if((~d>>>16&65535)!=(65535&d))return a=X,t.msg="invalid stored block lengths",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);s=65535&d,d=v=0,a=0!==s?B:0!==b?$:M;break;case B:if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);if(0===E&&(j==o.end&&0!==o.read&&(j=0,E=j<o.read?o.read-j-1:o.end-j),0===E&&(o.write=j,n=o.inflate_flush(t,n),j=o.write,E=j<o.read?o.read-j-1:o.end-j,j==o.end&&0!==o.read&&(j=0,E=j<o.read?o.read-j-1:o.end-j),0===E)))return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);if(n=c,r=s,r>C&&(r=C),r>E&&(r=E),o.window.set(t.read_buf(x,r),j),x+=r,C-=r,j+=r,E-=r,0!==(s-=r))break;a=0!==b?$:M;break;case N:for(;14>v;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if(l=r=16383&d,(31&r)>29||(r>>5&31)>29)return a=X,t.msg="too many length or distance symbols",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);if(r=258+(31&r)+(r>>5&31),!i||i.length<r)i=[];else for(F=0;r>F;F++)i[F]=0;d>>>=14,v-=14,h=0,a=H;case H:for(;4+(l>>>10)>h;){for(;3>v;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}i[z[h++]]=7&d,d>>>=3,v-=3}for(;19>h;)i[z[h++]]=0;if(y[0]=7,r=k.inflate_trees_bits(i,y,m,w,t),r!=c)return n=r,n==p&&(i=null,a=X),o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);h=0,a=q;case q:for(;;){if(r=l,h>=258+(31&r)+(r>>5&31))break;var O,P;for(r=y[0];r>v;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if(r=w[3*(m[0]+(d&_[r]))+1],P=w[3*(m[0]+(d&_[r]))+2],16>P)d>>>=r,v-=r,i[h++]=P;else{for(F=18==P?7:P-14,O=18==P?11:3;r+F>v;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if(d>>>=r,v-=r,O+=d&_[F],d>>>=F,v-=F,F=h,r=l,F+O>258+(31&r)+(r>>5&31)||16==P&&1>F)return i=null,a=X,t.msg="invalid bit length repeat",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);P=16==P?i[F-1]:0;do i[F++]=P;while(0!==--O);h=F}}m[0]=-1;var U=[],D=[],L=[],I=[];if(U[0]=9,D[0]=6,r=l,r=k.inflate_trees_dynamic(257+(31&r),1+(r>>5&31),i,U,D,L,I,w,t),r!=c)return r==p&&(i=null,a=X),n=r,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);g.init(U[0],D[0],w,L[0],w,I[0]),a=W;case W:if(o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,(n=g.proc(o,t,n))!=u)return o.inflate_flush(t,n);if(n=c,g.free(t),x=t.next_in_index,C=t.avail_in,d=o.bitb,v=o.bitk,j=o.write,E=j<o.read?o.read-j-1:o.end-j,0===b){a=M;break}a=$;case $:if(o.write=j,n=o.inflate_flush(t,n),j=o.write,E=j<o.read?o.read-j-1:o.end-j,o.read!=o.write)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);a=Q;case Q:return n=u,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);case X:return n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n);default:return n=f,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=j,o.inflate_flush(t,n)}},o.free=function(t){o.reset(t,null),o.window=null,w=null},o.set_dictionary=function(t,e,n){o.window.set(t.subarray(e,e+n),0),o.read=o.write=n},o.sync_point=function(){return a==V?1:0}}function i(){function t(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=it,t.istate.blocks.reset(t,null),c):f}var e=this;e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,c},e.inflateInit=function(n,i){return n.msg=null,e.blocks=null,8>i||i>15?(e.inflateEnd(n),f):(e.wbits=i,n.istate.blocks=new r(n,1<<i),t(n),c)},e.inflate=function(t,e){var n,r;if(!t||!t.istate||!t.next_in)return f;for(e=e==m?d:c,n=d;;)switch(t.istate.mode){case J:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,(15&(t.istate.method=t.read_byte(t.next_in_index++)))!=K){t.istate.mode=at,t.msg="unknown compression method",t.istate.marker=5;break}if((t.istate.method>>4)+8>t.istate.wbits){t.istate.mode=at,t.msg="invalid window size",t.istate.marker=5;break}t.istate.mode=Y;case Y:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,r=255&t.read_byte(t.next_in_index++),((t.istate.method<<8)+r)%31!==0){t.istate.mode=at,t.msg="incorrect header check",t.istate.marker=5;break}if(0===(r&G)){t.istate.mode=it;break}t.istate.mode=Z;case Z:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,t.istate.mode=tt;case tt:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,t.istate.mode=et;case et:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,t.istate.mode=nt;case nt:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,t.istate.need+=255&t.read_byte(t.next_in_index++),t.istate.mode=rt,l);case rt:return t.istate.mode=at,t.msg="need dictionary",t.istate.marker=0,f;case it:if(n=t.istate.blocks.proc(t,n),n==p){t.istate.mode=at,t.istate.marker=0;break}if(n==c&&(n=e),n!=u)return n;n=e,t.istate.blocks.reset(t,t.istate.was),t.istate.mode=ot;case ot:return u;case at:return p;default:return f}},e.inflateSetDictionary=function(t,e,n){var r=0,i=n;return t&&t.istate&&t.istate.mode==rt?(i>=1<<t.istate.wbits&&(i=(1<<t.istate.wbits)-1,r=n-i),t.istate.blocks.set_dictionary(e,r,i),t.istate.mode=it,c):f},e.inflateSync=function(e){var n,r,i,o,a;if(!e||!e.istate)return f;if(e.istate.mode!=at&&(e.istate.mode=at,e.istate.marker=0),0===(n=e.avail_in))return d;for(r=e.next_in_index,i=e.istate.marker;0!==n&&4>i;)e.read_byte(r)==st[i]?i++:i=0!==e.read_byte(r)?0:4-i,r++,n--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=n,e.istate.marker=i,4!=i?p:(o=e.total_in,a=e.total_out,t(e),e.total_in=o,e.total_out=a,e.istate.mode=it,c)},e.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():f}}function o(){}function a(){var t=this,e=new o,n=512,r=y,i=new Uint8Array(n),a=!1;e.inflateInit(),e.next_out=i,t.append=function(t,o){var s,l,f=[],p=0,h=0,_=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||a||(e.next_in_index=0,a=!0),s=e.inflate(r),a&&s===d){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(s!==c&&s!==u)throw new Error("inflating: "+e.msg);if((a||s===u)&&e.avail_in===t.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===n?f.push(new Uint8Array(i)):f.push(new Uint8Array(i.subarray(0,e.next_out_index)))),_+=e.next_out_index,o&&e.next_in_index>0&&e.next_in_index!=p&&(o(e.next_in_index),p=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return l=new Uint8Array(_),f.forEach(function(t){l.set(t,h),h+=t.length}),l}},t.flush=function(){e.inflateEnd()}}var s=15,c=0,u=1,l=2,f=-2,p=-3,h=-4,d=-5,_=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],v=1440,y=0,m=4,g=9,b=5,w=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],x=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=15;\ne.inflate_trees_fixed=function(t,e,n,r){return t[0]=g,e[0]=b,n[0]=w,r[0]=x,c};var T=0,A=1,R=2,S=3,O=4,P=5,U=6,D=7,L=8,I=9,z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=0,V=1,B=2,N=3,H=4,q=5,W=6,$=7,Q=8,X=9,G=32,K=8,J=0,Y=1,Z=2,tt=3,et=4,nt=5,rt=6,it=7,ot=12,at=13,st=[0,0,255,255];o.prototype={inflateInit:function(t){var e=this;return e.istate=new i,t||(t=s),e.istate.inflateInit(e,t)},inflate:function(t){var e=this;return e.istate?e.istate.inflate(e,t):f},inflateEnd:function(){var t=this;if(!t.istate)return f;var e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync:function(){var t=this;return t.istate?t.istate.inflateSync(t):f},inflateSetDictionary:function(t,e){var n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):f},read_byte:function(t){var e=this;return e.next_in.subarray(t,t+1)[0]},read_buf:function(t,e){var n=this;return n.next_in.subarray(t,t+e)}};var ct=t.zip||t;ct.Inflater=ct._jzlib_Inflater=a}(this)}).call(t)}).call(e,function(){return this}())},function(t,e){(function(t){(function(){!function(t){"use strict";function e(t){t.scripts&&t.scripts.length>0&&importScripts.apply(void 0,t.scripts),postMessage({type:"importScripts"})}function n(e){var n=t[e.codecClass],r=e.sn;if(u[r])throw Error("duplicated sn");u[r]={codec:new n(e.options),crcInput:"input"===e.crcType,crcOutput:"output"===e.crcType,crc:new a},postMessage({type:"newTask",sn:r})}function r(t){var e=t.sn,r=t.type,i=t.data,o=u[e];!o&&t.codecClass&&(n(t),o=u[e]);var a,s="append"===r,c=l();if(s)try{a=o.codec.append(i,function(t){postMessage({type:"progress",sn:e,loaded:t})})}catch(f){throw delete u[e],f}else delete u[e],a=o.codec.flush();var p=l()-c;c=l(),i&&o.crcInput&&o.crc.append(i),a&&o.crcOutput&&o.crc.append(a);var h=l()-c,d={type:r,sn:e,codecTime:p,crcTime:h},_=[];a&&(d.data=a,_.push(a.buffer)),s||!o.crcInput&&!o.crcOutput||(d.crc=o.crc.get());try{postMessage(d,_)}catch(v){postMessage(d)}}function i(t,e,n){var r={type:t,sn:e,error:o(n)};postMessage(r)}function o(t){return{message:t.message,stack:t.stack}}function a(){this.crc=-1}function s(){}if(t.zWorkerInitialized)throw new Error("z-worker.js should be run only once");t.zWorkerInitialized=!0,addEventListener("message",function(t){var e=t.data,n=e.type,r=e.sn,o=c[n];if(o)try{o(e)}catch(a){i(n,r,a)}});var c={importScripts:e,newTask:n,append:r,flush:r},u={},l=t.performance?t.performance.now.bind(t.performance):Date.now;a.prototype.append=function(t){for(var e=0|this.crc,n=this.table,r=0,i=0|t.length;i>r;r++)e=e>>>8^n[255&(e^t[r])];this.crc=e},a.prototype.get=function(){return~this.crc},a.prototype.table=function(){var t,e,n,r=[];for(t=0;256>t;t++){for(n=t,e=0;8>e;e++)1&n?n=n>>>1^3988292384:n>>>=1;r[t]=n}return r}(),t.NOOP=s,s.prototype.append=function(t,e){return t},s.prototype.flush=function(){}}(this)}).call(t)}).call(e,function(){return this}())},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";function r(t){this.defaults=o.merge({},t),this.interceptors={request:new s,response:new s}}var i=n(7),o=n(8),a=n(9),s=n(18),c=n(19),u=n(20),l=n(21),f=n(14);r.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,this.defaults,{method:"get"},t),t.baseURL&&!c(t.url)&&(t.url=u(t.baseURL,t.url)),t.withCredentials=t.withCredentials||this.defaults.withCredentials,t.data=f(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n};var p=new r(i),h=t.exports=l(r.prototype.request,p);h.create=function(t){return new r(t)},h.defaults=p.defaults,h.all=function(t){return Promise.all(t)},h.spread=n(22),h.interceptors=p.interceptors,o.forEach(["delete","get","head"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))},h[t]=l(r.prototype[t],p)}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))},h[t]=l(r.prototype[t],p)})},function(t,e,n){"use strict";var r=n(8),i=/^\\)\\]\\}\',?\\n/,o={"Content-Type":"application/x-www-form-urlencoded"};t.exports={transformRequest:[function(t,e){return r.isFormData(t)?t:r.isArrayBuffer(t)?t:r.isArrayBufferView(t)?t.buffer:!r.isObject(t)||r.isFile(t)||r.isBlob(t)?t:(r.isUndefined(e)||(r.forEach(e,function(t,n){"content-type"===n.toLowerCase()&&(e["Content-Type"]=t)}),r.isUndefined(e["Content-Type"])&&(e["Content-Type"]="application/json;charset=utf-8")),JSON.stringify(t))}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(i,"");try{t=JSON.parse(t)}catch(e){}}return t}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:r.merge(o),post:r.merge(o),put:r.merge(o)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"}},function(t,e){"use strict";function n(t){return"[object Array]"===y.call(t)}function r(t){return"[object ArrayBuffer]"===y.call(t)}function i(t){return"[object FormData]"===y.call(t)}function o(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function s(t){return"number"==typeof t}function c(t){return"undefined"==typeof t}function u(t){return null!==t&&"object"==typeof t}function l(t){return"[object Date]"===y.call(t)}function f(t){return"[object File]"===y.call(t)}function p(t){return"[object Blob]"===y.call(t)}function h(t){return t.replace(/^\\s*/,"").replace(/\\s*$/,"")}function d(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function _(t,e){if(null!==t&&"undefined"!=typeof t)if("object"==typeof t||n(t)||(t=[t]),n(t))for(var r=0,i=t.length;i>r;r++)e.call(null,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(null,t[o],o,t)}function v(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=v(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;r>n;n++)_(arguments[n],t);return e}var y=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:r,isFormData:i,isArrayBufferView:o,isString:a,isNumber:s,isObject:u,isUndefined:c,isDate:l,isFile:f,isBlob:p,isStandardBrowserEnv:d,forEach:_,merge:v,trim:h}},function(t,e,n){(function(e){"use strict";t.exports=function(t){return new Promise(function(r,i){try{var o;"function"==typeof t.adapter?o=t.adapter:"undefined"!=typeof XMLHttpRequest?o=n(11):"undefined"!=typeof e&&(o=n(11)),"function"==typeof o&&o(r,i,t)}catch(a){i(a)}})}}).call(e,n(10))},function(t,e){function n(){u=!1,a.length?c=a.concat(c):l=-1,c.length&&r()}function r(){if(!u){var t=setTimeout(n);u=!0;for(var e=c.length;e;){for(a=c,c=[];++l<e;)a&&a[l].run();l=-1,e=c.length}a=null,u=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var a,s=t.exports={},c=[],u=!1,l=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new i(t,e)),1!==c.length||u||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(8),i=n(12),o=n(13),a=n(14),s=n(15),c="undefined"!=typeof window&&window.btoa||n(16);t.exports=function(t,e,u){var l=u.data,f=u.headers;r.isFormData(l)&&delete f["Content-Type"];var p=new XMLHttpRequest;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(u.url)||(p=new window.XDomainRequest),u.auth){var h=u.auth.username||"",d=u.auth.password||"";f.Authorization="Basic "+c(h+":"+d)}if(p.open(u.method.toUpperCase(),i(u.url,u.params,u.paramsSerializer),!0),p.timeout=u.timeout,p.onload=function(){if(p){var n="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,r=-1!==["text",""].indexOf(u.responseType||"")?p.responseText:p.response,i={data:a(r,n,u.transformResponse),status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:u};(i.status>=200&&i.status<300||!("status"in p)&&i.responseText?t:e)(i),p=null}},p.onerror=function(){e(new Error("Network Error")),p=null},r.isStandardBrowserEnv()){var _=n(17),v=u.withCredentials||s(u.url)?_.read(u.xsrfCookieName):void 0;v&&(f[u.xsrfHeaderName]=v)}if("setRequestHeader"in p&&r.forEach(f,function(t,e){"undefined"==typeof l&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)}),u.withCredentials&&(p.withCredentials=!0),u.responseType)try{p.responseType=u.responseType}catch(y){if("json"!==p.responseType)throw y}r.isArrayBuffer(l)&&(l=new DataView(l)),p.send(l)}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(8);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t){var e,n,i,o={};return t?(r.forEach(t.split("\\n"),function(t){i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e&&(o[e]=o[e]?o[e]+", "+n:n)}),o):o}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e){"use strict";function n(t){this.message=t}function r(t){for(var e,r,o=String(t),a="",s=0,c=i;o.charAt(0|s)||(c="=",s%1);a+=c.charAt(63&e>>8-s%1*8)){if(r=o.charCodeAt(s+=.75),r>255)throw new n("INVALID_CHARACTER_ERR: DOM Exception 5");e=e<<8|r}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(8);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(t)}},function(t,e){"use strict";t.exports=function(t,e){return t.replace(/\\/+$/,"")+"/"+e.replace(/^\\/+/,"")}},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){(function(e,n,r){/* @preserve\n	 * The MIT License (MIT)\n	 * \n	 * Copyright (c) 2013-2015 Petka Antonov\n	 * \n	 * Permission is hereby granted, free of charge, to any person obtaining a copy\n	 * of this software and associated documentation files (the "Software"), to deal\n	 * in the Software without restriction, including without limitation the rights\n	 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n	 * copies of the Software, and to permit persons to whom the Software is\n	 * furnished to do so, subject to the following conditions:\n	 * \n	 * The above copyright notice and this permission notice shall be included in\n	 * all copies or substantial portions of the Software.\n	 * \n	 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n	 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n	 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n	 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n	 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n	 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n	 * THE SOFTWARE.\n	 * \n	 */\n!function(e){t.exports=e()}(function(){var t,i,o;return function a(t,e,n){function r(o,s){if(!e[o]){if(!t[o]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module \'"+o+"\'");throw u.code="MODULE_NOT_FOUND",u}var l=e[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return r(n?n:e)},l,l.exports,a,t,e,n)}return e[o].exports}for(var i="function"==typeof _dereq_&&_dereq_,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,n,r){"use strict";function i(){this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function o(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function a(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var c;try{throw new Error}catch(u){c=u}var l=t("./schedule"),f=t("./queue"),p=t("./util");i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n")}},p.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?a.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=s),i.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=c},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(u),u instanceof t){var p={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:u};f._then(e,a,void 0,l,p),u._then(s,c,void 0,l,p),l._setOnCancel(u)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method \'"+s.toString(n)+"\'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var a,s=t("./util"),c=s.canEvaluate;s.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(c){var r=a(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(c){var u=s._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(c instanceof f)return o(n).call(u,c)}else if("function"==typeof f){var p=o(f).call(u,c);if(p===a)return p;if(p)return o(n).call(u,c)}else if(r.isObject(c)){for(var h=i(f),d=0;d<h.length;++d){var _=h[d];if(f[_]!=c[_])continue t}return o(n).call(u,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+M.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function s(t){if(!this.isCancellable())return this;var e=this._onCancel();void 0!==e?M.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function c(){return this._onCancelField}function u(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new O(this._peekContext())}function _(t,e){if(V(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=C(t);M.notEnumerableProp(t,"stack",r.message+"\\n"+r.stack.join("\\n")),M.notEnumerableProp(t,"__stackCleaned__",!0)}}}function v(t,e,n,r,i){if(void 0===t&&null!==e&&X){if(void 0!==i&&i._returnedNonUndefined())return;var o=r._bitField;if(0===(65535&o))return;n&&(n+=" ");var a="a promise was created in a "+n+"handler but was not returned from it";r._warn(a,!0,e)}}function y(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),m(n)}function m(t,e,r){if(it.warnings){var i,o=new z(t);if(e)r._attachExtraTrace(o);else if(it.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=C(o);o.stack=a.message+"\\n"+a.stack.join("\\n")}Z("warning",o)||j(o,"",!0)}}function g(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\\n");return n<e.length&&(e[n]=e[n].join("\\n")),t+"\\n"+e.join("\\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var c=r[s];if(e[i]!==c)break;e.pop(),i--}e=r}}function x(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||N.test(r),o=i&&et(r);i&&!o&&(q&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function k(t){for(var e=t.stack.replace(/\\s+$/g,"").split("\\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||N.test(r))break}return n>0&&(e=e.slice(n)),e}function C(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?k(t):["    (No stack trace)"],{message:n,stack:x(e)}}function j(t,e,n){if("undefined"!=typeof console){var r;if(M.isObject(t)){var i=t.stack;r=e+H(i,t)}else r=e+String(t);"function"==typeof D?D(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function E(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){I.throwLater(o)}"unhandledRejection"===t?Z(t,n,r)||i||j(n,"Unhandled rejection "):Z(t,r)}function F(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():M.toString(t);var n=/\\[object [a-zA-Z0-9$_]+\\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+T(e)+">, no stack trace)"}function T(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function A(){return"function"==typeof rt}function R(t){var e=t.match(nt);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function S(t,e){if(A()){for(var n,r,i=t.stack.split("\\n"),o=e.stack.split("\\n"),a=-1,s=-1,c=0;c<i.length;++c){var u=R(i[c]);if(u){n=u.fileName,a=u.line;break}}for(var c=0;c<o.length;++c){var u=R(o[c]);if(u){r=u.fileName,s=u.line;break}}0>a||0>s||!n||!r||n!==r||a>=s||(et=function(t){if(B.test(t))return!0;var e=R(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}}function O(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);rt(this,O),e>32&&this.uncycle()}var P,U,D,L=n._getDomain,I=n._async,z=t("./errors").Warning,M=t("./util"),V=M.canAttachTrace,B=/[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/,N=null,H=null,q=!1,W=!(0==M.env("BLUEBIRD_DEBUG")),$=!(0==M.env("BLUEBIRD_WARNINGS")||!W&&!M.env("BLUEBIRD_WARNINGS")),Q=!(0==M.env("BLUEBIRD_LONG_STACK_TRACES")||!W&&!M.env("BLUEBIRD_LONG_STACK_TRACES")),X=0!=M.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&($||!!M.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),I.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){E("rejectionHandled",P,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),E("unhandledRejection",U,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return m(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=L();U="function"==typeof t?null===e?t:e.bind(t):void 0},n.onUnhandledRejectionHandled=function(t){var e=L();P="function"==typeof t?null===e?t:e.bind(t):void 0};var G=function(){};n.longStackTraces=function(){if(I.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n");if(!it.longStackTraces&&A()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;it.longStackTraces=!0,G=function(){if(I.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),I.enableTrampoline(),it.longStackTraces=!1},n.prototype._captureStackTrace=d,n.prototype._attachExtraTrace=_,r.activateLongStackTraces(),I.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return it.longStackTraces&&A()};var K=function(){try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),M.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!M.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),J=function(){return M.isNode?function(){return e.emit.apply(e,arguments)}:M.global?function(t){var e="on"+t.toLowerCase(),n=M.global[e];return n?(n.apply(M.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),Y={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},Z=function(t){var e=!1;try{e=J.apply(null,arguments)}catch(n){I.throwLater(n),e=!0}var r=!1;try{r=K(t,Y[t].apply(null,arguments))}catch(n){I.throwLater(n),r=!0}return r||e};n.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&G()),"warnings"in t){var e=t.warnings;it.warnings=!!e,X=it.warnings,M.isObject(e)&&"wForgottenReturn"in e&&(X=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!it.cancellation){if(I.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=c,n.prototype._setOnCancel=u,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,tt=f,it.cancellation=!0}"monitoring"in t&&(t.monitoring&&!it.monitoring?(it.monitoring=!0,n.prototype._fireEvent=Z):!t.monitoring&&it.monitoring&&(it.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var tt=p,et=function(){return!1},nt=/[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;M.inherits(O,Error),r.CapturedTrace=O,O.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;t-1>s?(c._parent=e[s+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var u=c._length+1,l=r-2;l>=0;--l)e[l]._length=u,u++;return}}}},O.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=C(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(x(i.stack.split("\\n"))),i=i._parent;w(r),b(r),M.notEnumerableProp(t,"stack",g(n,r)),M.notEnumerableProp(t,"__stackCleaned__",!0)}};var rt=function(){var t=/^\\s*at\\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():F(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,N=t,H=e;var n=Error.captureStackTrace;return et=function(t){return B.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\\n")[0].indexOf("stackDetection@")>=0)return N=/@/,H=e,q=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(H=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?F(e):e.toString()},null):(N=t,H=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(D=function(t){console.warn(t)},M.isNode&&e.stderr.isTTY?D=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\\n")}:M.isNode||"string"!=typeof(new Error).stack||(D=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var it={warnings:$,longStackTraces:!1,cancellation:!1,monitoring:!1};return Q&&n.longStackTraces(),{longStackTraces:function(){return it.longStackTraces},warnings:function(){return it.warnings},cancellation:function(){return it.cancellation},monitoring:function(){return it.monitoring},propagateFromFunction:function(){return tt},boundValueFunction:function(){return h},checkForgottenReturns:v,setBounds:S,warn:m,deprecated:y,CapturedTrace:O,fireDomEvent:K,fireGlobalEvent:J}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,e){return r(t,e)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,a,s=t("./es5"),c=s.freeze,u=t("./util"),l=u.inherits,f=u.notEnumerableProp,p=r("Warning","warning"),h=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(v){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(_.prototype[y[m]]=Array.prototype[y[m]]);s.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var g=0;_.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\\n"+t+"AggregateError of:\\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\\n"),e+=r+"\\n"}return g--,e},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:h,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return a}},p=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:p,keys:s,names:s,defineProperty:u,getDescriptor:c,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function a(){return c.call(this,this.promise._target()._settledValue())}function s(t){return o(this,t)?void 0:(f.e=t,f)}function c(t){var r=this.promise,c=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?c.call(r._boundValue()):c.call(r._boundValue(),t);if(void 0!==u){r._setReturnedNonUndefined();var p=n(u,r);if(p instanceof e){if(null!=this.cancelPromise){if(p.isCancelled()){var h=new l("late cancellation observer");return r._attachExtraTrace(h),f.e=h,f}p.isPending()&&p._attachCancellationCallback(new i(this))}return p._then(a,s,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var u=t("./util"),l=e.CancellationError,f=u.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,c,c)},e.prototype.tap=function(t){return this._passThrough(t,1,c)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=h(n[o])(t);if(r._popContext(),a===p){r._pushContext();var s=e.reject(p.e);return r._popContext(),s}var c=i(a,r);if(c instanceof e)return c}return null}function c(t,n,i,o){var a=this._promise=new e(r);a._captureStackTrace(),a._setOnCancel(this),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null}var u=t("./errors"),l=u.TypeError,f=t("./util"),p=f.errorObj,h=f.tryCatch,d=[];f.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=h(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=h(this._generator["throw"]).call(this._generator,r),this._promise._popContext(),t===p&&t.e===r&&(t=null)}var i=this._promise;this._cleanup(),t===p?i._rejectCallback(t.e,!1):i.cancel()}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,this._promiseCancelled(),t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===p)return this._cleanup(),n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n".replace("%s",r)+"From coroutine:\\n"+this._stack.split("\\n").slice(1,-7).join("\\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?this._promiseFulfilled(o._value()):0!==(16777216&a)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));d.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n");var r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=u();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:h,this._init$(void 0,-2)}function c(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+l.classString(e));var o="object"==typeof n&&null!==n?n.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new s(t,e,o,i).promise()}var u=e._getDomain,l=t("./util"),f=l.tryCatch,p=l.errorObj,h=[];l.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,c=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var u=this._promise,l=this._callback,h=u._boundValue();\nu._pushContext();var d=f(l).call(h,t,n,o),_=u._popContext();if(a.checkForgottenReturns(d,_,null!==s?"Promise.filter":"Promise.map",u),d===p)return this._reject(d.e),!0;var v=i(d,this._promise);if(v instanceof e){v=v._target();var y=v._bitField;if(0===(50397184&y))return c>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);d=v._value()}r[n]=d}var m=++this._totalResolved;return m>=o?(null!==s?this._filter(r,s):this._resolve(r),!0):!1},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];c=a.isArray(u)?s(t).apply(l,u):s(t).call(l,u)}else c=s(t)();var f=r._popContext();return o.checkForgottenReturns(c,f,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new u(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,c=t("./errors"),u=c.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=s(e).apply(n._boundValue(),[null].concat(t));i===c&&a.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?s(e).call(r,null):s(e).call(r,null,t);i===c&&a.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=s(e).call(n._boundValue(),t);i===c&&a.throwLater(i.e)}var o=t("./util"),a=e._async,s=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){function n(){}function r(t,e){if("function"!=typeof e)throw new m("expecting a function but got "+h.classString(e));if(t.constructor!==i)throw new m("the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n")}function i(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==b&&(r(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function a(t){this.promise._rejectCallback(t,!1)}function s(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,u=function(){return new m("circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n")},l=function(){return new i.PromiseInspection(this._target())},f=function(t){return i.reject(new m(t))},p={},h=t("./util");c=h.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(i,"_getDomain",c);var d=t("./es5"),_=t("./async"),v=new _;d.defineProperty(i,"_async",{value:v});var y=t("./errors"),m=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var g=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var b=function(){},w={},x={},k=t("./thenables")(i,b),C=t("./promise_array")(i,b,k,f,n),j=t("./context")(i),E=j.create,F=t("./debuggability")(i,j),T=(F.CapturedTrace,t("./finally")(i,k)),A=t("./catch_filter")(x),R=t("./nodeback"),S=h.errorObj,O=h.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!h.isObject(o))return f("expecting an object but got "+h.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,A(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},i.prototype.then=function(t,e){if(F.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(n+=", "+h.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?f("expecting a function but got "+h.classString(t)):this.all()._then(t,void 0,void 0,w,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},i.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=O(t)(R(e,n));return r===S&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new C(t).promise()},i.cast=function(t){var e=k(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+h.classString(t));var e=v._schedule;return v._schedule=t,e},i.prototype._then=function(t,e,n,r,o){var a=void 0!==o,s=a?o:new i(b),u=this._target(),l=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=c();if(0!==(50397184&l)){var p,h,d=u._settlePromiseCtx;0!==(33554432&l)?(h=u._rejectionHandler0,p=t):0!==(16777216&l)?(h=u._fulfillmentHandler0,p=e,u._unsetRejectionIsUnhandled()):(d=u._settlePromiseLateCancellationObserver,h=new g("late cancellation observer"),u._attachExtraTrace(h),p=e),v.invoke(d,u,{handler:null===f?p:"function"==typeof p&&f.bind(p),promise:s,receiver:r,value:h})}else u._addCallbacks(t,e,s,r,f);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==p)return void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[a+1]=null===i?e:i.bind(e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(u(),!1);var n=k(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(u());var o=r._bitField;if(0===(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;a>s;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var c=new g("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},i.prototype._rejectCallback=function(t,e,n){var r=h.ensureErrorObject(t),i=r===t;if(!i&&!n&&F.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===w?n&&"number"==typeof n.length?o=O(t).apply(this._boundValue(),n):(o=S,o.e=new m("cannot .spread() a non-array: "+h.classString(n))):o=O(t).call(e,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===x?r._reject(n):o===S?r._rejectCallback(o.e,!1):(F.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var a=t instanceof i,s=this._bitField,c=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=t,O(e).call(r,o)===S&&t._reject(S.e)):e===l?t._fulfill(l.call(r)):r instanceof n?r._promiseCancelled(t):a||t instanceof C?t._cancel():r.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):a&&(c&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():v.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?v.fatalError(t,h.isNode):void((65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){F.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:a}},h.notEnumerableProp(i,"_makeSelfResolutionError",u),t("./method")(i,b,k,f,F),t("./bind")(i,b,k,F),t("./cancel")(i,C,f,F),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,C,k,b,F),i.Promise=i,t("./map.js")(i,C,f,k,b,F),t("./using.js")(i,f,k,E,b,F),t("./timers.js")(i,b,F),t("./generators.js")(i,f,b,k,n,F),t("./nodeify.js")(i),t("./call_get.js")(i),t("./props.js")(i,C,k,f),t("./race.js")(i,b,k,f),t("./reduce.js")(i,C,f,k,b,F),t("./settle.js")(i,C,F),t("./some.js")(i,C,f),t("./promisify.js")(i,b),t("./any.js")(i),t("./each.js")(i,b),t("./filter.js")(i,b),h.toFastProperties(i),h.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),F.setBounds(_.firstLineError,h.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function u(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(u,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var l=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(l,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;n>s;++s){var c=r(t[s],i);c instanceof e?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0===(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!==(33554432&a)?this._promiseFulfilled(c._value(),s):0!==(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!x.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=h.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function a(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new m("Cannot promisify an API that has normal methods with \'%s\'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n".replace("%s",e))}}function s(t,e,n,r){for(var s=h.inheritedDataKeys(t),c=[],u=0;u<s.length;++u){var l=s[u],f=t[l],p=r===k?!0:k(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,p)||c.push(l,f)}return a(c,e,n),c}function c(t,r,i,o,a,s){function c(){var i=r;r===p&&(i=this);var o=new e(n);o._captureStackTrace();var a="string"==typeof l&&this!==u?this[l]:t,c=d(o,s);try{a.apply(i,_(arguments,c))}catch(f){o._rejectCallback(v(f),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var u=function(){return this}(),l=t;return"string"==typeof l&&(t=o),h.notEnumerableProp(c,"__isPromisified__",!0),c}function u(t,e,n,r,i){for(var o=new RegExp(C(e)+"$"),a=s(t,e,o,n),c=0,u=a.length;u>c;c+=2){var l=a[c],f=a[c+1],d=l+e;if(r===j)t[d]=j(l,p,l,f,e,i);else{var _=r(f,function(){return j(l,p,l,f,e,i)});h.notEnumerableProp(_,"__isPromisified__",!0),t[d]=_}}return h.toFastProperties(t),t}function l(t,e,n){return j(t,e,void 0,t,null,n)}var f,p={},h=t("./util"),d=t("./nodeback"),_=h.withAppended,v=h.maybeWrapAsError,y=h.canEvaluate,m=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],x=new RegExp("^(?:"+w.join("|")+")$"),k=function(t){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},C=function(t){return t.replace(/([$])/,"\\\\$")},j=y?f:c;e.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+h.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?p:e.context,o=!!e.multiArgs,a=l(t,n,o);return h.copyDescriptors(t,a,r),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=g);var i=e.filter;"function"!=typeof i&&(i=k);var o=e.promisifier;if("function"!=typeof o&&(o=j),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n");for(var a=h.inheritedDataKeys(t),s=0;s<a.length;++s){var c=t[a[s]];"constructor"!==a[s]&&h.isClass(c)&&(u(c.prototype,r,i,o,n),u(c,r,i,o,n))}return u(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=f(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var a=r[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function a(t){var n,a=r(t);return u(a)?(n=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n")}var s,c=t("./util"),u=c.isObject,l=t("./es5");"function"==typeof Map&&(s=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),p=function(t){for(var e=new s,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=p(this._values);else{r={};for(var i=this.length(),o=0,a=this.length();a>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e)return s(c);if(t=a.asArray(t),null===t)return i("expecting an array or an iterable object but got "+a.classString(t));var u=new e(n);void 0!==o&&u._propagateFrom(o,3);for(var l=u._fulfill,f=u._reject,p=0,h=t.length;h>p;++p){var d=t[p];(void 0!==d||p in t)&&e.cast(d)._then(l,f,void 0,u,null)}return u}var a=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r,i){this.constructor$(t);var a=p();this._fn=null===a?n:a.bind(n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function u(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+h.classString(e));var o=new s(t,e,n,i);return o.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var p=e._getDomain,h=t("./util"),d=h.tryCatch;h.inherits(s,n),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},s.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,s=t("./util"),c=function(){throw new Error("No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n")};if(s.isNode&&"undefined"==typeof MutationObserver){var u=n.setImmediate,l=e.nextTick;a=s.isRecentNode?function(t){u.call(n,t)}:function(t){l.call(e,t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:c:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();i.exports=a},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,a=t("./util");a.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var a=t("./util"),s=t("./errors").RangeError,c=t("./errors").AggregateError,u=a.isArray,l={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=u(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n");\nreturn this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===u){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(a(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return u.e=e,u}}function a(t){return f.call(t,"_promise0")}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,f,!0),s=null)}var s=new e(n),l=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var f=!0,p=c.tryCatch(r).call(t,o,a);return f=!1,s&&p===u&&(s._rejectCallback(p.e,!0,!0),s=null),l}var c=t("./util"),u=c.errorObj,l=c.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var s=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var a,s;return void 0!==o?(a=e.resolve(o)._then(u,null,null,t,void 0),r.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(n),s=setTimeout(function(){a._fulfill()},+t),r.cancellation()&&a._setOnCancel(new i(s))),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),s.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,s,c=new i(setTimeout(function(){n.isPending()&&f(n,e,s)},t));return r.cancellation()?(s=this.then(),n=s._then(o,a,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,a,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(a>=u)return l._fulfill();var o=c(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(f){return s(f)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var a=0,u=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function p(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function h(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),_=t("./errors").TypeError,v=t("./util").inherits,y=d.errorObj,m=d.tryCatch;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(f,l),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},h.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var c=new h(t),f=0;t>f;++f){var _=o[f];if(l.isDisposer(_)){var v=_;_=_.promise(),_._setDisposable(v)}else{var g=r(_);g instanceof e&&(_=g._then(p,null,null,{resources:c,index:f},void 0))}c[f]=_}for(var b=new Array(c.length),f=0;f<b.length;++f)b[f]=e.resolve(c[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}x._pushContext(),i=m(i);var r=s?i.apply(void 0,t):i(t),o=x._popContext();return a.checkForgottenReturns(r,o,"Promise.using",x),r}),x=w.lastly(function(){var t=new e.PromiseInspection(w);return u(c,t)});return c.promise=x,x._setOnCancel(c),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new _}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";function o(){try{var t=A;return A=null,t.apply(this,arguments)}catch(e){return T.e=e,T}}function a(t){return A=t,o}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function c(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return s(t)?new Error(m(t)):t}function l(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function f(t,e,n){if(!E.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function p(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return E.defineProperty(t,e,r),t}function h(t){throw t}function d(t){try{if("function"==typeof t){var e=E.names(t.prototype),n=E.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=P.test(t+"")&&E.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function _(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function v(t){return U.test(t)}function y(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function m(t){try{return t+""}catch(e){return"[no string representation]"}}function g(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{p(t,"isOperational",!0)}catch(e){}}function w(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function x(t){return g(t)&&E.propertyIsWritable(t,"stack")}function k(t){return{}.toString.call(t)}function C(t,e,n){for(var r=E.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{E.defineProperty(e,o,E.getDescriptor(t,o))}catch(a){}}}function j(t,e){return z?{NODE_ENV:"production"}[t]:e}var E=t("./es5"),F="undefined"==typeof navigator,T={e:{}},A,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof n?n:void 0!==this?this:null,S=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},O=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(E.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(a){return r}for(var s=0;s<o.length;++s){var c=o[s];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}t=E.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),P=/this\\s*\\.\\s*\\S+\\s*=/,U=/^[a-z$_][a-z$_0-9]*$/i,D=function(){return"stack"in new Error?function(t){return x(t)?t:new Error(m(t))}:function(t){if(x(t))return t;try{throw new Error(m(t))}catch(e){return e}}}(),L=function(t){return E.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var I="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};L=function(t){return E.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?I(t):null}}var z="undefined"!=typeof e&&"[object process]"===k(e).toLowerCase(),M={isClass:d,isIdentifier:v,inheritedDataKeys:O,getDataPropertyOrDefault:f,thrower:h,isArray:E.isArray,asArray:L,notEnumerableProp:p,isPrimitive:s,isObject:c,isError:g,canEvaluate:F,errorObj:T,tryCatch:a,inherits:S,withAppended:l,maybeWrapAsError:u,toFastProperties:_,filledRange:y,toString:m,canAttachTrace:x,ensureErrorObject:D,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:k,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:z,env:j,global:R};M.isRecentNode=M.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),M.isNode&&M.toFastProperties(e);try{throw new Error}catch(V){M.lastLineError=V}r.exports=M},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,n(10),function(){return this}(),n(24).setImmediate)},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(10).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,c={},u=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=u++,r=arguments.length<2?!1:s.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete c[t]}}).call(e,n(24).setImmediate,n(24).clearImmediate)}]);\n//# sourceMappingURL=5dbdbe2ddaf8804066d7.worker.js.map',n.p+"5dbdbe2ddaf8804066d7.worker.js");
}},function(t,e){var n=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var r;try{var o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;r=new o,r.append(t),r=r.getBlob()}catch(i){r=new Blob([t])}return new Worker(n.createObjectURL(r))}catch(i){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(i){return new Worker(e)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=[],r=256,o=0;o<t.mcnkObjs.length;o++){var i=t.mcnkObjs[o],a=i.alphaArray,s=i.textureLayers,l=new Array(16384);if(n.push(l),s)for(var u=0;u<s.length;u++){var c=s[u].alphaMap,f=64*u,d=0,p=0;if((512&s[u].flags)>0)for(;4096>p;){var h=128&a[c],m=127&a[c];c++;for(var b=0;m>b&&4096!=p;b++)l[f++]=a[c],d++,p++,d>=64&&(f=f+r-64,d=0,p++),h||c++;h&&c++}else if((4&e.flags)>0||(128&e.flags)>0)for(var g=0;64>g;g++)for(var v=0;64>v;v++)l[f]=a[c],f+=1,d+=1,p+=1,c++,d>=64&&(f=f+r-64,d=0);else for(var g=0;64>g;g++)for(var v=0;32>v;v++)l[f]=17*((240&a[c])>>4),l[f+1]=17*(15&a[c]),f+=2,d+=2,p+=2,c++,d>=64&&(f=f+r-64,d=0)}}return n}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(77),l=r(s),u=n(78),c=r(u),f=function(){function t(e,n){o(this,t),this.sceneApi=e,this.gl=e.getGlContext(),this.wdtFile=n,this.combinedVBO=null,this.textureArray=new Array(255);for(var r=0;256>r;r++)this.textureArray[r]=[]}return a(t,[{key:"assign",value:function(t){this.adtFile=t}},{key:"loadTextures",value:function(){for(var t=this.gl,e=this.adtFile.mcnkObjs,n=0;n<e.length;n++){var r=e[n];if(r.textureLayers&&r.textureLayers.length>0)for(var o=0;o<r.textureLayers.length;o++)this.loadTexture(n,o,r.textureLayers[o].textureName)}for(var a=(e.length,4),s=64,l=a*s,u=s,c=i(this.adtFile,this.wdtFile),f=[],n=0;n<e.length;n++){var d=t.createTexture();t.bindTexture(t.TEXTURE_2D,d),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,l,u,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8Array(c[n])),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),f.push(d)}this.alphaTextures=f}},{key:"loadTexture",value:function(t,e,n){var r=this;this.sceneApi.resources.loadTexture(n).then(function(n){r.textureArray[t][e]=n},function(){})}},{key:"createTriangleStrip",value:function(){function t(t,e,n){var r=[4369,8738,17476,34952],o=[15,240,3840,61440];return 0!=(t&r[e]&o[n])}function e(t,e){var n=9*(e+1>>>1)+8*(e>>>1)+t;return n}for(var n=this.adtFile.mcnkObjs,r=[],o=[],i=0;i<n.length;i++){var a=n[i],s=a.holes;o.push(r.length);for(var l=!0,u=0;4>u;u++)for(var c=0;4>c;c++)if(!t(s,u,c))for(var f=2*u,d=4*c,p=0;2>p;p++){l?l=!1:r.push(e(f,d+2*p));for(var h=0;3>h;h++)r.push(e(f+h,d+2*p)),r.push(e(f+h,d+2*p+2));r.push(e(f+2,d+2*p+2))}}o.push(r.length);var m={strips:r,stripOffsets:o};this.triangleStrip=m}},{key:"createVBO",value:function(){var t=this.gl,e=(this.adtFile,[]);this.indexOffset=e.length;for(var n=0;145>n;n++)e.push(n);this.heightOffset=e.length;for(var r=this.adtFile.mcnkObjs,n=0;n<r.length;n++)for(var o=0;145>o;o++)e.push(r[n].heights[o]);this.combinedVbo=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.combinedVbo),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),this.stripVBO=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.stripVBO),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(this.triangleStrip.strips),t.STATIC_DRAW)}},{key:"draw",value:function(){var t=this.gl,e=this.triangleStrip.stripOffsets,n=this.sceneApi.shaders.getShaderUniforms(),r=this.sceneApi.shaders.getShaderAttributes();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.stripVBO),t.bindBuffer(t.ARRAY_BUFFER,this.combinedVbo),t.vertexAttribPointer(r.aIndex,1,t.FLOAT,!1,0,4*this.indexOffset);for(var o=this.adtFile.mcnkObjs,i=0;256>i;i++){var a=o[i];if(t.vertexAttribPointer(r.aHeight,1,t.FLOAT,!1,0,4*(this.heightOffset+145*i)),t.uniform3f(n.uPos,a.pos.x,a.pos.y,a.pos.z),this.textureArray[i]&&this.textureArray[i][0]){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.textureArray[i][0].texture),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.alphaTextures[i]);for(var s=1;s<this.textureArray[i].length;s++)t.activeTexture(t.TEXTURE1+s),this.textureArray[i][s]&&this.textureArray[i][s].texture?t.bindTexture(t.TEXTURE_2D,this.textureArray[i][s].texture):t.bindTexture(t.TEXTURE_2D,null);var l=0==i?0:e[i+1]-e[i];t.drawElements(t.TRIANGLE_STRIP,l,t.UNSIGNED_SHORT,2*e[i])}}}}]),t}(),d=function p(t){o(this,p);var e=this,n=(0,l["default"])(function(t){return(0,c["default"])(t)},function(e){var n=new f(t,t.getCurrentWdt());return n.assign(e),n.createTriangleStrip(),n.createVBO(),n.loadTextures(),n});e.loadAdt=function(t){return n.get(t)},e.unLoadAdt=function(t){n.remove(t)}};e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e["default"]=function(t,e){return new l(t,e)};var a=n(55),s=r(a),l=function(){function t(e,n){o(this,t),this.cache={},this.queueForLoad={},this.load=e,this.process=n}return i(t,[{key:"get",value:function(t){var e=s["default"].defer(),n=this,r=this.getCached(t);if(r)return e.resolve(r),e.promise;var o=this.queueForLoad[t];return void 0===o&&(o=[],this.load(t).then(function(e){var r=n.process(e);n.put(t,r),n.resolve(t)},function(e){n.reject(t)})),o.push(e),this.queueForLoad[t]=o,e.promise}},{key:"resolve",value:function(t){for(var e=this.queueForLoad[t],n=0;n<e.length;n++){var r=this.getCached(t);e[n].resolve(r)}this.queueForLoad[t]=void 0}},{key:"reject",value:function(t,e){for(var n=this.queueForLoad[t],r=0;r<n.length;r++)n[r].reject(e);this.queueForLoad[t]=void 0}},{key:"put",value:function(t,e){var n={obj:e,counter:1};this.cache[t]=n}},{key:"getCached",value:function(t){var e=this.cache[t];if(void 0!==e)return e.counter+=1,e.obj}},{key:"remove",value:function(t){var e=this.cache[t];e&&(e.counter-=1,e.counter<=0&&(cache[t]=null,e.obj.destroy()))}}]),t}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e["default"]=function(t){function e(t){for(var e=0;e<t.mcnkObjs.length;e++){var n=t.mcnkObjs[e],r=t.mtex;if(n.textureLayers)for(var o=0;o<n.textureLayers.length;o++){var i=n.textureLayers[o].textureID,a=r[i];n.textureLayers[o].textureName=a}}}var n=s["default"].defer(),r=(0,u["default"])(t);return r.then(function(t){var r={};t.setSectionReaders(h),t.processFile(r),e(r),n.resolve(r)},function(){n.reject()}),n.promise};var a=n(55),s=r(a),l=n(71),u=r(l),c=n(72),f=r(c),d={MVER:function(t,e){if("MVER"!==e.chunkIdent)throw"Got bad group ADT file "+filename;e.readInt32({offs:0})},MHDR:function(t,e,n){var r={offs:0},o=(e.readUint32(r),e.readUint32(r)),i=e.readUint32(r),a=e.readUint32(r),s=e.readUint32(r),l=e.readUint32(r),u=e.readUint32(r),c=e.readUint32(r),f=e.readUint32(r);e.readUint32(r),e.readUint32(r),e.readUint32(r),e.readUint32(r),e.readUint32(r),e.readUint32(r),e.readUint32(r);n.processChunkAtOffs(e.chunkDataOffset+o,t),n.processChunkAtOffs(e.chunkDataOffset+i,t),n.processChunkAtOffs(e.chunkDataOffset+a,t),n.processChunkAtOffs(e.chunkDataOffset+s,t),n.processChunkAtOffs(e.chunkDataOffset+l,t),n.processChunkAtOffs(e.chunkDataOffset+u,t),n.processChunkAtOffs(e.chunkDataOffset+c,t),n.processChunkAtOffs(e.chunkDataOffset+f,t),e.nextChunkOffset=n.getFileSize()},MCIN:function(t,e,n){for(var r={offs:0},o=[],i=0;256>i;i++){var a={};a.offsetMCNK=e.readUint32(r),a.size=e.readUint32(r),a.flags=e.readUint32(r),a.asyncId=e.readUint32(r);var s={};n.processChunkAtOffs(a.offsetMCNK,s),o.push(s)}t.mcnkObjs=o},MCNK:function(t,e,n){var r={offs:0};t.flags=e.readUint32(r),t.ix=e.readUint32(r),t.iy=e.readUint32(r),t.nLayers=e.readUint32(r),t.nDoodadRefs=e.readUint32(r);var o=e.readUint32(r),i=e.readUint32(r),a=e.readUint32(r),s=(e.readUint32(r),e.readUint32(r));t.sizeAlpha=e.readUint32(r);e.readUint32(r);t.sizeShadow=e.readUint32(r),t.areaid=e.readUint32(r),t.nMapObjRefs=e.readUint32(r),t.holes=e.readUint32(r),t.s1=e.readUint16(r),t.s2=e.readUint16(r),t.d1=e.readUint32(r),t.d2=e.readUint32(r),t.d3=e.readUint32(r),t.predTex=e.readUint32(r);e.readUint32(r),e.readUint32(r),e.readUint32(r),e.readUint32(r),e.readUint32(r);t.pos=e.readVector3f(r),t.textureId=e.readUint32(r),t.props=e.readUint32(r),t.effectId=e.readUint32(r),n.processChunkAtOffs(e.chunkOffset+o,t),n.processChunkAtOffs(e.chunkOffset+i,t),n.processChunkAtOffs(e.chunkOffset+a,t),n.processChunkAtOffsWithSize(e.chunkOffset+s,t.sizeAlpha,t)},MCVT:function(t,e,n){var r={offs:0},o=e.readFloat32Array(r,145);t.heights=o},MCNR:function(t,e,n){for(var r={offs:0},o=[],i=0;145>i;i++){var a=e.readInt8(r)/127,s=e.readInt8(r)/127,l=e.readInt8(r)/127;o.push(a),o.push(s),o.push(l)}t.normales=o},MCLY:function(t,e,n){for(var r={offs:0},o=e.chunkLen>>4,i=[],a=0;o>a;a++){var s={};s.textureID=e.readInt32(r),s.flags=e.readInt32(r),s.alphaMap=e.readInt32(r),s.detailTex=e.readInt32(r),i.push(s)}t.textureLayers=i},MCAL:function(t,e,n){var r={offs:0},o=e.readUint8Array(r,e.chunkLen);t.alphaArray=o},MTEX:function(t,e){for(var n={offs:0},r=[];n.offs<e.chunkLen;){var o=e.readString(n,e.chunkLen-n.offs);n.offs+=1,r.push(o)}t.mtex=r},MMDX:function(t,e){var n={offs:0},r=null;e.chunkLen>0&&(r=e.readUint8Array(n,e.chunkLen)),t.mmdx=r},MMID:function(t,e){var n={offs:0},r=null;e.chunkLen>0&&(r=e.readInt32Array(n,e.chunkLen>>2)),t.mmid=r},MWMO:function(t,e){var n={offs:0},r=null;e.chunkLen>0&&(r=e.readUint8Array(n,e.chunkLen)),t.mwmo=r},MWID:function(t,e){var n={offs:0},r=null;e.chunkLen>0&&(r=e.readInt32Array(n,e.chunkLen>>2)),t.mwid=r},MDDF:function(t,e){var n=[],r={offs:0},o=e.chunkLen/36;if(o>0)var i=(0,f["default"])(t.mmdx.buffer);for(var a=0;o>a;a++){var s={};s.nameID=e.readInt32(r),s.uniqueId=e.readInt32(r),s.pos=e.readVector3f(r),s.rotation=e.readVector3f(r),s.scale=e.readInt32(r);var l=t.mmid[s.nameID];s.fileName=i.readString({offs:l},i.getLength()-l),n.push(s)}t.mddf=n},MODF:function(t,e){var n={offs:0},r=[],o=e.chunkLen/64;if(o>0)var i=(0,f["default"])(t.mwmo.buffer);for(var a=0;o>a;a++){var s={};s.nameId=e.readInt32(n),s.uniqueId=e.readInt32(n),s.pos=e.readVector3f(n),s.rotation=e.readVector3f(n),s.bb1=e.readVector3f(n),s.bb2=e.readVector3f(n),s.doodadSet=e.readUint16(n),s.nameSet=e.readUint16(n),s.flags=e.readInt32(n);var l=t.mwid[s.nameId];s.fileName=i.readString({offs:l},i.getLength()-l),r.push(s)}t.wmoObjs=r}},p=function(){function t(){o(this,t)}return i(t,[{key:"getHandler",value:function(t){return d[t]}}]),t}(),h=new p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(77),s=r(a),l=n(80),u=r(l),c=function(){function t(e){o(this,t),this.sceneApi=e,this.gl=e.getGlContext(),this.combinedVBO=null,this.textureArray=[]}return i(t,[{key:"assign",value:function(t){this.m2File=t}},{key:"loadTextures",value:function(){for(var t=this.m2File.textureDefinition,e=0;e<t.length;e++)this.loadTexture(e,t[e].textureName)}},{key:"loadTexture",value:function(t,e){var n=this;this.sceneApi.resources.loadTexture(e).then(function(e){n.textureArray[t]=e},function(){})}},{key:"createVBO",value:function(){var t=this.gl,e=this.m2File;this.vertexVBO=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexVBO),t.bufferData(t.ARRAY_BUFFER,e.vertexes,t.STATIC_DRAW)}},{key:"setupPlacementAttribute",value:function(t){var e=this.gl,n=this.sceneApi.shaders.getShaderAttributes();e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(n.uPlacementMat+0,4,e.FLOAT,!1,64,0),e.vertexAttribPointer(n.uPlacementMat+1,4,e.FLOAT,!1,64,16),e.vertexAttribPointer(n.uPlacementMat+2,4,e.FLOAT,!1,64,32),e.vertexAttribPointer(n.uPlacementMat+3,4,e.FLOAT,!1,64,48)}},{key:"setupAttributes",value:function(t){var e=this.gl,n=this.sceneApi.shaders.getShaderAttributes();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexVBO),e.bindBuffer(e.ARRAY_BUFFER,this.vertexVBO),e.vertexAttribPointer(n.aPosition,3,e.FLOAT,!1,48,0),e.vertexAttribPointer(n.boneWeights,4,e.UNSIGNED_BYTE,!0,48,12),e.vertexAttribPointer(n.bones,4,e.UNSIGNED_BYTE,!1,48,16),n.aNormal&&e.vertexAttribPointer(n.aNormal,3,e.FLOAT,!1,48,20),e.vertexAttribPointer(n.aTexCoord,2,e.FLOAT,!1,48,32),e.vertexAttribPointer(n.aTexCoord2,2,e.FLOAT,!1,48,40)}},{key:"setupUniforms",value:function(t,e){var n=this.gl,r=this.sceneApi.shaders.getShaderUniforms();t&&n.uniformMatrix4fv(r.uPlacementMat,!1,t),e&&n.uniformMatrix4fv(r.uBoneMatrixes,!1,e)}},{key:"draw",value:function(t,e,n,r,o,i,a,s){var l=this.gl,u=(this.m2File,this.sceneApi.shaders.getShaderUniforms());this.sceneApi.shaders.getShaderAttributes();if(this.setupUniforms(n),this.setupAttributes(t),e)for(var c=0;c<e.length;c++)this.drawMesh(c,e[c],t,o,i);l.uniform1f(u.uAlphaTest,-1)}},{key:"drawMesh",value:function(t,e,n,r,o,i,a,s,l){var u=this.gl,c=this.m2File,f=this.sceneApi.extensions.getInstancingExt(),d=this.sceneApi.getBlackPixelTexture(),p=n.skinFile.header,h=this.sceneApi.shaders.getShaderUniforms(),m=this.sceneApi.shaders.getShaderAttributes();if(u.uniformMatrix4fv(h.uTextMat1,!1,a),u.uniformMatrix4fv(h.uTextMat2,!1,s),e.isRendered&&e.texUnit1Texture){var b=p.texs[e.texUnit1TexIndex].colorIndex,g=[o[0],o[1],o[2],o[3]];if(b>=0&&r){var v=r[b];g=[g[0]*v[0],g[1]*v[1],g[2]*v[2],g[3]*v[3]]}var y=1,x=p.texs[e.texUnit1TexIndex].transpIndex;if(x>=0&&i&&(y=i[x]),g[3]=g[3]*y,0==g[3])return;u.vertexAttrib4f(m.aColor,g[0],g[1],g[2],g[3]),u.depthMask(!0);var w=p.texs[e.texUnit1TexIndex].renderFlagIndex,_=c.renderFlags[w];switch(_.blend){case 0:u.disable(u.BLEND),u.uniform1f(h.uAlphaTest,-1);break;case 1:u.disable(u.BLEND),u.uniform1f(h.uAlphaTest,.903921569);break;case 2:u.uniform1f(h.uAlphaTest,-1),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA);break;case 3:u.uniform1f(h.uAlphaTest,-1),u.enable(u.BLEND),u.blendFunc(u.SRC_COLOR,u.ONE);break;case 4:u.uniform1f(h.uAlphaTest,.00392157),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE);break;case 6:u.uniform1f(h.uAlphaTest,.903921569),u.enable(u.BLEND),u.blendFunc(u.DST_COLOR,u.SRC_COLOR);break;default:u.uniform1f(h.uAlphaTest,-1),u.enable(u.BLEND),u.blendFunc(u.DST_COLOR,u.SRC_COLOR)}(8&_.flags)>0,(4&_.flags)>0?u.disable(u.CULL_FACE):u.enable(u.CULL_FACE),(16&_.flags)>0?u.depthMask(!1):u.depthMask(!0),e.isEnviromentMapping?u.uniform1i(h.isEnviroment,1):u.uniform1i(h.isEnviroment,0),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,e.texUnit1Texture.texture),null!=e.texUnit2Texture?(u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,e.texUnit2Texture.texture)):(u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,d)),t=e.meshIndex,void 0==l?u.drawElements(u.TRIANGLES,p.subMeshes[t].nTriangles,u.UNSIGNED_SHORT,2*p.subMeshes[t].StartTriangle):f.drawElementsInstancedANGLE(u.TRIANGLES,p.subMeshes[t].nTriangles,u.UNSIGNED_SHORT,2*p.subMeshes[t].StartTriangle,l),null!=e.texUnit2Texture&&(u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE0)),u.depthMask(!0),u.disable(u.BLEND)}}}]),t}(),f=function d(t){o(this,d);var e=this,n=(0,s["default"])(function(t){return(0,u["default"])(t)},function(e){var n=new c(t);return n.assign(e),n.createVBO(),n.loadTextures(),n});e.loadM2=function(t){return n.get(t)},e.unLoadM2=function(t){n.remove(t)}};e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e={offs:0},n=(t.readNZTString(e,4),t.readInt32(e)),r=p[n];if(void 0==r){var o="Unknown MDX file version = "+n+", filepath = "+filePath;throw $log.error(o),o}var i={};try{i=t.parseSectionDefinition(i,r,t,e)}catch(a){throw a}return i}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e["default"]=function(t){var e=(0,c["default"])(t),n=e.then(function(e){var n={offs:0},r=e.readNZTString(n,4);if("MD20"!=r&&"MD21"!=r){var o="Unknown MDX file ident = "+r+", filepath = "+t;throw $log.error(o),o}if("MD21"==r){var a={},s=chunkedLoader(t,e.getArrayBuffer());return s.setSectionReaders(m),s.processFile(a),a}var u=l["default"].defer();u.promise;return a=i(e),a.fileName=t,a},function(t){return t});return n};var s=n(55),l=r(s),u=n(81),c=r(u),f={name:"header",type:"layout",layout:[{name:"MNameLen",type:"int32"},{name:"MNameOffs",type:"int32"},{name:"ModelType",type:"int32"},{name:"nGlobalSequences",type:"int32"},{name:"ofsGlobalSequences",type:"int32"},{name:"nAnimations",type:"int32"},{name:"ofsAnimations",type:"int32"},{name:"nAnimationLookup",type:"int32"},{name:"ofsAnimationLookup",type:"int32"},{name:"nBones",type:"int32"},{name:"ofsBones",type:"int32"},{name:"nKeyBoneLookup",type:"int32"},{name:"ofsKeyBoneLookup",type:"int32"},{name:"nVertexes",type:"int32"},{name:"ofsVertexes",type:"int32"},{name:"nViews",type:"int32"},{name:"nColors",type:"int32"},{name:"ofsColors",type:"int32"},{name:"nTextures",type:"int32"},{name:"ofsTextures",type:"int32"},{name:"nTransparency",type:"int32"},{name:"ofsTransparency",type:"int32"},{name:"nTexAnims",type:"int32"},{name:"ofsTexAnims",type:"int32"},{name:"nTexReplace",type:"int32"},{name:"ofsTexReplace",type:"int32"},{name:"nRenderFlags",type:"int32"},{name:"ofsRenderFlags",type:"int32"},{name:"nGroupBoneIDs",type:"int32"},{name:"ofsGroupBoneIDs",type:"int32"},{name:"nTexLookup",type:"int32"},{name:"ofsTexLookup",type:"int32"},{name:"nTexUnits",type:"int32"},{name:"ofsTexUnits",type:"int32"},{name:"nTransLookup",type:"int32"},{name:"ofsTransLookup",type:"int32"},{name:"nTexAnimLookup",type:"int32"},{name:"ofsTexAnimLookup",type:"int32"},{name:"BoundingCorner1",type:"vector3f"},{name:"BoundingCorner2",type:"vector3f"},{name:"BoundingRadius",type:"float32"},{name:"Corner1",type:"vector3f"},{name:"Corner2",type:"vector3f"},{name:"Radius",type:"float32"},{name:"nBoundingTriangles",type:"int32"},{name:"ofsBoundingTriangles",type:"int32"},{name:"nBoundingVertices",type:"int32"},{name:"ofsBoundingVertices",type:"int32"},{name:"nBoundingNormals",type:"int32"},{name:"ofsBoundingNormals",type:"int32"},{name:"nAttachments",type:"int32"},{name:"ofsAttachments",type:"int32"},{name:"nAttachLookup",type:"int32"},{name:"ofsAttachLookup",type:"int32"},{name:"nNumEvents",type:"int32"},{name:"ofsNumEvents",type:"int32"},{name:"nLights",type:"int32"},{name:"ofsLights",type:"int32"},{name:"nCameras",type:"int32"},{name:"ofsCameras",type:"int32"},{name:"nCameraLookup",type:"int32"},{name:"ofsCameraLookup",type:"int32"},{name:"nRibbonEmitters",type:"int32"},{name:"ofsRibbonEmitters",type:"int32"},{name:"nParticleEmitters",type:"int32"},{name:"ofsParticleEmitters",type:"int32"},{name:"vertexes",offset:"ofsVertexes",type:"uint8Array",len:function(t){return 48*t.nVertexes}},{name:"vertexesDebug",offset:"ofsVertexes",count:"nVertexes",type:"layout",layout:[{name:"pos",type:"vector3f"},{name:"bonesWeight",type:"uint8Array",len:4},{name:"bones",type:"uint8Array",len:4},{name:"normal",type:"vector3f"},{name:"textureX",type:"float32"},{name:"textureY",type:"float32"},{name:"unk1",type:"int32"},{name:"unk2",type:"int32"}]},{name:"textureDefinition",offset:"ofsTextures",count:"nTextures",type:"layout",layout:[{name:"texType",type:"uint32"},{name:"flags",type:"uint32"},{name:"filenameLen",type:"uint32"},{name:"ofsFilename",type:"uint32"},{name:"textureName",offset:"ofsFilename",len:"filenameLen",type:"string"}]},{name:"globalSequences",offset:"ofsGlobalSequences",count:"nGlobalSequences",type:"uint32"},{name:"animations",offset:"ofsAnimations",count:"nAnimations",type:"layout",layout:[{name:"animation_id",type:"uint16"},{name:"sub_animation_id",type:"uint16"},{name:"length",type:"uint32"},{name:"moving_speed",type:"float32"},{name:"flags",type:"uint32"},{name:"probability",type:"int16"},{name:"_padding",type:"uint16"},{name:"minimum_repetitions",type:"uint32"},{name:"maximum_repetitions",type:"uint32"},{name:"blend_time",type:"uint32"},{name:"boundingCorner1",type:"vector3f"},{name:"boundingCorner2",type:"vector3f"},{name:"bound_radius",type:"float32"},{name:"next_animation",type:"int16"},{name:"aliasNext",type:"uint16"}]},{name:"texLookup",offset:"ofsTexLookup",count:"nTexLookup",type:"uint16"},{name:"colors",offset:"ofsColors",count:"nColors",type:"layout",layout:[{name:"color",type:"ablock",valType:"vector3f"},{name:"alpha",type:"ablock",valType:"int16"}]},{name:"transparencies",offset:"ofsTransparency",count:"nTransparency",type:"layout",layout:[{name:"values",type:"ablock",valType:"int16"}]},{name:"bones",offset:"ofsBones",count:"nBones",type:"layout",layout:[{name:"key_bone_id",type:"int32"},{name:"flags",type:"uint32"},{name:"parent_bone",type:"int16"},{name:"submesh_id",type:"uint16"},{name:"unk1",type:"uint16"},{name:"unk2",type:"uint16"},{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"int16Array",len:4},{name:"scale",type:"ablock",valType:"vector3f"},{name:"pivot",type:"vector3f"}]},{name:"texAnimLookup",offset:"ofsTexAnimLookup",count:"nTexAnimLookup",type:"int16"},{name:"texAnims",offset:"ofsTexAnims",count:"nTexAnims",type:"layout",layout:[{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"int16Array",len:4},{name:"scale",type:"ablock",valType:"vector3f"}]},{name:"transLookup",offset:"ofsTransLookup",count:"nTransLookup",type:"int16"},{name:"texReplace",offset:"ofsTexReplace",count:"nTexReplace",type:"uint16"},{name:"textUnitLookup",offset:"ofsTexUnits",count:"nTexUnits",type:"int16"},{name:"renderFlags",offset:"ofsRenderFlags",count:"nRenderFlags",type:"layout",layout:[{name:"flags",type:"uint16"},{name:"blend",type:"uint16"}]}]},d={name:"header",type:"layout",layout:[{name:"MNameLen",type:"int32"},{name:"MNameOffs",type:"int32"},{name:"ModelType",type:"int32"},{name:"nGlobalSequences",type:"int32"},{name:"ofsGlobalSequences",type:"int32"},{name:"nAnimations",type:"int32"},{name:"ofsAnimations",type:"int32"},{name:"nC",type:"int32"},{name:"ofsC",type:"int32"},{name:"nBones",type:"int32"},{name:"ofsBones",type:"int32"},{name:"nF",type:"int32"},{name:"ofsF",type:"int32"},{name:"nVertexes",type:"int32"},{name:"ofsVertexes",type:"int32"},{name:"nViews",type:"int32"},{name:"nColors",type:"int32"},{name:"ofsColors",type:"int32"},{name:"nTextures",type:"int32"},{name:"ofsTextures",type:"int32"},{name:"nTransparency",type:"int32"},{name:"ofsTransparency",type:"int32"},{name:"nTexAnims",type:"int32"},{name:"ofsTexAnims",type:"int32"},{name:"nTexReplace",type:"int32"},{name:"ofsTexReplace",type:"int32"},{name:"nRenderFlags",type:"int32"},{name:"ofsRenderFlags",type:"int32"},{name:"nGroupBoneIDs",type:"int32"},{name:"ofsGroupBoneIDs",type:"int32"},{name:"nTexLookup",type:"int32"},{name:"ofsTexLookup",type:"int32"},{name:"nTexUnits",type:"int32"},{name:"ofsTexUnits",type:"int32"},{name:"nTransLookup",type:"int32"},{name:"ofsTransLookup",type:"int32"},{name:"nTexAnimLookup",type:"int32"},{name:"ofsTexAnimLookup",type:"int32"},{name:"BoundingCorner1",type:"vector3f"},{name:"BoundingCorner2",type:"vector3f"},{name:"BoundingRadius",type:"float32"},{name:"Corner1",type:"vector3f"},{name:"Corner2",type:"vector3f"},{name:"Radius",type:"float32"},{name:"nBoundingTriangles",type:"int32"},{name:"ofsBoundingTriangles",type:"int32"},{name:"nBoundingVertices",type:"int32"},{name:"ofsBoundingVertices",type:"int32"},{name:"nBoundingNormals",type:"int32"},{name:"ofsBoundingNormals",type:"int32"},{name:"nAttachments",type:"int32"},{name:"ofsAttachments",type:"int32"},{name:"nP",type:"int32"},{name:"ofsP",type:"int32"},{name:"nNumEvents",type:"int32"},{name:"ofsNumEvents",type:"int32"},{name:"nLights",type:"int32"},{name:"ofsLights",type:"int32"},{name:"nCameras",type:"int32"},{name:"ofsCameras",type:"int32"},{name:"nCameraLookup",type:"int32"},{name:"ofsCameraLookup",type:"int32"},{name:"nRibbonEmitters",type:"int32"},{name:"ofsRibbonEmitters",type:"int32"},{name:"nParticleEmitters",type:"int32"},{name:"ofsParticleEmitters",type:"int32"},{name:"vertexes",offset:"ofsVertexes",type:"uint8Array",len:function(t){return 48*t.nVertexes}},{name:"vertexesDebug",offset:"ofsVertexes",count:"nVertexes",type:"layout",layout:[{name:"pos",type:"vector3f"},{name:"bonesWeight",type:"uint8Array",len:4},{name:"bones",type:"uint8Array",len:4},{name:"normal",type:"vector3f"},{name:"textureX",type:"float32"},{name:"textureY",type:"float32"},{name:"unk1",type:"int32"},{name:"unk2",type:"int32"}]},{name:"textureDefinition",offset:"ofsTextures",count:"nTextures",type:"layout",layout:[{name:"texType",type:"uint32"},{name:"flags",type:"uint32"},{name:"filenameLen",type:"uint32"},{name:"ofsFilename",type:"uint32"},{name:"textureName",offset:"ofsFilename",len:"filenameLen",type:"string"}]},{name:"globalSequences",offset:"ofsGlobalSequences",count:"nGlobalSequences",type:"uint32"},{name:"animations",offset:"ofsAnimations",count:"nAnimations",type:"layout",layout:[{name:"animation_id",type:"uint16"},{name:"sub_animation_id",type:"uint16"},{name:"length",type:"uint32"},{name:"moving_speed",type:"float32"},{name:"flags",type:"uint32"},{name:"probability",type:"int16"},{name:"_padding",type:"uint16"},{name:"minimum_repetitions",type:"uint32"},{name:"maximum_repetitions",type:"uint32"},{name:"blend_time",type:"uint32"},{name:"boundingCorner1",type:"vector3f"},{name:"boundingCorner2",type:"vector3f"},{name:"bound_radius",type:"float32"},{name:"next_animation",type:"int16"},{name:"aliasNext",type:"uint16"}]},{name:"texLookup",offset:"ofsTexLookup",count:"nTexLookup",type:"uint16"},{name:"colors",offset:"ofsColors",count:"nColors",type:"layout",layout:[{name:"color",type:"ablock",valType:"vector3f"},{name:"alpha",type:"ablock",valType:"int16"}]},{name:"transparencies",offset:"ofsTransparency",count:"nTransparency",type:"layout",layout:[{name:"values",type:"ablock",valType:"int16"}]},{name:"bones",offset:"ofsBones",count:"nBones",type:"layout",layout:[{name:"key_bone_id",type:"int32"},{name:"flags",type:"uint32"},{name:"parent_bone",type:"int16"},{name:"submesh_id",type:"uint16"},{name:"unk1",type:"uint16"},{name:"unk2",type:"uint16"},{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"int16Array",len:4},{name:"scale",type:"ablock",valType:"vector3f"},{name:"pivot",type:"vector3f"}]},{name:"texAnimLookup",offset:"ofsTexAnimLookup",count:"nTexAnimLookup",type:"int16"},{name:"texAnims",offset:"ofsTexAnims",count:"nTexAnims",type:"layout",layout:[{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"int16Array",len:4},{name:"scale",type:"ablock",valType:"vector3f"}]},{name:"transLookup",offset:"ofsTransLookup",count:"nTransLookup",type:"int16"},{name:"texReplace",offset:"ofsTexReplace",count:"nTexReplace",type:"uint16"},{name:"textUnitLookup",offset:"ofsTexUnits",count:"nTexUnits",type:"int16"},{name:"renderFlags",offset:"ofsRenderFlags",count:"nRenderFlags",type:"layout",layout:[{name:"flags",type:"uint16"},{name:"blend",type:"uint16"}]}]},p={264:f,272:f,274:d},h=function(){function t(){o(this,t)}return a(t,[{key:"getHandler",value:function(t){return handlerTable[t]}}]),t}(),m=new h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e["default"]=function(t,e){function n(t){function e(){this.loadDataAtOffset=function(e,n){return(0,l["default"])(t,e,n)},this.readType=function(t,e,n,r){var o,i=this,a=e.type;switch(a){case"int8":o=t.readInt8(n);break;case"int16":o=t.readInt16(n);break;case"int32":o=t.readInt32(n);break;case"uint8":o=t.readUint8(n);break;case"uint16":o=t.readUint16(n);break;case"uint32":o=t.readUint32(n);break;case"int32Array":o=t.readInt32Array(n,r);break;case"uint8Array":o=t.readUint8Array(n,r);break;case"uint16Array":o=t.readUint16Array(n,r);break;case"int16Array":o=t.readInt16Array(n,r);break;case"vector3f":o=t.readVector3f(n);break;case"float32":o=t.readFloat32(n);break;case"string":o=void 0!=r?t.readNZTString(n,r):t.readString(n,9999);break;case"ablock":o={},o.interpolation_type=t.readUint16(n),o.global_sequence=t.readInt16(n);var s=t.readInt32(n),l=t.readInt32(n);s=0>s?0:s,o.timestampsPerAnimation=new Array(s);for(var u={offs:l},c=0;s>c;c++){var f=t.readUint32(u),d=t.readUint32(u);o.timestampsPerAnimation[c]=new Array(f);for(var p={offs:d},h=0;f>h;h++)o.timestampsPerAnimation[c][h]=t.readUint32(p)}var m=t.readInt32(n),b=t.readInt32(n);m=0>=m?0:m,o.valuesPerAnimation=new Array(m);for(var g={offs:b},c=0;m>c;c++){var v=t.readUint32(g),y=t.readUint32(g);o.valuesPerAnimation[c]=new Array(v);for(var p={offs:y},h=0;v>h;h++)o.valuesPerAnimation[c][h]=i.readType(t,{type:e.valType,len:e.len},p,e.len)}break;case"layout":var x=e.layout,w={};if(!x instanceof Array)throw"layout is not array";for(var c=0;c<x.length;c++){var _=x[c].name;w[_]=this.parseSectionDefinition(w,x[c],t,n)}return w;default:$log.info("Unknown type in layout. type = ",a)}return o},this.parseSectionDefinition=function(t,e,n,r){var o;o="string"==typeof e.offset?t[e.offset]:e.offset;var i=e.len;"string"==typeof e.len?i=t[i]:"function"==typeof e.len&&(i=e.len(t)),r&&o?r={offs:o}:o?r={offs:o}:r||(r={offs:0});var a,s=[],l=1,u=void 0!==e.count;u&&(l=t[e.count]);for(var c=0;l>c;c++)a=this.readType(n,e,r,i),s.push(a);var f;return f=u?s:s[0]}}var n=(0,l["default"])(t);e.prototype=n;var r=new e;return r}if(e){var r=n(e);return r}return(0,a["default"])(t).then(function(e){if("object"!=("undefined"==typeof e?"undefined":o(e))||!(e instanceof ArrayBuffer))return void $log.log("Failed to load file = "+t);var r=n(e);return r},function(t){return t})};var i=n(73),a=r(i),s=n(72),l=r(s)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(77),s=r(a),l=n(83),u=r(l),c=function(){
function t(e){o(this,t),this.gl=e.getGlContext(),this.indexVBO=null}return i(t,[{key:"assign",value:function(t){this.skinFile=t}},{key:"createVBO",value:function(){var t=this.gl,e=(this.skinFile,[]),n=this.skinFile.header;e.length=n.triangles.length;for(var r=0;r<e.length;r++)e[r]=n.indexes[n.triangles[r]];this.indexVBO=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexVBO),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW)}}]),t}(),f=function(){function t(e){o(this,t),this.cache=(0,s["default"])(function(t){return(0,u["default"])(t,!0)},function(t){var n=new c(e);return n.assign(t),n.createVBO(),n})}return i(t,[{key:"loadSkin",value:function(t){return this.cache.get(t)}},{key:"unLoadSkin",value:function(t){this.cache.remove(t)}}]),t}();e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=(i["default"].defer(),(0,s["default"])(t)),n=e.then(function(e){var n={offs:0},r=e.readNZTString(n,4);if("SKIN"!=r){var o="Unknown SKIN file ident = "+r+", filepath = "+t;throw $log.error(o),o}var i={header:{}};return i.header=e.parseSectionDefinition(i,l,e,n),i.fileName=t,i},function(t){return t});return n};var o=n(55),i=r(o),a=n(81),s=r(a),l={name:"header",type:"layout",layout:[{name:"nIndex",type:"int32"},{name:"ofsIndex",type:"int32"},{name:"nTris",type:"int32"},{name:"ofsTris",type:"int32"},{name:"nProps",type:"int32"},{name:"ofsProps",type:"int32"},{name:"nSub",type:"int32"},{name:"ofsSub",type:"int32"},{name:"nTex",type:"int32"},{name:"ofsTex",type:"int32"},{name:"LOD",type:"int32"},{name:"indexes",offset:"ofsIndex",len:"nIndex",type:"uint16Array"},{name:"triangles",offset:"ofsTris",len:"nTris",type:"uint16Array"},{name:"subMeshes",offset:"ofsSub",count:"nSub",type:"layout",layout:[{name:"meshID",type:"int32"},{name:"vStart",type:"uint16"},{name:"vCount",type:"uint16"},{name:"StartTriangle",type:"uint16"},{name:"nTriangles",type:"uint16"},{name:"nBones",type:"uint16"},{name:"OfsBoneList",type:"uint16"},{name:"boneInfluences",type:"uint16"},{name:"rootBone",type:"uint16"},{name:"pos",type:"vector3f"},{name:"unkPos",type:"vector3f"},{name:"unkFloat",type:"float32"}]},{name:"texs",offset:"ofsTex",count:"nTex",type:"layout",layout:[{name:"flags",type:"uint16"},{name:"shaderId",type:"int16"},{name:"submeshIndex",type:"uint16"},{name:"submesh_index2",type:"uint16"},{name:"colorIndex",type:"int16"},{name:"renderFlagIndex",type:"uint16"},{name:"layer",type:"uint16"},{name:"op_count",type:"uint16"},{name:"textureIndex",type:"uint16"},{name:"textureUnitNum",type:"uint16"},{name:"transpIndex",type:"uint16"},{name:"textureAnim",type:"uint16"}]}]}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(77),s=r(a),l=n(85),u=function(){function t(e,n){o(this,t),this.gl=n.getGlContext(),this.sceneApi=n,this.combinedVBO=null,this.indexVBO=null,this.wmoGroupFile=e,this.textureArray=[]}return i(t,[{key:"loadTextures",value:function(t){this.momt=t,this.textureArray.length=this.wmoGroupFile.renderBatches.length;for(var e=0;e<this.wmoGroupFile.renderBatches.length;e++){var n,r=this.wmoGroupFile.renderBatches[e];n=(2&r.flags)>0?256*r.unk[11]+r.unk[10]:r.tex,this.loadTexture(e,0,t[n].textureName1),this.loadTexture(e,1,t[n].textureName2)}}},{key:"loadTexture",value:function(t,e,n){var r=this;n&&this.sceneApi.resources.loadTexture(n).then(function(n){r.textureArray[t]||(r.textureArray[t]=[]),r.textureArray[t][e]=n},function(){})}},{key:"createVBO",value:function(){var t=this.gl,e=this.wmoGroupFile,n=function(t,e,n,r,o,i){var a=4*t.length+4*e.length+4*n.length;r&&(a+=4*r.length),o&&(a+=4*o.length),i&&(a+=4*i.length);var s=0,l=new Uint8Array(a);return l.set(new Uint8Array(new Float32Array(t).buffer),0),s+=4*t.length,l.set(new Uint8Array(new Float32Array(e).buffer),s),s+=4*e.length,l.set(new Uint8Array(new Float32Array(n).buffer),s),s+=4*n.length,r&&(l.set(new Uint8Array(new Float32Array(r).buffer),s),s+=4*r.length),o&&o.buffer&&(l.set(new Uint8Array(o.buffer),s),s+=4*o.length),i&&i.buffer&&(l.set(new Uint8Array(i.buffer),s),s+=4*i.length),l},r=n(e.verticles,e.normals,e.textCoords,e.textCoords2,e.colorVerticles,e.colorVerticles2);if(this.combinedVBO=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.combinedVBO),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this.positionOffset=0,this.normalOffset=this.positionOffset+e.verticles.length,this.textOffset=this.normalOffset+e.normals.length,this.textOffset2=this.textOffset+e.textCoords.length,this.colorOffset=this.textOffset2+e.textCoords2.length,this.colorOffset2=this.colorOffset+(e.colorVerticles&&e.colorVerticles.length>0)?e.colorVerticles.length/4:0,this.indexVBO=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexVBO),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e.indicies),t.STATIC_DRAW),e.mobr){this.mobrVBO=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.mobrVBO);for(var o=new Array(3*e.mobr.length),i=0;i<e.mobr.length;i++)o[3*i+0]=e.indicies[3*e.mobr[i]+0],o[3*i+1]=e.indicies[3*e.mobr[i]+1],o[3*i+2]=e.indicies[3*e.mobr[i]+2];t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(o),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}}},{key:"draw",value:function(t,e){var n=this.gl,r=this.sceneApi.shaders.getShaderUniforms(),o=this.sceneApi.shaders.getShaderAttributes(),i=this.sceneApi.getBlackPixelTexture(),a=this.wmoGroupFile,s=(8192&a.mogp.Flags)>0;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexVBO),n.bindBuffer(n.ARRAY_BUFFER,this.combinedVBO),n.enableVertexAttribArray(o.aPosition),n.vertexAttribPointer(o.aPosition,3,n.FLOAT,!1,0,0),void 0!==o.aNormal&&n.vertexAttribPointer(o.aNormal,3,n.FLOAT,!1,0,4*this.normalOffset),n.vertexAttribPointer(o.aTexCoord,2,n.FLOAT,!1,0,4*this.textOffset),o.aTexCoord2&&(a.textCoords2&&a.textCoords2.length>0?(n.enableVertexAttribArray(o.aTexCoord2),n.vertexAttribPointer(o.aTexCoord2,2,n.FLOAT,!1,0,4*this.textOffset2)):(n.disableVertexAttribArray(o.aTexCoord2),n.vertexAttrib2f(o.aTexCoord2,1,1))),o.aColor&&(s&&a.colorVerticles&&a.colorVerticles.length>1?(n.enableVertexAttribArray(o.aColor),n.vertexAttribPointer(o.aColor,4,n.UNSIGNED_BYTE,!0,0,4*this.colorOffset)):(n.disableVertexAttribArray(o.aColor),n.vertexAttrib4f(o.aColor,1,1,1,1))),o.aColor2&&(s&&a.colorVerticles2&&a.colorVerticles2.length>0?(n.enableVertexAttribArray(o.aColor2),n.vertexAttribPointer(o.aColor2,4,n.UNSIGNED_BYTE,!0,0,4*this.colorOffset2)):(n.disableVertexAttribArray(o.aColor2),n.vertexAttrib4f(o.aColor2,1,1,1,1))),n.activeTexture(n.TEXTURE0),n.uniform1f(r.uAlphaTest,-1);for(var l=0;l<a.renderBatches.length;l++){var u,c=a.renderBatches[l];u=(2&c.flags)>0?256*c.unk[11]+c.unk[10]:c.tex;var f=this.momt[u].color1,d=[255&f,f>>8&255,f>>16&255,f>>24&255];if(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255,t=[1,1,1,1],n.uniform4fv(r.uMeshColor1,new Float32Array(t)),0!=this.momt[u].blendMode){var p=.878431;(128&this.momt[u].flags1)>0,(1&this.momt[u].flags1)>0&&(p=.1),n.uniform1f(r.uAlphaTest,p)}else n.uniform1f(r.uAlphaTest,-1);(4&this.momt[u].flags1)>0?n.disable(n.CULL_FACE):n.enable(n.CULL_FACE);var h=this.textureArray[l];if(n.activeTexture(n.TEXTURE0),h&&h[0]&&n.bindTexture(n.TEXTURE_2D,h[0].texture),h&&h[1]?(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,h[1].texture)):(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,i)),e){var m=c.startIndex/3,b=c.count/3,g=m+b,v=this.wmoGroupFile.mobr.slice(e.firstFace,e.firstFace+e.numFaces-1);v=v.sort(function(t,e){return e>t?-1:1});for(var y=0;g>m;){for(;v[y]<m;)y++;for(;m==v[y];)m++,y++;b=g-m,m<v[y]&&m+b>v[y]&&(b=v[y]-m),n.drawElements(n.TRIANGLES,3*b,n.UNSIGNED_SHORT,3*m*2),m+=b}}else n.drawElements(n.TRIANGLES,c.count,n.UNSIGNED_SHORT,2*c.startIndex);h&&h[1]&&(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(n.TEXTURE0))}n.uniform1f(r.uAlphaTest,-1)}},{key:"destroy",value:function(){var t=this.gl;this.texture&&t.deleteTexture(this.texture),this.texture=null}}]),t}(),c=function(){function t(e){o(this,t),this.cache=(0,s["default"])(function(t){return(0,l.wmoGroupLoader)(t,!0)},function(t){var n=new u(t,e);return n.createVBO(),n})}return i(t,[{key:"loadWmoGeom",value:function(t){return this.cache.get(t)}},{key:"unLoadWmoGeom",value:function(t){this.cache.remove(t)}}]),t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){function n(){var e={MVER:function(n,o){if("MVER"!==o.chunkIdent)throw"Got bad group WMO file "+t;var i=o.readInt32({offs:0});17==i&&(e=r)}};this.getHandler=function(t){return e[t]}}var r=(f["default"].defer(),{MOGP:{MOGP:function(t,e){var n={offs:0},r={};return r.GroupName=e.readInt32(n),r.dGroupName=e.readInt32(n),r.Flags=e.readUint32(n),r.BoundBoxCorner1=e.readVector3f(n),r.BoundBoxCorner2=e.readVector3f(n),r.moprIndex=e.readInt16(n),r.numItems=e.readInt16(n),r.numBatchesA=e.readInt16(n),r.numBatchesB=e.readInt16(n),r.numBatchesC=e.readInt16(n),r.Indeces=e.readUint8Array(n,4),r.Unk1=e.readInt32(n),r.groupID=e.readInt32(n),r.Unk2=e.readInt32(n),r.Unk3=e.readInt32(n),n.offs+=10,t.mogp=r,n},subChunks:{MOPY:function(t,e){e.length/2},MOVI:function(t,e){var n=e.chunkLen/2;t.indicies=e.readUint16Array({offs:0},n)},MOVT:function(t,n){if(e)t.verticles=n.readFloat32Array({offs:0},n.chunkLen/4);else{var r=n.chunkLen/12;t.verticles=n.readVector3f({offs:0},r)}},MONR:function(t,n){var r=n.chunkLen/12;e?t.normals=n.readFloat32Array({offs:0},n.chunkLen/4):t.normals=n.readVector3f({offs:0},r)},MOTV:function(t,n){var r,o=n.chunkLen/8;r=e?n.readFloat32Array({offs:0},n.chunkLen/4):n.readVector2f({offs:0},o),t.firstMotvLoaded?t.secondMotvLoaded?t.textCoords3=r:(t.textCoords2=r,t.secondMotvLoaded=!0):(t.textCoords=r,t.firstMotvLoaded=!0)},MOCV:function(t,e){var n=(e.chunkLen/4,e.readUint8Array({offs:0},e.chunkLen));void 0==t.colorVerticles?t.colorVerticles=n:t.colorVerticles2=n},MODR:function(t,e){var n={offs:0},r=e.chunkLen/2,o=e.readUint16Array(n,r);t.doodadRefs=o},MOBA:function(t,e){for(var n={offs:0},r=e.chunkLen/24,o=[],i=0;i<Math.floor(r);i++){var a={};a.unk=e.readUint8Array(n,12),a.startIndex=e.readUint32(n),a.count=e.readUint16(n),a.minIndex=e.readInt16(n),a.maxIndex=e.readInt16(n),a.flags=e.readInt8(n),a.tex=e.readUint8(n),o.push(a)}t.renderBatches=o},MOBN:function(t,e){for(var n={offs:0},r=e.chunkLen/16,o=new Array(r),i=0;r>i;i++){var a={};a.planeType=e.readUint16(n),a.children1=e.readInt16(n),a.children2=e.readInt16(n),a.numFaces=e.readUint16(n),a.firstFace=e.readUint32(n),a.fDist=e.readFloat32(n),o[i]=a}t.nodes=o},MOBR:function(t,e){var n={offs:0},r=e.chunkLen/2;t.mobr=e.readUint16Array(n,r)}}}}),o=(0,s["default"])(t),i=o.then(function(t){var e={colorVerticles2:[],textCoords2:[]};return t.setSectionReaders(new n),t.processFile(e),e},function(t){return t});return i}function i(t){function e(){var e={MVER:function(r,o){if("MVER"!==o.chunkIdent)throw"Got bad WMO file "+t;var i=o.readInt32({offs:0});17==i&&(e=n)}};this.getHandler=function(t){return e[t]}}var n={MOHD:function(t,e){var n={offs:0};t.nTextures=e.readInt32(n),t.nGroups=e.readInt32(n),t.nPortals=e.readInt32(n),t.nLights=e.readInt32(n),t.nModels=e.readInt32(n),t.nDoodads=e.readInt32(n),t.nDoodadSets=e.readInt32(n),t.ambColor=e.readUint32(n),t.unk1=e.readInt32(n),t.BoundBoxCorner1=e.readVector3f(n),t.BoundBoxCorner2=e.readVector3f(n),t.WMOId=e.readInt32(n)},MOGI:function(t,e){for(var n={offs:0},r=[],o=0;o<t.nGroups;o++){var i={};i.flags=e.readUint32(n),i.bb1=e.readVector3f(n),i.bb2=e.readVector3f(n),i.nameoffset=e.readInt32(n),r.push(i)}t.groupInfos=r},MOPV:function(t,e){var n=e.chunkLen/4;t.portalVerticles=e.readFloat32Array({offs:0},n)},MOPT:function(t,e){for(var n={offs:0},r=e.chunkLen/20,o=new Array(r),i=0;r>i;i++){var a={};a.base_index=e.readUint16(n),a.index_count=e.readUint16(n),a.plane=e.readVector4f(n),o[i]=a}t.portalInfos=o},MOPR:function(t,e){for(var n={offs:0},r=e.chunkLen/8,o=new Array(r),i=0;r>i;i++){var a={};a.portal_index=e.readUint16(n),a.group_index=e.readUint16(n),a.side=e.readInt16(n),a.unk=e.readInt16(n),o[i]=a}t.portalRelations=o},MOLT:function(t,e){for(var n={offs:0},r=(e.chunkLen/t.nLights,[]),o=0;o<t.nLights;o++){var i={};i.lightType=e.readUint8(n),i.type=e.readUint8(n),i.useAtten=e.readUint8(n),i.pad=e.readUint8(n),i.color=e.readUint32(n),i.position=e.readVector3f(n),i.intensity=e.readFloat32(n),i.attenStart=e.readFloat32(n),i.attenEnd=e.readFloat32(n),i.unk1=e.readFloat32(n),i.unk2=e.readFloat32(n),i.unk3=e.readFloat32(n),i.unk4=e.readFloat32(n),r.push(i)}t.lights=r},MOMT:function(t,e){for(var n={offs:0},r=[],o=t.motx,i=0;i<t.nTextures;i++){var a={};a.flags1=e.readUint32(n),a.shader=e.readUint32(n),a.blendMode=e.readUint32(n),a.namestart1=e.readInt32(n),a.color1=e.readUint32(n),a.flags_1=e.readInt32(n),a.namestart2=e.readInt32(n),a.color2=e.readUint32(n),a.flags_2=e.readInt32(n),a.color_3=e.readUint32(n),a.unk=e.readInt32(n),a.dx=e.readInt32Array(n,5),a.textureName1=(0,u["default"])(o.buffer).readString({offs:a.namestart1},o.length),a.textureName2=(0,u["default"])(o.buffer).readString({offs:a.namestart2},o.length),r.push(a)}t.momt=r},MOTX:function(t,e){var n={offs:0},r=e.readUint8Array(n,e.chunkLen);t.motx=r},MODN:function(t,e){var n={offs:0},r=e.readUint8Array(n,e.chunkLen);t.modn=r},MODS:function(t,e){for(var n={offs:0},r=[],o=0;o<t.nDoodadSets;o++){var i={};i.name=e.readNZTString(n,20),i.index=e.readInt32(n),i.number=e.readInt32(n),i.unused=e.readInt32(n),r.push(i)}t.mods=r},MODD:function(t,e){for(var n={offs:0},r=t.modn,o=e.chunkLen/40,i=new Array(o),a=0;o>a;a++){var s={};s.nameIndex=e.readInt32(n),s.nameIndex=16777215&s.nameIndex,s.modelName=(0,u["default"])(r.buffer).readString({offs:s.nameIndex},r.length-s.nameIndex),s.pos=e.readVector3f(n),s.rotation=e.readQuaternion(n),s.scale=e.readFloat32(n),s.color=e.readUint32(n),i[a]=s}t.modd=i}},r=(0,s["default"])(t),o=r.then(function(t){var n={};return t.setSectionReaders(new e),t.processFile(n),n},function(){});return o}Object.defineProperty(e,"__esModule",{value:!0}),e.wmoGroupLoader=e.wmoLoader=void 0;var a=n(71),s=r(a),l=n(72),u=r(l),c=n(55),f=r(c);e.wmoLoader=i,e.wmoGroupLoader=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(77),s=r(a),l=n(85),u=function(){function t(e){o(this,t);this.cache=(0,s["default"])(function(t){return(0,l.wmoLoader)(t)},function(t){return t})}return i(t,[{key:"loadWmoMain",value:function(t){return this.cache.get(t)}},{key:"unLoadWmoMain",value:function(t){this.cache.remove(t)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(77),s=r(a),l=n(88),u=r(l),c=n(89),f=r(c),d=function(){function t(e){o(this,t),this.sceneApi=e,this.texture=null}return i(t,[{key:"loadFromMipmaps",value:function(t,e){var n=this.sceneApi.getGlContext(),r=this.sceneApi.extensions.getAnisotropicExt(),o=this.sceneApi.extensions.getComprTextExt();this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture);var i=null;if(o)switch(e){case"S3TC_RGB_DXT1":i=o.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case"S3TC_RGBA_DXT1":i=o.COMPRESSED_RGBA_S3TC_DXT1_EXT;break;case"S3TC_RGBA_DXT3":i=o.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case"S3TC_RGBA_DXT5":i=o.COMPRESSED_RGBA_S3TC_DXT5_EXT}var a=!(void 0!=o&&void 0!=o.COMPRESSED_RGB_S3TC_DXT1_EXT&&void 0!=o&&void 0!=o.COMPRESSED_RGBA_S3TC_DXT1_EXT),s=!(void 0!=o&&void 0!=o.COMPRESSED_RGBA_S3TC_DXT3_EXT),l=!(void 0!=o&&void 0!=o.COMPRESSED_RGBA_S3TC_DXT5_EXT);a=a||("S3TC_RGB_DXT1"===e||"S3TC_RGBA_DXT1"===e)&&t[0].width!==t[0].height;switch(e){case"S3TC_RGB_DXT1":case"S3TC_RGBA_DXT1":for(var u=0;u<t.length;u++)if(a){var c=f["default"].decodeDXT1toBitmap32(t[u].texture,t[u].width,t[u].height);n.texImage2D(n.TEXTURE_2D,u,n.RGBA,t[u].width,t[u].height,0,n.RGBA,n.UNSIGNED_BYTE,c.decData)}else n.compressedTexImage2D(n.TEXTURE_2D,u,i,t[u].width,t[u].height,0,t[u].texture);break;case"S3TC_RGBA_DXT3":for(var u=0;u<t.length;u++)if(s){var c=f["default"].decodeDXT3toBitmap32(t[u].texture,t[u].width,t[u].height);n.texImage2D(n.TEXTURE_2D,u,n.RGBA,t[u].width,t[u].height,0,n.RGBA,n.UNSIGNED_BYTE,c.decData)}else n.compressedTexImage2D(n.TEXTURE_2D,u,i,t[u].width,t[u].height,0,t[u].texture);break;case"S3TC_RGBA_DXT5":for(var u=0;u<t.length;u++)if(l){var c=f["default"].decodeDXT5toBitmap32(t[u].texture,t[u].width,t[u].height);n.texImage2D(n.TEXTURE_2D,u,n.RGBA,t[u].width,t[u].height,0,n.RGBA,n.UNSIGNED_BYTE,c.decData)}else n.compressedTexImage2D(n.TEXTURE_2D,u,i,t[u].width,t[u].height,0,t[u].texture);break;case"BGRA":for(var u=0;u<t.length;u++)n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t[u].width,t[u].height,0,n.RGBA,n.UNSIGNED_BYTE,t[u].texture)}if(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),r){var d=n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT);n.texParameterf(n.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,d)}n.bindTexture(n.TEXTURE_2D,null)}},{key:"destroy",value:function(){var t=this.gl;this.texture&&t.deleteTexture(this.texture),this.texture=null}}]),t}(),p=function(){function t(e){o(this,t);this.cache=(0,s["default"])(function(t){return(0,u["default"])(t)},function(t){var n=new d(e);return n.loadFromMipmaps(t.mipmaps,t.textureFormat),n.fileName=t.fileName,n})}return i(t,[{key:"loadTexture",value:function(t){var e=t.toLowerCase();return this.cache.get(e)}},{key:"unLoadTexture",value:function(t){this.cache.remove(t)}}]),t}();e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=(0,i["default"])(t),n=e.then(function(t){var e={offs:0},n=t.readNZTString(e,4);if("BLP2"!=n){var r,o="Unknown BLP file ident = "+n+", filepath = ";throw $log.error(o),o}var i={header:{}},i=t.parseSectionDefinition(i,a,t,e);i.fileName=r;var s=i.width,l=i.height;if(1==i.type){if(2==i.encoding)switch(i.alphaDepth){case 0:i.textureFormat="S3TC_RGB_DXT1";break;case 1:i.textureFormat="S3TC_RGB_DXT1";break;case 4:i.textureFormat="S3TC_RGBA_DXT3";break;case 8:1==i.alphaEncoding?i.textureFormat="S3TC_RGBA_DXT3":i.textureFormat="S3TC_RGBA_DXT5";break;default:i.textureFormat="S3TC_RGBA_DXT3"}else 1==i.encoding&&(i.textureFormat="BGRA");for(var u=[],c=0;15>c&&(0!=i.lengths[c]&&0!=i.offsets[c]);c++){var f=t.readUint8Array({offs:i.offsets[c]},i.lengths[c]);u.push({texture:f,width:s,height:l}),l=Math.floor(l/2),s=Math.floor(s/2),l=0==l?1:l,s=0==s?1:s}}return i.mipmaps=u,i},function(t){return t});return n};var o=n(81),i=r(o),a={name:"header",type:"layout",layout:[{name:"type",type:"int32"},{name:"encoding",type:"uint8"},{name:"alphaDepth",type:"uint8"},{name:"alphaEncoding",type:"uint8"},{name:"hasMips",type:"uint8"},{name:"width",type:"int32"},{name:"height",type:"int32"},{name:"offsets",type:"int32Array",len:16},{name:"lengths",type:"int32Array",len:16},{name:"palette",type:"uint8Array",len:256}]}},function(t,e){"use strict"},function(t,e,n){"use strict";function r(t,e){function n(t){var e=String.fromCharCode(t.keyCode||t.charCode);switch(e){case"W":p=1;break;case"S":p=-1;break;case"A":h=-1;break;case"D":h=1;break;case"Q":m=1;break;case"K":b=!b;break;case"E":m=-1}}function r(t){var e=String.fromCharCode(t.keyCode||t.charCode);switch(e){case"W":p=0;break;case"S":p=0;break;case"A":h=0;break;case"D":h=0;break;case"Q":m=0;break;case"E":m=0}}function i(t){0===t.button&&(g=1,v=t.pageX,y=t.pageY)}function a(t){g=1,v=t.pageX,y=t.pageY}function s(t){var e=t.touches[0].pageX,n=t.touches[0].pageY;1===g&&(x+=(e-v)/4,w+=(n-y)/4,-89>w?w=-89:w>89&&(w=89),v=e,y=n)}function l(t){0===t.button&&(g=0)}function u(t){1===g&&(x+=(t.pageX-v)/4,w+=(t.pageY-y)/4,-89>w?w=-89:w>89&&(w=89),v=t.pageX,y=t.pageY)}function c(t){g=0}function f(t){return t*(Math.PI/180)}var d=[0,0,0],p=0,h=0,m=0,b=!1,g=0,v=0,y=0,x=0,w=0;t.addEventListener("mousemove",u,!1),t.addEventListener("touchmove",s,!1),t.addEventListener("mousedown",i,!1),t.addEventListener("touchstart",a,!1),t.addEventListener("mouseup",l,!1),t.addEventListener("touchend",l,!1),t.addEventListener("mouseout",c,!1);var _;return e.addEventListener("mousedown",function(t){_=t.target},!1),e.addEventListener("keydown",function(e){_==t&&n(e)},!1),e.addEventListener("keyup",function(e){_==t&&r(e)},!1),{tick:function(t){var e=[1,0,0],n=.02,r=t;e=o.vec3.rotateY(e,e,[0,0,0],f(w)),e=o.vec3.rotateZ(e,e,[0,0,0],f(-x));var i=[];if(0!==h){var a=[];o.vec3.rotateZ(a,e,[0,0,0],f(-90)),a[2]=0,o.vec3.normalize(a,a),o.vec3.scale(a,a,r*n*h),o.vec3.add(d,d,a)}if(0!==p){var s=[];o.vec3.copy(s,e),o.vec3.scale(s,s,r*n*p),o.vec3.add(d,d,s)}return 0!==m&&(d[2]=d[2]+r*n*m),o.vec3.add(i,d,e),{lookAtVec3:i,cameraVec3:d,staticCamera:b}},setCameraPos:function(t,e,n){d=[t,e,n]}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var o=n(58)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(13),i=r(o),a=n(92),s=r(a);n(1),n(94),n(93);var l=i["default"].module("main.directives.fileDownloader",[s["default"],"uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html"]);l.directive("fileDownloader",[function(){return{restrict:"E",scope:{url:"=",loadedFile:"=loadedFile",fileProgress:"="},link:function(t,e,n){function r(e){e.lengthComputable&&(t.fileProgress=e.loaded/e.total*100,t.$apply())}t.fileProgress=0;var o=new XMLHttpRequest;o.onprogress=r,o.responseType="arraybuffer",o.open("GET",t.url,!0),o.onreadystatechange=function(e){4==o.readyState&&(t.loadedFile=o.response,t.$apply())},o.send()}}}])},function(t,e,n){n(93),n(94),n(95),n(96);var r="ui.bootstrap.module.progressbar";angular.module(r,["ui.bootstrap.progressbar","uib/template/progressbar/progressbar.html","uib/template/progressbar/progress.html","uib/template/progressbar/bar.html"]),t.exports=r},function(t,e){angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}])},function(t,e){angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}])},function(t,e){angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(t){t.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}])},function(t,e){angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(t,e,n){function r(){return angular.isDefined(t.maxParam)?t.maxParam:n.max}var o=this,i=angular.isDefined(e.animate)?t.$parent.$eval(e.animate):n.animate;this.bars=[],t.max=r(),this.addBar=function(t,e,n){i||e.css({transition:"none"}),this.bars.push(t),t.max=r(),t.title=n&&angular.isDefined(n.title)?n.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=o.bars.reduce(function(t,e){return e.percent=+(100*e.value/e.max).toFixed(2),t+e.percent},0);e>100&&(t.percent-=e-100)},t.$on("$destroy",function(){e=null,o.removeBar(t)})},this.removeBar=function(t){this.bars.splice(this.bars.indexOf(t),1),this.bars.forEach(function(t){t.recalculatePercentage()})},t.$watch("maxParam",function(t){o.bars.forEach(function(t){t.max=r(),t.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(t,e,n,r){r.addBar(t,e,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(t,e,n,r){r.addBar(t,angular.element(e.children()[0]),{title:n.title})}}})}]);
//# sourceMappingURL=main.js.map